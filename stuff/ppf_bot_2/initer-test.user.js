// ==UserScript==
// @name         PPF dark bot
// @version      2.16
// @author       Darkness
// @description  Have fun
// @icon         https://raw.githubusercontent.com/TouchedByDarkness/PixelPlanet-Bot/master/rounded-avatar-128.png
// @grant        GM_xmlhttpRequest
// @grant        GM_openInTab
// @grant        unsafeWindow
// @downloadURL  https://touchedbydarkness.github.io/stuff/ppf_bot_2/initer.user.js
// @updateURL  	https://touchedbydarkness.github.io/stuff/ppf_bot_2/initer.user.js
// @connect		 	black-and-red.space
// @connect		 	chillpixel.xyz
// @connect		 	pixmap.fun
// @connect		 	fuckyouarkeros.fun
// @connect		 	pixelplanet.fun
// @connect		 	pixelya.fun
// @connect		 	pixuniverse.fun
// @connect		 	localhost
// @connect		 	githubusercontent.com
// @connect		 	github.com
// @connect		 	voidserv.glitch.me
// @connect		 	fuckyouarkeros.fun
// @connect		 	pixelplanet.fun
// @connect		 	localhost
// @connect		 	pixmap.fun
// @connect		 	chillpixel.xyz
// @connect		 	pixelya.fun
// @connect		 	pixuniverse.fun
// @match      	*://fuckyouarkeros.fun/*
// @match      	*://pixelplanet.fun/*
// @match      	*://localhost/*
// @match      	*://pixmap.fun/*
// @match      	*://chillpixel.xyz/*
// @match      	*://pixelya.fun/*
// @match      	*://pixuniverse.fun/*
// ==/UserScript==

function parseVersion(versionString){return versionString.split(".").map(Number)}

function isVersionGreater(version2,version1){const v1=parseVersion(version1);const v2=parseVersion(version2);const maxLength=Math.max(v1.length,v2.length);for(let i=0;i<maxLength;i++){const num1=v1[i]||0;const num2=v2[i]||0;if(num1<num2)return true;if(num1>num2)return false}return false}

unsafeWindow.console.log("fetch remote bot code");
fetch(GM_info.script.updateURL, { headers: { Range: 'bytes=0-512' } })
.then(res => res.text())
.then(code => {
unsafeWindow.console.log("compare remote and installed bot versions");
const lines = code.replaceAll('\r', '').split('\n');
const versionLine = lines.find(line => line.includes('@version'));
const version = versionLine.match(/(\d|\.)+/g)?.pop();
if(version && isVersionGreater(version, GM_info.script.version)) {
unsafeWindow.console.log("update bot by opening github tab");
const tab = GM_openInTab(GM_info.script.updateURL, { active: true });
tab.onclose = () => location.reload();
}
});

function payload(){"undefined"==typeof unsafeWindow&&(globalThis.unsafeWindow=globalThis.window),(()=>{function t(t){let{hydratePixelUpdate:e,hydratePixelReturn:n,hydrateCoolDown:r,hydrateCaptchaReturn:o,dehydrateRegCanvas:i,dehydrateRegChunk:s,dehydrateDeRegMChunks:a,dehydratePixelUpdate:u,dehydratePing:c}=function({REG_CANVAS_OP:t,REG_CHUNK_OP:e,DEREG_CHUNK_OP:n,REG_MCHUNKS_OP:r,DEREG_MCHUNKS_OP:o,PING_OP:i,PIXEL_UPDATE_OP:s}){return{hydratePixelUpdate(t){let e=t.getUint8(1),n=t.getUint8(2),r=[],o=t.byteLength;for(;o>3;){let e=t.getUint8(o-=1),n=t.getUint16(o-=2),i=t.getUint8(o-=1)<<16;r.push([i|n,e])}return{i:e,j:n,pixels:r}},hydrateCoolDown:t=>t.getUint32(1),hydratePixelReturn:t=>({retCode:t.getUint8(1),wait:t.getUint32(2),coolDownSeconds:t.getInt16(6),pxlCnt:t.getUint8(8),rankedPxlCnt:t.getUint8(9)}),hydrateCaptchaReturn:t=>t.getUint8(1),dehydrateRegCanvas(e){let n=new ArrayBuffer(2),r=new DataView(n);return r.setInt8(0,t),r.setInt8(1,Number(e)),n},dehydrateRegChunk(t){let n=new ArrayBuffer(3),r=new DataView(n);return r.setInt8(0,e),r.setInt16(1,t),n},dehydrateDeRegChunk(t){let e=new ArrayBuffer(3),r=new DataView(e);return r.setInt8(0,n),r.setInt16(1,t),e},dehydrateRegMChunks(t){let e=new ArrayBuffer(2+2*t.length),n=new Uint16Array(e);n[0]=r;for(let e=0;e<t.length;e+=1)n[e+1]=t[e];return e},dehydrateDeRegMChunks(t){let e=new ArrayBuffer(2+2*t.length),n=new Uint16Array(e);n[0]=o;for(let e=0;e<t.length;e+=1)n[e+1]=t[e];return e},dehydratePing:()=>new Uint8Array([i]).buffer,dehydratePixelUpdate(t,e,n){let r=new ArrayBuffer(3+4*n.length),o=new DataView(r);o.setUint8(0,s),o.setUint8(1,t),o.setUint8(2,e);let i=2,a=n.length;for(;a;){a-=1;let[t,e]=n[a];o.setUint8(i+=1,t>>>16),o.setUint16(i+=1,65535&t),o.setUint8(i+=2,e)}return r}}}(t),{PIXEL_UPDATE_OP:l,PIXEL_RETURN_OP:f,COOLDOWN_OP:h,CAPTCHA_RETURN_OP:p}=t,d=null;return class t extends ni{constructor(t){super(),this.canvasId=t,this._info=ii,this.loadQueue=[],this.pixelsDelay=150+50*Math.random(),this.delayedPixels=[],this.chunks=new ri,this.maxLoaders=2,this.loaders=[],this.chunksProcessing=!1,this.emitter=new Fo,this.local=new Fo,this.timer=new ei,this.ws=new Ho(`${"https:"===window.location.protocol?"wss:":"ws:"}//${Ei||window.location.host}/ws`),this.ws.on(0,(async()=>{for(this.emitter.emit(0),this.selectCanvas(this.canvasId),this.emitter.emit(2);this.ws.connected;)await m(19e3),this.ws.send(c())})),this.ws.on(4,(t=>{let i=new DataView(t);switch(i.getUint8(0)){case l:this.handleArrivedPixel(e(i));break;case f:let{retCode:t,wait:s}=n(i);this.timer.update(s),this.local.emit(0,t);break;case p:this.local.emit(1,o(i));break;case h:this.timer.update(r(i))}})),this.ws.on(1,(()=>this.emitter.emit(1)))}get info(){if(this._info===ii)throw Pi.errAPIIsntReady;return this._info}set info(t){this._info=t}static async build(e){let n=new this(e),r=d??await t.fetchMe();return n.info=Si(r.canvases[e]),await n.ws.connect(),n}static async fetchMe(){return G(`${Mi}/api/me`)}static async getMe(){return d||(d=await t.fetchMe()),d}static async getCanvasIdByCanvasIdent(e){let n=await t.getMe();for(let[t,r]of Object.entries(n.canvases))if(r.ident===e)return+t;throw new Error("no canvas char in me info")}get(t,e){for(let n of this.delayedPixels){let r=n.find((n=>n.x===t&&n.y===e));if(r)return r.id}return this.getHumanlike(t,e)}getHumanlike(t,e){let n=this.toTiled(t,e);return this.chunks.get(n[0],n[1]).get(n[2])}dropChunks(t){let e=[];for(let n of t){let t=Ti(n);if(this.chunks.has(n[0],n[1])){e.push(n),this.chunks.delete(n[0],n[1]);continue}if(this.loadQueue.includes(t)){this.loadQueue=this.loadQueue.filter((e=>e!==t));continue}let r=this.loaders.filter((e=>e.chunk===t));r.length&&(r.forEach((t=>t.aborter.abort())),this.loaders=this.loaders.filter((e=>e.chunk!==t)))}e.length&&this.deRegisterChunks(e)}async prepareChunks(t){this.ws.disconnected&&await this.emitter.wait(2),t.forEach((t=>this.loadQueue.push(Ti(t)))),this.processMarked(),await this.waitChunks(t)}async placePixels(t){let e=this.groupPixels(t);for(let t in e){let n,r=e[t],o=Ii(+t);this.emitter.emit(4,r.map((({offset:t,id:e})=>{let[n,r]=this.toWorld(o[0],o[1],t);return{x:n,y:r,id:e}}))),this.ws.send(u(o[0],o[1],r.map((t=>[t.offset,t.id]))));try{n=await this.local.wait(0,4e3)}catch(t){let e=t;throw e===Do?Pi.errNoPlacePixelResult:e}switch(n){case hi:break;case pi:case di:case gi:case yi:case vi:throw Pi.errCanvasAPIInteraction;case wi:throw Pi.errMustAuth;case mi:throw Pi.errTooLowScore;case _i:throw Pi.errPixelProtected;case bi:throw Pi.errFullStack;case xi:throw Pi.errCaptcha;case Ci:throw Pi.errYouAreProxy;case ji:throw Pi.errTooLowScore;case ki:throw Pi.errParallelPlace;case Ai:throw Pi.errYouAreBanned;default:throw new Error(`unknown retcode: ${n}`)}}}async getCaptcha(){let t=await fetch(Mi+"/captcha.svg",{cache:"no-cache"});if(!t.ok||200!==t.status)throw Pi.errCanvasAPIInteraction;let e=URL.createObjectURL(await t.blob()),n=t.headers.get("captcha-id");if(null===n)throw Pi.errCanvasAPIInteraction;return{id:n,svg:await fetch(e).then((t=>t.text()))}}async sendAnswer({solution:t,id:e}){this.ws.send(`cs,${JSON.stringify([t,e])}`);let n=await this.local.wait(1),r=[!0,Oi.errCaptchaTimeout,!1,Oi.errInvalidSolution,Pi.errCanvasAPIInteraction];return r.length>n?r[n]:Pi.errUnknownError}predictCooldown(t,e){let n=this.toTiled(t,e);return this.chunks.get(n[0],n[1]).get(n[2])<this.info.palette.offset?this.info.minCd:this.info.maxCd}destroy(){return this.dropChunks(this.loadQueue.map(Ii)),this.ws.disconnect()}groupPixels(t){let e=(0,fi.group)(t).by((t=>Ti(this.toTiled(t.x,t.y).slice(0,2)))).asArrays(),n={};return e.forEach((t=>{let e=this.toTiled(t[0].x,t[0].y),r=Ti(e.slice(0,2));n[r]=t.map((t=>({offset:this.toTiled(t.x,t.y)[2],id:t.id})))})),n}async waitChunks(t){for(t=t.slice().filter((t=>!this.chunks.has(t[0],t[1])));t.length;){let e=await this.emitter.wait(5,1e4),n=Ti(e),r=t.findIndex((t=>Ti(t)===n));-1!==r&&t.splice(r,1)}}processMarked(){if(!this.chunksProcessing){for(this.chunksProcessing=!0;this.loaders.length<this.maxLoaders;){let t=this.loadQueue.pop();if(void 0===t)break;let e=Ii(t);if(this.chunks.has(e[0],e[1])||this.loaders.some((e=>e.chunk===t)))continue;let n={chunk:t,aborter:new AbortController};this.loaders.push(n),this.fetchChunk(e,n.aborter).then((t=>{this.chunks.set(t,e[0],e[1]),this.registerChunk(e),this.loaders.splice(this.loaders.indexOf(n),1),this.processMarked()}))}this.chunksProcessing=!1}}async fetchChunk(t,e){let n=e?{signal:e.signal}:{},r=`${Mi}/chunks/${this.canvasId}/${t[0]}/${t[1]}.bmp`,o=await fetch(r,n);if(!o.ok)throw console.debug(o),Pi.errResponseIsntOk;if(200!==o.status)throw console.debug(o),Pi.errResponseStatusIsnt200;let i=await o.arrayBuffer(),s=new Uint8Array(i),a=new Uint32Array(this.chunkSize);if(i.byteLength)for(let t=0;t!==s.length;t++)a[t]=63&s[t];return this.emitter.emit(5,t),new oi(a)}registerChunk(t){this.ws.send(s(Ti(t)))}deRegisterChunks(t){this.ws.send(a(t.map((t=>Ti(t)))))}toTiled(t,e){let n=t+(this.info.worldWidth>>1),r=e+(this.info.worldHeight>>1);return[n>>8,r>>8,(255&r)<<8|255&n]}toWorld(t,e,n){return[(t<<8)-(this.info.worldWidth>>1)+(255&n),(e<<8)-(this.info.worldHeight>>1)+(n>>8)]}selectCanvas(t){this.ws.send(i(t))}handleArrivedPixel(t){let e=t.pixels.map((e=>{let[n,r]=this.toWorld(t.i,t.j,e[0]);return{x:n,y:r,id:e[1]}}));this.emitter.emit(3,e),this.delayedPixels.push(e),setTimeout((()=>{let n=this.delayedPixels.indexOf(e);if(-1!==n){this.delayedPixels.splice(n,1);let e=this.chunks.get(t.i,t.j);e&&t.pixels.forEach((t=>e.set(t[0],t[1])))}}),this.pixelsDelay)}}}function e(){window.addEventListener("mousemove",(()=>{let t=g(".coorbox");if(!t)return;let e=b(t.textContent??"");e&&2===e.length&&Ri.emit(4,[e[0],e[1]])}))}function n(t,e){let n={};return e.forEach((e=>{let r=t.get(e[0],e[1]),o=n[r];o||(o=[],n[r]=o),o.push(e)})),n}function r(t){let e=0,n=0;return t.forEach((t=>{e+=t[0],n+=t[1]})),[Math.trunc(e/t.length),Math.trunc(n/t.length)]}function o(t){if(t.length<=5)return x(t);let e=new Map;for(let n=1;n!==t.length;n++)e.set(s(t[n]),n);for(let n=0;n!==t.length-1;n++){let r,o,u=t[n],c=1/0,l=-1;if(1===e.size)r=a(e.keys().next().value);else for(;!r;)l++,i(l,((t,n)=>{let i=[u[0]+t,u[1]+n],a=e.get(s(i));if(void 0!==a){let t=$(u,i);(t<c||t==c&&a<o)&&(c=t,r=i,o=a)}}));e.delete(s(r)),t[n+1]=r}return t}function i(t,e){let n=0,r=t,o=3-(r<<1);for(;n<=r;)e(+n,+r),e(+n,-r),e(-n,+r),e(-n,-r),e(+r,+n),e(+r,-n),e(-r,+n),e(-r,-n),o<0?o+=6+(n<<2):(o+=10+(n-r<<2),r--),n++}function s(t){return t[0]|t[1]<<16}function a(t){return[255&t,t>>16]}function u(){WebSocket.prototype.send=()=>{}}function c(...t){console.debug("[DB]",...t.map((t=>"object"==typeof t&&t.hasOwnProperty("toString")?t.toString():t)))}async function l(){if(await qe.clear(),Ve.ready){let t=await qe.get(),e=Ve.now();if(!e||!t){let n=[];return e||n.push("bot"),t||n.push("targeter"),void c("cant change targeter because "+n.join(" and ")+" is missing")}await f(),e.changeTargeter(t)}else await f()}async function f(){let[t,e]=await Promise.all([Ye.get(),Ke.get()]);if(!t||!e){let n=[];return t||n.push("api"),e||n.push("template"),void c("cant change workspace because "+n.join(" and ")+" is missing")}let n=!1,r=Ve.now();r&&0!==r.status&&(n=!0,await r.stop());let o=t.createWorkspace(...e.toArray());t.hasWorkspace(o)||await t.changeWorkspace(o),n&&(r=Ve.now(),r&&h(r.start()))}async function h(t){Ge.setBotStatus("works");try{await t,Ge.setBotStatus("idle")}catch(t){let e=t;c("error returned",e),Be.emit(0,e)}}var p,d,g,y,v,w,m,_,b,x,C,j,k,A,P,O,S,E,M,T,I,L,z,R,D,U,W,N,B,$,F,H,G,V,q,K,Y,Z,X,Q,J,tt,et,nt,rt,ot,it,st,at,ut,ct,lt,ft,ht,pt,dt,gt,yt,vt,wt,mt,_t,bt,xt,Ct,jt,kt,At,Pt,Ot,St,Et,Mt,Tt,It,Lt,zt,Rt,Dt,Ut,Wt,Nt,Bt,$t,Ft,Ht,Gt,Vt,qt,Kt,Yt,Zt,Xt,Qt,Jt,te,ee,ne,re,oe,ie,se,ae,ue,ce,le,fe,he,pe,de,ge,ye,ve,we,me,_e,be,xe,Ce,je,ke,Ae,Pe,Oe,Se,Ee,Me,Te,Ie,Le,ze,Re,De,Ue,We,Ne,Be,$e,Fe,He,Ge,Ve,qe,Ke,Ye,Ze=Object.create,Xe=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor,Je=Object.getOwnPropertyNames,tn=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty,nn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),rn=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of Je(e))!en.call(t,o)&&o!==n&&Xe(t,o,{get:()=>e[o],enumerable:!(r=Qe(e,o))||r.enumerable});return t},on=(t,e,n)=>(n=null!=t?Ze(tn(t)):{},rn(!e&&t&&t.__esModule?n:Xe(n,"default",{value:t,enumerable:!0}),t)),sn=nn(((t,e)=>{"use strict";var n=/\s/;e.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}})),an=nn(((t,e)=>{"use strict";var n=sn(),r=/^\s+/;e.exports=function(t){return t&&t.slice(0,n(t)+1).replace(r,"")}})),un=nn(((t,e)=>{"use strict";e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}})),cn=nn(((t,e)=>{"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n})),ln=nn(((t,e)=>{"use strict";var n=cn(),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();e.exports=o})),fn=nn(((t,e)=>{"use strict";var n=ln().Symbol;e.exports=n})),hn=nn(((t,e)=>{"use strict";var n=fn(),r=Object.prototype,o=r.hasOwnProperty,i=r.toString,s=n?n.toStringTag:void 0;e.exports=function(t){var e,n,r=o.call(t,s),a=t[s];try{t[s]=void 0,e=!0}catch{}return n=i.call(t),e&&(r?t[s]=a:delete t[s]),n}})),pn=nn(((t,e)=>{"use strict";var n=Object.prototype.toString;e.exports=function(t){return n.call(t)}})),dn=nn(((t,e)=>{"use strict";var n=fn(),r=hn(),o=pn(),i=n?n.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?r(t):o(t)}})),gn=nn(((t,e)=>{"use strict";e.exports=function(t){return null!=t&&"object"==typeof t}})),yn=nn(((t,e)=>{"use strict";var n=dn(),r=gn();e.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}})),vn=nn(((t,e)=>{"use strict";var n=an(),r=un(),o=yn(),i=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(t){var e,l;return"number"==typeof t?t:o(t)?i:(r(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=r(e)?e+"":e),"string"!=typeof t?0===t?t:+t:(t=n(t),(l=a.test(t))||u.test(t)?c(t.slice(2),l?2:8):s.test(t)?i:+t))}})),wn=nn(((t,e)=>{"use strict";var n=vn(),r=1/0;e.exports=function(t){return t?(t=n(t))===r||t===-r?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}})),mn=nn(((t,e)=>{"use strict";var n=wn();e.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}})),_n=nn(((t,e)=>{"use strict";var n=mn();e.exports=function(t,e){var r;if("function"!=typeof e)throw new TypeError("Expected a function");return t=n(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}})),bn=nn(((t,e)=>{"use strict";var n=_n();e.exports=function(t){return n(2,t)}})),xn=nn(((t,e)=>{"use strict";function n(){n.init.call(this)}function r(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function i(t,e,n,i){var s,a,u,c;return r(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),u=a[e]),void 0===u?(u=a[e]=n,++t._eventsCount):("function"==typeof u?u=a[e]=i?[n,u]:[u,n]:i?u.unshift(n):u.push(n),(s=o(t))>0&&u.length>s&&!u.warned&&(u.warned=!0,(c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=u.length,function(t){console&&console.warn&&console.warn(t)}(c))),t}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=s.bind(r);return o.listener=n,r.wrapFn=o,o}function u(t,e,n){var r,o=t._events;return void 0===o||void 0===(r=o[e])?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):l(r,r.length)}function c(t){var e,n=this._events;if(void 0!==n){if("function"==typeof(e=n[t]))return 1;if(void 0!==e)return e.length}return 0}function l(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function f(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}var h,p,d,g="object"==typeof Reflect?Reflect:null,y=g&&"function"==typeof g.apply?g.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};h=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},p=Number.isNaN||function(t){return t!=t},e.exports=n,e.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}f(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&f(t,"error",e,n)}(t,o,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0,d=10,Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(t){if("number"!=typeof t||t<0||p(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d=t}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||p(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(t){var e,n,r,o,i,s,a,u,c;for(e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);if(r="error"===t,void 0!==(o=this._events))r=r&&void 0===o.error;else if(!r)return!1;if(r){if(e.length>0&&(i=e[0]),i instanceof Error)throw i;throw(s=new Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,s}if(void 0===(a=o[t]))return!1;if("function"==typeof a)y(a,this,e);else for(c=l(a,u=a.length),n=0;n<u;++n)y(c[n],this,e);return!0},n.prototype.addListener=function(t,e){return i(this,t,e,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,e){return i(this,t,e,!0)},n.prototype.once=function(t,e){return r(e),this.on(t,a(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){return r(e),this.prependListener(t,a(this,t,e)),this},n.prototype.removeListener=function(t,e){var n,o,i,s,a;if(r(e),void 0===(o=this._events))return this;if(void 0===(n=o[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(o[t]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",t,a||e)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(t){var e,n,r,o,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(o=Object.keys(n),r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},n.prototype.listeners=function(t){return u(this,t,!0)},n.prototype.rawListeners=function(t){return u(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},n.prototype.listenerCount=c,n.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]}})),Cn=nn(((t,e)=>{"use strict";(function(){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,r){var o,i,s;for(o=-1,i=null==t?0:t.length;++o<i;)e(r,s=t[o],n(s),t);return r}function o(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function i(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function a(t,e){var n,r,o,i,s;for(n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;)e(s=t[n],n,t)&&(i[o++]=s);return i}function u(t,e){return!!(null==t?0:t.length)&&v(t,e,0)>-1}function c(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function l(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function f(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function h(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function p(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function d(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function g(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function y(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function v(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):y(t,m,n)}function w(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function m(t){return t!=t}function _(t,e){var n=null==t?0:t.length;return n?j(t,e)/n:Kt}function b(t){return function(e){return null==e?B:e[t]}}function x(t){return function(e){return null==t?B:t[e]}}function C(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}function j(t,e){var n,r,o,i;for(r=-1,o=t.length;++r<o;)(i=e(t[r]))!==B&&(n=n===B?i:n+i);return n}function k(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function A(t){return t&&t.slice(0,N(t)+1).replace(qe,"")}function P(t){return function(e){return t(e)}}function O(t,e){return l(e,(function(e){return t[e]}))}function S(t,e){return t.has(e)}function E(t,e){for(var n=-1,r=t.length;++n<r&&v(e,t[n],0)>-1;);return n}function M(t,e){for(var n=t.length;n--&&v(e,t[n],0)>-1;);return n}function T(t){return"\\"+V[t]}function I(t){return rr.test(t)}function L(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function z(t,e){return function(n){return t(e(n))}}function R(t,e){var n,r,o,i,s;for(n=-1,r=t.length,o=0,i=[];++n<r;)((s=t[n])===e||s===xt)&&(t[n]=xt,i[o++]=n);return i}function D(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function U(t){return I(t)?function(t){for(var e=er.lastIndex=0;er.test(t);)++e;return e}(t):ct(t)}function W(t){return I(t)?function(t){return t.match(er)||[]}(t):function(t){return t.split("")}(t)}function N(t){for(var e=t.length;e--&&Ke.test(t.charAt(e)););return e}var B,$,F,H,G,V,q,K,Y,Z,X,Q,J,tt,et,nt,rt,ot,it,st,at,ut,ct,lt,ft,ht,pt,dt,gt="4.17.21",yt=200,vt="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",wt="Expected a function",mt="Invalid `variable` option passed into `_.template`",_t="__lodash_hash_undefined__",bt=500,xt="__lodash_placeholder__",Ct=1,jt=2,kt=4,At=1,Pt=2,Ot=1,St=2,Et=4,Mt=8,Tt=16,It=32,Lt=64,zt=128,Rt=256,Dt=512,Ut=30,Wt="...",Nt=800,Bt=16,$t=1,Ft=2,Ht=3,Gt=1/0,Vt=9007199254740991,qt=17976931348623157e292,Kt=NaN,Yt=4294967295,Zt=Yt-1,Xt=Yt>>>1,Qt=[["ary",zt],["bind",Ot],["bindKey",St],["curry",Mt],["curryRight",Tt],["flip",Dt],["partial",It],["partialRight",Lt],["rearg",Rt]],Jt="[object Arguments]",te="[object Array]",ee="[object AsyncFunction]",ne="[object Boolean]",re="[object Date]",oe="[object DOMException]",ie="[object Error]",se="[object Function]",ae="[object GeneratorFunction]",ue="[object Map]",ce="[object Number]",le="[object Null]",fe="[object Object]",he="[object Promise]",pe="[object Proxy]",de="[object RegExp]",ge="[object Set]",ye="[object String]",ve="[object Symbol]",we="[object Undefined]",me="[object WeakMap]",_e="[object WeakSet]",be="[object ArrayBuffer]",xe="[object DataView]",Ce="[object Float32Array]",je="[object Float64Array]",ke="[object Int8Array]",Ae="[object Int16Array]",Pe="[object Int32Array]",Oe="[object Uint8Array]",Se="[object Uint8ClampedArray]",Ee="[object Uint16Array]",Me="[object Uint32Array]",Te=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,Le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ze=/&(?:amp|lt|gt|quot|#39);/g,Re=/[&<>"']/g,De=RegExp(ze.source),Ue=RegExp(Re.source),We=/<%-([\s\S]+?)%>/g,Ne=/<%([\s\S]+?)%>/g,Be=/<%=([\s\S]+?)%>/g,$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fe=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(Ge.source),qe=/^\s+/,Ke=/\s/,Ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,Qe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Je=/[()=,{}\[\]\/\s]/,tn=/\\(\\)?/g,en=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nn=/\w*$/,rn=/^[-+]0x[0-9a-f]+$/i,on=/^0b[01]+$/i,sn=/^\[object .+?Constructor\]$/,an=/^0o[0-7]+$/i,un=/^(?:0|[1-9]\d*)$/,cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ln=/($^)/,fn=/['\n\r\u2028\u2029\\]/g,hn="\\ud800-\\udfff",pn="\\u0300-\\u036f",dn="\\ufe20-\\ufe2f",gn="\\u20d0-\\u20ff",yn=pn+dn+gn,vn="\\u2700-\\u27bf",wn="a-z\\xdf-\\xf6\\xf8-\\xff",mn="\\xac\\xb1\\xd7\\xf7",_n="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bn="\\u2000-\\u206f",xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cn="A-Z\\xc0-\\xd6\\xd8-\\xde",jn="\\ufe0e\\ufe0f",kn=mn+_n+bn+xn,An="['’]",Pn="["+hn+"]",On="["+kn+"]",Sn="["+yn+"]",En="\\d+",Mn="["+vn+"]",Tn="["+wn+"]",In="[^"+hn+kn+En+vn+wn+Cn+"]",Ln="\\ud83c[\\udffb-\\udfff]",zn="(?:"+Sn+"|"+Ln+")",Rn="[^"+hn+"]",Dn="(?:\\ud83c[\\udde6-\\uddff]){2}",Un="[\\ud800-\\udbff][\\udc00-\\udfff]",Wn="["+Cn+"]",Nn="\\u200d",Bn="(?:"+Tn+"|"+In+")",$n="(?:"+Wn+"|"+In+")",Fn="(?:"+An+"(?:d|ll|m|re|s|t|ve))?",Hn="(?:"+An+"(?:D|LL|M|RE|S|T|VE))?",Gn=zn+"?",Vn="["+jn+"]?",qn="(?:"+Nn+"(?:"+[Rn,Dn,Un].join("|")+")"+Vn+Gn+")*",Kn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zn=Vn+Gn+qn,Xn="(?:"+[Mn,Dn,Un].join("|")+")"+Zn,Qn="(?:"+[Rn+Sn+"?",Sn,Dn,Un,Pn].join("|")+")",Jn=RegExp(An,"g"),tr=RegExp(Sn,"g"),er=RegExp(Ln+"(?="+Ln+")|"+Qn+Zn,"g"),nr=RegExp([Wn+"?"+Tn+"+"+Fn+"(?="+[On,Wn,"$"].join("|")+")",$n+"+"+Hn+"(?="+[On,Wn+Bn,"$"].join("|")+")",Wn+"?"+Bn+"+"+Fn,Wn+"+"+Hn,Yn,Kn,En,Xn].join("|"),"g"),rr=RegExp("["+Nn+hn+yn+jn+"]"),or=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ir=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sr=-1,ar={};ar[Ce]=ar[je]=ar[ke]=ar[Ae]=ar[Pe]=ar[Oe]=ar[Se]=ar[Ee]=ar[Me]=!0,ar[Jt]=ar[te]=ar[be]=ar[ne]=ar[xe]=ar[re]=ar[ie]=ar[se]=ar[ue]=ar[ce]=ar[fe]=ar[de]=ar[ge]=ar[ye]=ar[me]=!1,($={})[Jt]=$[te]=$[be]=$[xe]=$[ne]=$[re]=$[Ce]=$[je]=$[ke]=$[Ae]=$[Pe]=$[ue]=$[ce]=$[fe]=$[de]=$[ge]=$[ye]=$[ve]=$[Oe]=$[Se]=$[Ee]=$[Me]=!0,$[ie]=$[se]=$[me]=!1,F={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},G={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},V={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},q=parseFloat,K=parseInt,Y="object"==typeof global&&global&&global.Object===Object&&global,Z="object"==typeof self&&self&&self.Object===Object&&self,X=Y||Z||Function("return this")(),Q="object"==typeof t&&t&&!t.nodeType&&t,J=Q&&"object"==typeof e&&e&&!e.nodeType&&e,tt=J&&J.exports===Q,et=tt&&Y.process,nt=function(){try{return J&&J.require&&J.require("util").types||et&&et.binding&&et.binding("util")}catch{}}(),rt=nt&&nt.isArrayBuffer,ot=nt&&nt.isDate,it=nt&&nt.isMap,st=nt&&nt.isRegExp,at=nt&&nt.isSet,ut=nt&&nt.isTypedArray,ct=b("length"),lt=x(F),ft=x(H),ht=x(G),pt=function t(e){function x(t){if(pi(t)&&!nu(t)&&!(t instanceof G)){if(t instanceof H)return t;if(ns.call(t,"__wrapped__"))return Wo(t)}return new H(t)}function F(){}function H(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=B}function G(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Yt,this.__views__=[]}function V(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}function Y(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}function Z(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}function Q(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Z;++e<n;)this.add(t[e])}function J(t){var e=this.__data__=new Y(t);this.size=e.size}function et(t,e){var n,r=nu(t),o=!r&&eu(t),i=!r&&!o&&ou(t),s=!r&&!o&&!i&&cu(t),a=r||o||i||s,u=a?k(t.length,Yi):[],c=u.length;for(n in t)(e||ns.call(t,n))&&(!a||!("length"==n||i&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||jo(n,c)))&&u.push(n);return u}function nt(t){var e=t.length;return e?t[ur(0,e-1)]:B}function ct(t,e){return Ro(Wr(t),wn(e,0,t.length))}function pt(t){return Ro(Wr(t))}function Ke(t,e,n){(n!==B&&!ii(t[e],n)||n===B&&!(e in t))&&yn(t,e,n)}function hn(t,e,n){var r=t[e];(!ns.call(t,e)||!ii(r,n)||n===B&&!(e in t))&&yn(t,e,n)}function pn(t,e){for(var n=t.length;n--;)if(ii(t[n][0],e))return n;return-1}function dn(t,e,n,r){return ta(t,(function(t,o,i){e(r,t,n(t),i)})),r}function gn(t,e){return t&&Nr(e,Pi(e),t)}function yn(t,e,n){"__proto__"==e&&_s?_s(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function vn(t,e){for(var n=-1,r=e.length,o=$i(r),i=null==t;++n<r;)o[n]=i?B:ki(t,e[n]);return o}function wn(t,e,n){return t==t&&(n!==B&&(t=t<=n?t:n),e!==B&&(t=t>=e?t:e)),t}function mn(t,e,n,r,i,s){var a,u,c,l,f,h,p=e&Ct,d=e&jt,g=e&kt;if(n&&(a=i?n(t,r,i,s):n(t)),a!==B)return a;if(!hi(t))return t;if(u=nu(t)){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ns.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!p)return Wr(t,a)}else{if(l=(c=ha(t))==se||c==ae,ou(t))return Ir(t,p);if(c==fe||c==Jt||l&&!i){if(a=d||l?{}:xo(t),!p)return d?function(t,e){return Nr(t,fa(t),e)}(t,function(t,e){return t&&Nr(e,Oi(e),t)}(a,t)):function(t,e){return Nr(t,la(t),e)}(t,gn(a,t))}else{if(!$[c])return i?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case be:return Lr(t);case ne:case re:return new r(+t);case xe:return function(t,e){var n=e?Lr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case Ce:case je:case ke:case Ae:case Pe:case Oe:case Se:case Ee:case Me:return zr(t,n);case ue:return new r;case ce:case ye:return new r(t);case de:return function(t){var e=new t.constructor(t.source,nn.exec(t));return e.lastIndex=t.lastIndex,e}(t);case ge:return new r;case ve:return function(t){return Xs?qi(Xs.call(t)):{}}(t)}}(t,c,p)}}return s||(s=new J),(f=s.get(t))?f:(s.set(t,a),uu(t)?t.forEach((function(r){a.add(mn(r,e,n,r,t,s))})):su(t)&&t.forEach((function(r,o){a.set(o,mn(r,e,n,o,t,s))})),o((h=u?B:(g?d?po:ho:d?Oi:Pi)(t))||t,(function(r,o){h&&(r=t[o=r]),hn(a,o,mn(r,e,n,o,t,s))})),a)}function _n(t,e,n){var r,o,i,s=n.length;if(null==t)return!s;for(t=qi(t);s--;)if(o=e[r=n[s]],(i=t[r])===B&&!(r in t)||!o(i))return!1;return!0}function bn(t,e,n){if("function"!=typeof t)throw new Zi(wt);return ga((function(){t.apply(B,n)}),e)}function xn(t,e,n,r){var o,i,s,a=-1,f=u,h=!0,p=t.length,d=[],g=e.length;if(!p)return d;n&&(e=l(e,P(n))),r?(f=c,h=!1):e.length>=yt&&(f=S,h=!1,e=new Q(e));t:for(;++a<p;)if(o=t[a],i=null==n?o:n(o),o=r||0!==o?o:0,h&&i==i){for(s=g;s--;)if(e[s]===i)continue t;d.push(o)}else f(e,i,r)||d.push(o);return d}function Cn(t,e){var n=!0;return ta(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function jn(t,e,n){var r,o,i,s,a,u;for(r=-1,o=t.length;++r<o;)null!=(s=e(i=t[r]))&&(a===B?s==s&&!vi(s):n(s,a))&&(a=s,u=i);return u}function kn(t,e){var n=[];return ta(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function An(t,e,n,r,o){var i,s=-1,a=t.length;for(n||(n=Co),o||(o=[]);++s<a;)i=t[s],e>0&&n(i)?e>1?An(i,e-1,n,r,o):f(o,i):r||(o[o.length]=i);return o}function Pn(t,e){return t&&na(t,e,Pi)}function On(t,e){return t&&ra(t,e,Pi)}function Sn(t,e){return a(e,(function(e){return ci(t[e])}))}function En(t,e){for(var n=0,r=(e=Mr(e,t)).length;null!=t&&n<r;)t=t[Do(e[n++])];return n&&n==r?t:B}function Mn(t,e,n){var r=e(t);return nu(t)?r:f(r,n(t))}function Tn(t){return null==t?t===B?we:le:ms&&ms in qi(t)?function(t){var e,n,r=ns.call(t,ms),o=t[ms];try{t[ms]=B,e=!0}catch{}n=is.call(t);return e&&(r?t[ms]=o:delete t[ms]),n}(t):function(t){return is.call(t)}(t)}function In(t,e){return t>e}function Ln(t,e){return null!=t&&ns.call(t,e)}function zn(t,e){return null!=t&&e in qi(t)}function Rn(t,e,n){var r,o,i,s,a,f,h,p,d,g,y,v,w;for(r=n?c:u,o=t[0].length,s=i=t.length,a=$i(i),f=1/0,h=[];s--;)p=t[s],s&&e&&(p=l(p,P(e))),f=Ts(p.length,f),a[s]=!n&&(e||o>=120&&p.length>=120)?new Q(s&&p):B;p=t[0],d=-1,g=a[0];t:for(;++d<o&&h.length<f;)if(y=p[d],v=e?e(y):y,y=n||0!==y?y:0,!(g?S(g,v):r(h,v,n))){for(s=i;--s;)if(!((w=a[s])?S(w,v):r(t[s],v,n)))continue t;g&&g.push(v),h.push(y)}return h}function Dn(t,e,r){var o=null==(t=To(t,e=Mr(e,t)))?t:t[Do(Ho(e))];return null==o?B:n(o,t,r)}function Un(t){return pi(t)&&Tn(t)==Jt}function Wn(t,e,n,r,o){return t===e||(null==t||null==e||!pi(t)&&!pi(e)?t!=t&&e!=e:function(t,e,n,r,o,i){var s,a,u,c,l=nu(t),f=nu(e),h=l?te:ha(t),p=f?te:ha(e),d=(h=h==Jt?fe:h)==fe,g=(p=p==Jt?fe:p)==fe,y=h==p;if(y&&ou(t)){if(!ou(e))return!1;l=!0,d=!1}if(y&&!d)return i||(i=new J),l||cu(t)?lo(t,e,n,r,o,i):function(t,e,n,r,o,i,s){var a,u,c,l;switch(n){case xe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case be:return!(t.byteLength!=e.byteLength||!i(new fs(t),new fs(e)));case ne:case re:case ce:return ii(+t,+e);case ie:return t.name==e.name&&t.message==e.message;case de:case ye:return t==e+"";case ue:a=L;case ge:return u=r&At,a||(a=D),t.size==e.size||u?(c=s.get(t))?c==e:(r|=Pt,s.set(t,e),l=lo(a(t),a(e),r,o,i,s),s.delete(t),l):!1;case ve:if(Xs)return Xs.call(t)==Xs.call(e)}return!1}(t,e,h,n,r,o,i);if(!(n&At)&&(s=d&&ns.call(t,"__wrapped__"),a=g&&ns.call(e,"__wrapped__"),s||a))return u=s?t.value():t,c=a?e.value():e,i||(i=new J),o(u,c,n,r,i);return!!y&&(i||(i=new J),function(t,e,n,r,o,i){var s,a,u,c,l,f,h,p,d,g,y,v=n&At,w=ho(t),m=w.length,_=ho(e),b=_.length;if(m!=b&&!v)return!1;for(s=m;s--;)if(a=w[s],!(v?a in e:ns.call(e,a)))return!1;u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;l=!0;i.set(t,e),i.set(e,t);for(f=v;++s<m;){if(h=t[a=w[s]],p=e[a],r&&(d=v?r(p,h,a,e,t,i):r(h,p,a,t,e,i)),!(d===B?h===p||o(h,p,n,r,i):d)){l=!1;break}f||(f="constructor"==a)}l&&!f&&(g=t.constructor)!=(y=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(l=!1);return i.delete(t),i.delete(e),l}(t,e,n,r,o,i))}(t,e,n,r,Wn,o))}function Nn(t,e,n,r){var o,i,s,a,u,c,l=n.length,f=l,h=!r;if(null==t)return!f;for(t=qi(t);l--;)if(o=n[l],h&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1;for(;++l<f;)if(s=t[i=(o=n[l])[0]],a=o[1],h&&o[2]){if(s===B&&!(i in t))return!1}else if(u=new J,r&&(c=r(s,a,i,t,e,u)),!(c===B?Wn(a,s,At|Pt,r,u):c))return!1;return!0}function Bn(t){return!(!hi(t)||function(t){return!!os&&os in t}(t))&&(ci(t)?us:sn).test(Uo(t))}function $n(t){return"function"==typeof t?t:null==t?zi:"object"==typeof t?nu(t)?Kn(t[0],t[1]):qn(t):Wi(t)}function Fn(t){var e,n;if(!Oo(t))return Es(t);for(n in e=[],qi(t))ns.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Hn(t){var e,n,r;if(!hi(t))return function(t){var e,n=[];if(null!=t)for(e in qi(t))n.push(e);return n}(t);for(r in e=Oo(t),n=[],t)"constructor"==r&&(e||!ns.call(t,r))||n.push(r);return n}function Gn(t,e){return t<e}function Vn(t,e){var n=-1,r=si(t)?$i(t.length):[];return ta(t,(function(t,o,i){r[++n]=e(t,o,i)})),r}function qn(t){var e=mo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Nn(n,t,e)}}function Kn(t,e){return Ao(t)&&So(e)?Eo(Do(t),e):function(n){var r=ki(n,t);return r===B&&r===e?Ai(n,t):Wn(e,r,At|Pt)}}function Yn(t,e,n,r,o){t!==e&&na(e,(function(i,s){if(o||(o=new J),hi(i))!function(t,e,n,r,o,i,s){var a,u,c,l,f,h=Io(t,n),p=Io(e,n),d=s.get(p);if(d)return void Ke(t,n,d);a=i?i(h,p,n+"",t,e,s):B,u=a===B;u&&(l=!(c=nu(p))&&ou(p),f=!c&&!l&&cu(p),a=p,c||l||f?nu(h)?a=h:ai(h)?a=Wr(h):l?(u=!1,a=Ir(p,!0)):f?(u=!1,a=zr(p,!0)):a=[]:gi(p)||eu(p)?(a=h,eu(h)?a=Ci(h):(!hi(h)||ci(h))&&(a=xo(p))):u=!1);u&&(s.set(p,a),o(a,p,r,i,s),s.delete(p)),Ke(t,n,a)}(t,e,s,n,Yn,r,o);else{var a=r?r(Io(t,s),i,s+"",t,e,o):B;a===B&&(a=i),Ke(t,s,a)}}),Oi)}function Zn(t,e){var n=t.length;if(n)return jo(e+=e<0?n:0,n)?t[e]:B}function Xn(t,e,n){var r;return e=e.length?l(e,(function(t){return nu(t)?function(e){return En(e,1===t.length?t[0]:t)}:t})):[zi],r=-1,e=l(e,P(vo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Vn(t,(function(t,n,o){return{criteria:l(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r,o,i,s,a,u;for(r=-1,o=t.criteria,i=e.criteria,s=o.length,a=n.length;++r<s;)if(u=Rr(o[r],i[r]))return r>=a?u:u*("desc"==n[r]?-1:1);return t.index-e.index}(t,e,n)}))}function Qn(t,e,n){var r,o,i,s,a;for(r=-1,o=e.length,i={};++r<o;)n(a=En(t,s=e[r]),s)&&pr(i,Mr(s,t),a);return i}function er(t,e,n,r){var o,i,s,a=r?w:v,u=-1,c=e.length,f=t;for(t===e&&(e=Wr(e)),n&&(f=l(t,P(n)));++u<c;)for(o=0,i=e[u],s=n?n(i):i;(o=a(f,s,o,r))>-1;)f!==t&&ys.call(f,o,1),ys.call(t,o,1);return t}function rr(t,e){var n,r,o,i;for(r=(n=t?e.length:0)-1;n--;)o=e[n],n!=r&&o===i||(i=o,jo(o)?ys.call(t,o,1):Cr(t,o));return t}function ur(t,e){return t+ks(zs()*(e-t+1))}function cr(t,e){var n="";if(!t||e<1||e>Vt)return n;do{e%2&&(n+=t),(e=ks(e/2))&&(t+=t)}while(e);return n}function lr(t,e){return ya(Mo(t,e,zi),t+"")}function fr(t){return nt(Ei(t))}function hr(t,e){var n=Ei(t);return Ro(n,wn(e,0,n.length))}function pr(t,e,n,r){var o,i,s,a,u,c,l;if(!hi(t))return t;for(o=-1,s=(i=(e=Mr(e,t)).length)-1,a=t;null!=a&&++o<i;){if(c=n,"__proto__"===(u=Do(e[o]))||"constructor"===u||"prototype"===u)return t;o!=s&&(l=a[u],(c=r?r(l,u,a):B)===B&&(c=hi(l)?l:jo(e[o+1])?[]:{})),hn(a,u,c),a=a[u]}return t}function dr(t){return Ro(Ei(t))}function gr(t,e,n){var r,o=-1,i=t.length;for(e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,r=$i(i);++o<i;)r[o]=t[o+e];return r}function yr(t,e){var n;return ta(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function vr(t,e,n){var r,o,i=0,s=null==t?i:t.length;if("number"==typeof e&&e==e&&s<=Xt){for(;i<s;)null!==(o=t[r=i+s>>>1])&&!vi(o)&&(n?o<=e:o<e)?i=r+1:s=r;return s}return wr(t,e,zi,n)}function wr(t,e,n,r){var o,i,s,a,u,c,l,f,h,p,d=0,g=null==t?0:t.length;if(0===g)return 0;for(o=(e=n(e))!=e,i=null===e,s=vi(e),a=e===B;d<g;)l=(c=n(t[u=ks((d+g)/2)]))!==B,f=null===c,h=c==c,p=vi(c),(o?r||h:a?h&&(r||l):i?h&&l&&(r||!f):s?h&&l&&!f&&(r||!p):!f&&!p&&(r?c<=e:c<e))?d=u+1:g=u;return Ts(g,Zt)}function mr(t,e){var n,r,o,i,s,a,u;for(n=-1,r=t.length,o=0,i=[];++n<r;)s=t[n],a=e?e(s):s,n&&ii(a,u)||(u=a,i[o++]=0===s?0:s);return i}function _r(t){return"number"==typeof t?t:vi(t)?Kt:+t}function br(t){if("string"==typeof t)return t;if(nu(t))return l(t,br)+"";if(vi(t))return Qs?Qs.call(t):"";var e=t+"";return"0"==e&&1/t==-Gt?"-0":e}function xr(t,e,n){var r,o,i,s,a=-1,l=u,f=t.length,h=!0,p=[],d=p;if(n)h=!1,l=c;else if(f>=yt){if(r=e?null:ua(t))return D(r);h=!1,l=S,d=new Q}else d=e?[]:p;t:for(;++a<f;)if(o=t[a],i=e?e(o):o,o=n||0!==o?o:0,h&&i==i){for(s=d.length;s--;)if(d[s]===i)continue t;e&&d.push(i),p.push(o)}else l(d,i,n)||(d!==p&&d.push(i),p.push(o));return p}function Cr(t,e){return null==(t=To(t,e=Mr(e,t)))||delete t[Do(Ho(e))]}function jr(t,e,n,r){return pr(t,e,n(En(t,e)),r)}function kr(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?gr(t,r?0:i,r?i+1:o):gr(t,r?i+1:0,r?o:i)}function Ar(t,e){var n=t;return n instanceof G&&(n=n.value()),h(e,(function(t,e){return e.func.apply(e.thisArg,f([t],e.args))}),n)}function Pr(t,e,n){var r,o,i,s,a=t.length;if(a<2)return a?xr(t[0]):[];for(r=-1,o=$i(a);++r<a;)for(i=t[r],s=-1;++s<a;)s!=r&&(o[r]=xn(o[r]||i,t[s],e,n));return xr(An(o,1),e,n)}function Or(t,e,n){var r,o,i,s,a;for(r=-1,o=t.length,i=e.length,s={};++r<o;)a=r<i?e[r]:B,n(s,t[r],a);return s}function Sr(t){return ai(t)?t:[]}function Er(t){return"function"==typeof t?t:zi}function Mr(t,e){return nu(t)?t:Ao(t,e)?[t]:va(ji(t))}function Tr(t,e,n){var r=t.length;return n=n===B?r:n,!e&&n>=r?t:gr(t,e,n)}function Ir(t,e){if(e)return t.slice();var n=t.length,r=hs?hs(n):new t.constructor(n);return t.copy(r),r}function Lr(t){var e=new t.constructor(t.byteLength);return new fs(e).set(new fs(t)),e}function zr(t,e){var n=e?Lr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Rr(t,e){if(t!==e){var n=t!==B,r=null===t,o=t==t,i=vi(t),s=e!==B,a=null===e,u=e==e,c=vi(e);if(!a&&!c&&!i&&t>e||i&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&t<e||c&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!u)return-1}return 0}function Dr(t,e,n,r){for(var o=-1,i=t.length,s=n.length,a=-1,u=e.length,c=Ms(i-s,0),l=$i(u+c),f=!r;++a<u;)l[a]=e[a];for(;++o<s;)(f||o<i)&&(l[n[o]]=t[o]);for(;c--;)l[a++]=t[o++];return l}function Ur(t,e,n,r){var o,i,s,a,u,c,l,f,h,p;for(o=-1,i=t.length,s=-1,a=n.length,u=-1,c=e.length,l=Ms(i-a,0),f=$i(l+c),h=!r;++o<l;)f[o]=t[o];for(p=o;++u<c;)f[p+u]=e[u];for(;++s<a;)(h||o<i)&&(f[p+n[s]]=t[o++]);return f}function Wr(t,e){var n=-1,r=t.length;for(e||(e=$i(r));++n<r;)e[n]=t[n];return e}function Nr(t,e,n,r){var o,i,s,a,u=!n;for(n||(n={}),o=-1,i=e.length;++o<i;)s=e[o],(a=r?r(n[s],t[s],s,n,t):B)===B&&(a=t[s]),u?yn(n,s,a):hn(n,s,a);return n}function Br(t,e){return function(n,o){var i=nu(n)?r:dn,s=e?e():{};return i(n,t,vo(o,2),s)}}function $r(t){return lr((function(e,n){var r,o=-1,i=n.length,s=i>1?n[i-1]:B,a=i>2?n[2]:B;for(s=t.length>3&&"function"==typeof s?(i--,s):B,a&&ko(n[0],n[1],a)&&(s=i<3?B:s,i=1),e=qi(e);++o<i;)(r=n[o])&&t(e,r,o,s);return e}))}function Fr(t,e){return function(n,r){if(null==n)return n;if(!si(n))return t(n,r);for(var o=n.length,i=e?o:-1,s=qi(n);(e?i--:++i<o)&&!1!==r(s[i],i,s););return n}}function Hr(t){return function(e,n,r){var o,i,s,a,u;for(o=-1,i=qi(e),a=(s=r(e)).length;a--&&!1!==n(i[u=s[t?a:++o]],u,i););return e}}function Gr(t){return function(e){var n=I(e=ji(e))?W(e):B,r=n?n[0]:e.charAt(0),o=n?Tr(n,1).join(""):e.slice(1);return r[t]()+o}}function Vr(t){return function(e){return h(Ii(Ti(e).replace(Jn,"")),t,"")}}function qr(t){return function(){var e,n,r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}return e=Js(t.prototype),hi(n=t.apply(e,r))?n:e}}function Kr(t){return function(e,n,r){var o,i,s=qi(e);return si(e)||(o=vo(n,3),e=Pi(e),n=function(t){return o(s[t],t,s)}),(i=t(e,n,r))>-1?s[o?e[i]:i]:B}}function Yr(t){return fo((function(e){var n,r,o,i,s=e.length,a=s,u=H.prototype.thru;for(t&&e.reverse();a--;){if("function"!=typeof(n=e[a]))throw new Zi(wt);u&&!r&&"wrapper"==go(n)&&(r=new H([],!0))}for(a=r?a:s;++a<s;)i="wrapper"==(o=go(n=e[a]))?ca(n):B,r=i&&Po(i[0])&&i[1]==(zt|Mt|It|Rt)&&!i[4].length&&1==i[9]?r[go(i[0])].apply(r,i[3]):1==n.length&&Po(n)?r[o]():r.thru(n);return function(){var t,n,o=arguments,i=o[0];if(r&&1==o.length&&nu(i))return r.plant(i).value();for(t=0,n=s?e[t].apply(this,o):i;++t<s;)n=e[t].call(this,n);return n}}))}function Zr(t,e,n,r,o,i,s,a,u,c){var l=e&zt,f=e&Ot,h=e&St,p=e&(Mt|Tt),d=e&Dt,g=h?B:qr(t);return function y(){var v,w,m,_,b,x,C,j;for(w=$i(v=arguments.length),m=v;m--;)w[m]=arguments[m];return p&&(b=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,_=yo(y))),r&&(w=Dr(w,r,o,p)),i&&(w=Ur(w,i,s,p)),v-=b,p&&v<c?(x=R(w,_),ro(t,e,Zr,y.placeholder,n,w,x,a,u,c-v)):(C=f?n:this,j=h?C[t]:t,v=w.length,a?w=function(t,e){var n,r,o,i;for(n=t.length,r=Ts(e.length,n),o=Wr(t);r--;)i=e[r],t[r]=jo(i,n)?o[i]:B;return t}(w,a):d&&v>1&&w.reverse(),l&&u<v&&(w.length=u),this&&this!==X&&this instanceof y&&(j=g||qr(j)),j.apply(C,w))}}function Xr(t,e){return function(n,r){return function(t,e,n,r){return Pn(t,(function(t,o,i){e(r,n(t),o,i)})),r}(n,t,e(r),{})}}function Qr(t,e){return function(n,r){var o;if(n===B&&r===B)return e;if(n!==B&&(o=n),r!==B){if(o===B)return r;"string"==typeof n||"string"==typeof r?(n=br(n),r=br(r)):(n=_r(n),r=_r(r)),o=t(n,r)}return o}}function Jr(t){return fo((function(e){return e=l(e,P(vo())),lr((function(r){var o=this;return t(e,(function(t){return n(t,o,r)}))}))}))}function to(t,e){var n,r;return(n=(e=e===B?" ":br(e)).length)<2?n?cr(e,t):e:(r=cr(e,js(t/U(e))),I(e)?Tr(W(r),0,t).join(""):r.slice(0,t))}function eo(t){return function(e,n,r){return r&&"number"!=typeof r&&ko(e,n,r)&&(n=r=B),e=mi(e),n===B?(n=e,e=0):n=mi(n),function(t,e,n,r){for(var o=-1,i=Ms(js((e-t)/(n||1)),0),s=$i(i);i--;)s[r?i:++o]=t,t+=n;return s}(e,n,r=r===B?e<n?1:-1:mi(r),t)}}function no(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=xi(e),n=xi(n)),t(e,n)}}function ro(t,e,n,r,o,i,s,a,u,c){var l,f,h=e&Mt,p=h?s:B,d=h?B:s,g=h?i:B,y=h?B:i;return e|=h?It:Lt,(e&=~(h?Lt:It))&Et||(e&=~(Ot|St)),l=[t,e,o,g,p,y,d,a,u,c],f=n.apply(B,l),Po(t)&&da(f,l),f.placeholder=r,Lo(f,t,e)}function oo(t){var e=Vi[t];return function(t,n){if(t=xi(t),(n=null==n?0:Ts(_i(n),292))&&Os(t)){var r=(ji(t)+"e").split("e");return+((r=(ji(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}function io(t){return function(e){var n=ha(e);return n==ue?L(e):n==ge?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return l(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function so(t,e,r,o,i,s,a,u){var c,l,f,h,p,d,g=e&St;if(!g&&"function"!=typeof t)throw new Zi(wt);return(c=o?o.length:0)||(e&=~(It|Lt),o=i=B),a=a===B?a:Ms(_i(a),0),u=u===B?u:_i(u),c-=i?i.length:0,e&Lt&&(l=o,f=i,o=i=B),p=[t,e,r,o,i,l,f,s,a,u],(h=g?B:ca(t))&&function(t,e){var n,r,o=t[1],i=e[1],s=o|i,a=s<(Ot|St|zt),u=i==zt&&o==Mt||i==zt&&o==Rt&&t[7].length<=e[8]||i==(zt|Rt)&&e[7].length<=e[8]&&o==Mt;if(!a&&!u)return t;i&Ot&&(t[2]=e[2],s|=o&Ot?0:Et);n=e[3];n&&(r=t[3],t[3]=r?Dr(r,n,e[4]):n,t[4]=r?R(t[3],xt):e[4]);n=e[5],n&&(r=t[5],t[5]=r?Ur(r,n,e[6]):n,t[6]=r?R(t[5],xt):e[6]),n=e[7],n&&(t[7]=n),i&zt&&(t[8]=null==t[8]?e[8]:Ts(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=s}(p,h),t=p[0],e=p[1],r=p[2],o=p[3],i=p[4],!(u=p[9]=p[9]===B?g?0:t.length:Ms(p[9]-c,0))&&e&(Mt|Tt)&&(e&=~(Mt|Tt)),d=e&&e!=Ot?e==Mt||e==Tt?function(t,e,r){var o=qr(t);return function i(){var s,a,u,c,l;for(a=$i(s=arguments.length),u=s,c=yo(i);u--;)a[u]=arguments[u];return(s-=(l=s<3&&a[0]!==c&&a[s-1]!==c?[]:R(a,c)).length)<r?ro(t,e,Zr,i.placeholder,B,a,l,B,B,r-s):n(this&&this!==X&&this instanceof i?o:t,this,a)}}(t,e,u):e!=It&&e!=(Ot|It)||i.length?Zr.apply(B,p):function(t,e,r,o){var i=e&Ot,s=qr(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=o.length,f=$i(l+u),h=this&&this!==X&&this instanceof e?s:t;++c<l;)f[c]=o[c];for(;u--;)f[c++]=arguments[++a];return n(h,i?r:this,f)}}(t,e,r,o):function(t,e,n){var r=e&Ot,o=qr(t);return function e(){return(this&&this!==X&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,r),Lo((h?oa:da)(d,p),t,e)}function ao(t,e,n,r){return t===B||ii(t,Ji[n])&&!ns.call(r,n)?e:t}function uo(t,e,n,r,o,i){return hi(t)&&hi(e)&&(i.set(e,t),Yn(t,e,B,uo,i),i.delete(e)),t}function co(t){return gi(t)?B:t}function lo(t,e,n,r,o,i){var s,a,u,c,l,f,h,p,g=n&At,y=t.length,v=e.length;if(y!=v&&!(g&&v>y))return!1;if(s=i.get(t),a=i.get(e),s&&a)return s==e&&a==t;for(u=-1,c=!0,l=n&Pt?new Q:B,i.set(t,e),i.set(e,t);++u<y;){if(f=t[u],h=e[u],r&&(p=g?r(h,f,u,e,t,i):r(f,h,u,t,e,i)),p!==B){if(p)continue;c=!1;break}if(l){if(!d(e,(function(t,e){if(!S(l,e)&&(f===t||o(f,t,n,r,i)))return l.push(e)}))){c=!1;break}}else if(f!==h&&!o(f,h,n,r,i)){c=!1;break}}return i.delete(t),i.delete(e),c}function fo(t){return ya(Mo(t,B,$o),t+"")}function ho(t){return Mn(t,Pi,la)}function po(t){return Mn(t,Oi,fa)}function go(t){var e,n,r,o,i;for(e=t.name+"",n=Hs[e],r=ns.call(Hs,e)?n.length:0;r--;)if(null==(i=(o=n[r]).func)||i==t)return o.name;return e}function yo(t){return(ns.call(x,"placeholder")?x:t).placeholder}function vo(){var t=x.iteratee||Ri;return t=t===Ri?$n:t,arguments.length?t(arguments[0],arguments[1]):t}function wo(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function mo(t){var e,n,r,o;for(n=(e=Pi(t)).length;n--;)o=t[r=e[n]],e[n]=[r,o,So(o)];return e}function _o(t,e){var n=function(t,e){return null==t?B:t[e]}(t,e);return Bn(n)?n:B}function bo(t,e,n){var r,o,i,s;for(r=-1,o=(e=Mr(e,t)).length,i=!1;++r<o&&(s=Do(e[r]),i=null!=t&&n(t,s));)t=t[s];return i||++r!=o?i:!!(o=null==t?0:t.length)&&fi(o)&&jo(s,o)&&(nu(t)||eu(t))}function xo(t){return"function"!=typeof t.constructor||Oo(t)?{}:Js(ps(t))}function Co(t){return nu(t)||eu(t)||!!(vs&&t&&t[vs])}function jo(t,e){var n=typeof t;return!!(e=e??Vt)&&("number"==n||"symbol"!=n&&un.test(t))&&t>-1&&t%1==0&&t<e}function ko(t,e,n){if(!hi(n))return!1;var r=typeof e;return!!("number"==r?si(n)&&jo(e,n.length):"string"==r&&e in n)&&ii(n[e],t)}function Ao(t,e){if(nu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!vi(t))||(Fe.test(t)||!$e.test(t)||null!=e&&t in qi(e))}function Po(t){var e,n=go(t),r=x[n];return"function"==typeof r&&n in G.prototype&&(t===r||!!(e=ca(r))&&t===e[0])}function Oo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ji)}function So(t){return t==t&&!hi(t)}function Eo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==B||t in qi(n)))}}function Mo(t,e,r){return e=Ms(e===B?t.length-1:e,0),function(){var o,i,s,a,u;for(i=-1,s=Ms((o=arguments).length-e,0),a=$i(s);++i<s;)a[i]=o[e+i];for(i=-1,u=$i(e+1);++i<e;)u[i]=o[i];return u[e]=r(a),n(t,this,u)}}function To(t,e){return e.length<2?t:En(t,gr(e,0,-1))}function Io(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Lo(t,e,n){var r=e+"";return ya(t,function(t,e){var n,r=e.length;return r?(e[n=r-1]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ye,"{\n/* [wrapped with "+e+"] */\n")):t}(r,function(t,e){return o(Qt,(function(n){var r="_."+n[0];e&n[1]&&!u(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Ze);return e?e[1].split(Xe):[]}(r),n)))}function zo(t){var e=0,n=0;return function(){var r=Is(),o=Bt-(r-n);if(n=r,o>0){if(++e>=Nt)return arguments[0]}else e=0;return t.apply(B,arguments)}}function Ro(t,e){var n,r,o=-1,i=t.length,s=i-1;for(e=e===B?i:e;++o<e;)r=t[n=ur(o,s)],t[n]=t[o],t[o]=r;return t.length=e,t}function Do(t){if("string"==typeof t||vi(t))return t;var e=t+"";return"0"==e&&1/t==-Gt?"-0":e}function Uo(t){if(null!=t){try{return es.call(t)}catch{}try{return t+""}catch{}}return""}function Wo(t){if(t instanceof G)return t.clone();var e=new H(t.__wrapped__,t.__chain__);return e.__actions__=Wr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function No(t,e,n){var r,o=null==t?0:t.length;return o?((r=null==n?0:_i(n))<0&&(r=Ms(o+r,0)),y(t,vo(e,3),r)):-1}function Bo(t,e,n){var r,o=null==t?0:t.length;return o?(r=o-1,n!==B&&(r=_i(n),r=n<0?Ms(o+r,0):Ts(r,o-1)),y(t,vo(e,3),r,!0)):-1}function $o(t){return(null==t?0:t.length)?An(t,1):[]}function Fo(t){return t&&t.length?t[0]:B}function Ho(t){var e=null==t?0:t.length;return e?t[e-1]:B}function Go(t,e){return t&&t.length&&e&&e.length?er(t,e):t}function Vo(t){return null==t?t:Rs.call(t)}function qo(t){if(!t||!t.length)return[];var e=0;return t=a(t,(function(t){if(ai(t))return e=Ms(t.length,e),!0})),k(e,(function(e){return l(t,b(e))}))}function Ko(t,e){if(!t||!t.length)return[];var r=qo(t);return null==e?r:l(r,(function(t){return n(e,B,t)}))}function Yo(t){var e=x(t);return e.__chain__=!0,e}function Zo(t,e){return e(t)}function Xo(t,e){return(nu(t)?o:ta)(t,vo(e,3))}function Qo(t,e){return(nu(t)?i:ea)(t,vo(e,3))}function Jo(t,e){return(nu(t)?l:Vn)(t,vo(e,3))}function ti(t,e,n){return e=n?B:e,e=t&&null==e?t.length:e,so(t,zt,B,B,B,B,e)}function ei(t,e){var n;if("function"!=typeof e)throw new Zi(wt);return t=_i(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=B),n}}function ni(t,e,n){function r(e){var n=u,r=c;return u=c=B,d=e,f=t.apply(r,n)}function o(t){var n=t-p;return p===B||n>=e||n<0||y&&t-d>=l}function i(){var t=Ha();if(o(t))return s(t);h=ga(i,function(t){var n=e-(t-p);return y?Ts(n,l-(t-d)):n}(t))}function s(t){return h=B,v&&u?r(t):(u=c=B,f)}function a(){var t=Ha(),n=o(t);if(u=arguments,c=this,p=t,n){if(h===B)return function(t){return d=t,h=ga(i,e),g?r(t):f}(p);if(y)return aa(h),h=ga(i,e),r(p)}return h===B&&(h=ga(i,e)),f}var u,c,l,f,h,p,d=0,g=!1,y=!1,v=!0;if("function"!=typeof t)throw new Zi(wt);return e=xi(e)||0,hi(n)&&(g=!!n.leading,l=(y="maxWait"in n)?Ms(xi(n.maxWait)||0,e):l,v="trailing"in n?!!n.trailing:v),a.cancel=function(){h!==B&&aa(h),d=0,u=p=c=h=B},a.flush=function(){return h===B?f:s(Ha())},a}function ri(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Zi(wt);var n=function(){var r,o=arguments,i=e?e.apply(this,o):o[0],s=n.cache;return s.has(i)?s.get(i):(r=t.apply(this,o),n.cache=s.set(i,r)||s,r)};return n.cache=new(ri.Cache||Z),n}function oi(t){if("function"!=typeof t)throw new Zi(wt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ii(t,e){return t===e||t!=t&&e!=e}function si(t){return null!=t&&fi(t.length)&&!ci(t)}function ai(t){return pi(t)&&si(t)}function ui(t){if(!pi(t))return!1;var e=Tn(t);return e==ie||e==oe||"string"==typeof t.message&&"string"==typeof t.name&&!gi(t)}function ci(t){if(!hi(t))return!1;var e=Tn(t);return e==se||e==ae||e==ee||e==pe}function li(t){return"number"==typeof t&&t==_i(t)}function fi(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Vt}function hi(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function pi(t){return null!=t&&"object"==typeof t}function di(t){return"number"==typeof t||pi(t)&&Tn(t)==ce}function gi(t){var e,n;return!(!pi(t)||Tn(t)!=fe)&&(null===(e=ps(t))||"function"==typeof(n=ns.call(e,"constructor")&&e.constructor)&&n instanceof n&&es.call(n)==ss)}function yi(t){return"string"==typeof t||!nu(t)&&pi(t)&&Tn(t)==ye}function vi(t){return"symbol"==typeof t||pi(t)&&Tn(t)==ve}function wi(t){if(!t)return[];if(si(t))return yi(t)?W(t):Wr(t);if(ws&&t[ws])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ws]());var e=ha(t);return(e==ue?L:e==ge?D:Ei)(t)}function mi(t){return t?(t=xi(t))===Gt||t===-Gt?(t<0?-1:1)*qt:t==t?t:0:0===t?t:0}function _i(t){var e=mi(t),n=e%1;return e==e?n?e-n:e:0}function bi(t){return t?wn(_i(t),0,Yt):0}function xi(t){var e,n;return"number"==typeof t?t:vi(t)?Kt:(hi(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=hi(e)?e+"":e),"string"!=typeof t?0===t?t:+t:(t=A(t),(n=on.test(t))||an.test(t)?K(t.slice(2),n?2:8):rn.test(t)?Kt:+t))}function Ci(t){return Nr(t,Oi(t))}function ji(t){return null==t?"":br(t)}function ki(t,e,n){var r=null==t?B:En(t,e);return r===B?n:r}function Ai(t,e){return null!=t&&bo(t,e,zn)}function Pi(t){return si(t)?et(t):Fn(t)}function Oi(t){return si(t)?et(t,!0):Hn(t)}function Si(t,e){if(null==t)return{};var n=l(po(t),(function(t){return[t]}));return e=vo(e),Qn(t,n,(function(t,n){return e(t,n[0])}))}function Ei(t){return null==t?[]:O(t,Pi(t))}function Mi(t){return zu(ji(t).toLowerCase())}function Ti(t){return(t=ji(t))&&t.replace(cn,lt).replace(tr,"")}function Ii(t,e,n){return t=ji(t),(e=n?B:e)===B?function(t){return or.test(t)}(t)?function(t){return t.match(nr)||[]}(t):function(t){return t.match(Qe)||[]}(t):t.match(e)||[]}function Li(t){return function(){return t}}function zi(t){return t}function Ri(t){return $n("function"==typeof t?t:mn(t,Ct))}function Di(t,e,n){var r,i,s=Pi(e),a=Sn(e,s);return null==n&&(!hi(e)||!a.length&&s.length)&&(n=e,e=t,t=this,a=Sn(e,Pi(e))),r=!(hi(n)&&"chain"in n&&!n.chain),i=ci(t),o(a,(function(n){var o=e[n];t[n]=o,i&&(t.prototype[n]=function(){var e,n=this.__chain__;return r||n?(((e=t(this.__wrapped__)).__actions__=Wr(this.__actions__)).push({func:o,args:arguments,thisArg:t}),e.__chain__=n,e):o.apply(t,f([this.value()],arguments))})})),t}function Ui(){}function Wi(t){return Ao(t)?b(Do(t)):function(t){return function(e){return En(e,t)}}(t)}function Ni(){return[]}function Bi(){return!1}var $i,Fi,Hi,Gi,Vi,qi,Ki,Yi,Zi,Xi,Qi,Ji,ts,es,ns,rs,os,is,ss,as,us,cs,ls,fs,hs,ps,ds,gs,ys,vs,ws,ms,_s,bs,xs,Cs,js,ks,As,Ps,Os,Ss,Es,Ms,Ts,Is,Ls,zs,Rs,Ds,Us,Ws,Ns,Bs,$s,Fs,Hs,Gs,Vs,qs,Ks,Ys,Zs,Xs,Qs,Js,ta,ea,na,ra,oa,ia,sa,aa,ua,ca,la,fa,ha,pa,da,ga,ya,va,wa,ma,_a,ba,xa,Ca,ja,ka,Aa,Pa,Oa,Sa,Ea,Ma,Ta,Ia,La,za,Ra,Da,Ua,Wa,Na,Ba,$a,Fa,Ha,Ga,Va,qa,Ka,Ya,Za,Xa,Qa,Ja,tu,eu,nu,ru,ou,iu,su,au,uu,cu,lu,fu,hu,pu,du,gu,yu,vu,wu,mu,_u,bu,xu,Cu,ju,ku,Au,Pu,Ou,Su,Eu,Mu,Tu,Iu,Lu,zu,Ru,Du,Uu,Wu,Nu,Bu,$u,Fu,Hu,Gu,Vu,qu,Ku,Yu,Zu,Xu,Qu,Ju,tc;return e=null==e?X:dt.defaults(X.Object(),e,dt.pick(X,ir)),$i=e.Array,Fi=e.Date,Hi=e.Error,Gi=e.Function,Vi=e.Math,qi=e.Object,Ki=e.RegExp,Yi=e.String,Zi=e.TypeError,Xi=$i.prototype,Qi=Gi.prototype,Ji=qi.prototype,ts=e["__core-js_shared__"],es=Qi.toString,ns=Ji.hasOwnProperty,rs=0,tc=/[^.]+$/.exec(ts&&ts.keys&&ts.keys.IE_PROTO||""),os=tc?"Symbol(src)_1."+tc:"",is=Ji.toString,ss=es.call(qi),as=X._,us=Ki("^"+es.call(ns).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cs=tt?e.Buffer:B,ls=e.Symbol,fs=e.Uint8Array,hs=cs?cs.allocUnsafe:B,ps=z(qi.getPrototypeOf,qi),ds=qi.create,gs=Ji.propertyIsEnumerable,ys=Xi.splice,vs=ls?ls.isConcatSpreadable:B,ws=ls?ls.iterator:B,ms=ls?ls.toStringTag:B,_s=function(){try{var t=_o(qi,"defineProperty");return t({},"",{}),t}catch{}}(),bs=e.clearTimeout!==X.clearTimeout&&e.clearTimeout,xs=Fi&&Fi.now!==X.Date.now&&Fi.now,Cs=e.setTimeout!==X.setTimeout&&e.setTimeout,js=Vi.ceil,ks=Vi.floor,As=qi.getOwnPropertySymbols,Ps=cs?cs.isBuffer:B,Os=e.isFinite,Ss=Xi.join,Es=z(qi.keys,qi),Ms=Vi.max,Ts=Vi.min,Is=Fi.now,Ls=e.parseInt,zs=Vi.random,Rs=Xi.reverse,Ds=_o(e,"DataView"),Us=_o(e,"Map"),Ws=_o(e,"Promise"),Ns=_o(e,"Set"),Bs=_o(e,"WeakMap"),$s=_o(qi,"create"),Fs=Bs&&new Bs,Hs={},Gs=Uo(Ds),Vs=Uo(Us),qs=Uo(Ws),Ks=Uo(Ns),Ys=Uo(Bs),Zs=ls?ls.prototype:B,Xs=Zs?Zs.valueOf:B,Qs=Zs?Zs.toString:B,Js=function(){function t(){}return function(e){if(!hi(e))return{};if(ds)return ds(e);t.prototype=e;var n=new t;return t.prototype=B,n}}(),x.templateSettings={escape:We,evaluate:Ne,interpolate:Be,variable:"",imports:{_:x}},x.prototype=F.prototype,x.prototype.constructor=x,H.prototype=Js(F.prototype),H.prototype.constructor=H,G.prototype=Js(F.prototype),G.prototype.constructor=G,V.prototype.clear=function(){this.__data__=$s?$s(null):{},this.size=0},V.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},V.prototype.get=function(t){var e,n=this.__data__;return $s?(e=n[t])===_t?B:e:ns.call(n,t)?n[t]:B},V.prototype.has=function(t){var e=this.__data__;return $s?e[t]!==B:ns.call(e,t)},V.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=$s&&e===B?_t:e,this},Y.prototype.clear=function(){this.__data__=[],this.size=0},Y.prototype.delete=function(t){var e=this.__data__,n=pn(e,t);return!(n<0)&&(n==e.length-1?e.pop():ys.call(e,n,1),--this.size,!0)},Y.prototype.get=function(t){var e=this.__data__,n=pn(e,t);return n<0?B:e[n][1]},Y.prototype.has=function(t){return pn(this.__data__,t)>-1},Y.prototype.set=function(t,e){var n=this.__data__,r=pn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(Us||Y),string:new V}},Z.prototype.delete=function(t){var e=wo(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return wo(this,t).get(t)},Z.prototype.has=function(t){return wo(this,t).has(t)},Z.prototype.set=function(t,e){var n=wo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Q.prototype.add=Q.prototype.push=function(t){return this.__data__.set(t,_t),this},Q.prototype.has=function(t){return this.__data__.has(t)},J.prototype.clear=function(){this.__data__=new Y,this.size=0},J.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},J.prototype.get=function(t){return this.__data__.get(t)},J.prototype.has=function(t){return this.__data__.has(t)},J.prototype.set=function(t,e){var n,r=this.__data__;if(r instanceof Y){if(n=r.__data__,!Us||n.length<yt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this},ta=Fr(Pn),ea=Fr(On,!0),na=Hr(),ra=Hr(!0),oa=Fs?function(t,e){return Fs.set(t,e),t}:zi,ia=_s?function(t,e){return _s(t,"toString",{configurable:!0,enumerable:!1,value:Li(e),writable:!0})}:zi,sa=lr,aa=bs||function(t){return X.clearTimeout(t)},ua=Ns&&1/D(new Ns([,-0]))[1]==Gt?function(t){return new Ns(t)}:Ui,ca=Fs?function(t){return Fs.get(t)}:Ui,la=As?function(t){return null==t?[]:(t=qi(t),a(As(t),(function(e){return gs.call(t,e)})))}:Ni,fa=As?function(t){for(var e=[];t;)f(e,la(t)),t=ps(t);return e}:Ni,ha=Tn,(Ds&&ha(new Ds(new ArrayBuffer(1)))!=xe||Us&&ha(new Us)!=ue||Ws&&ha(Ws.resolve())!=he||Ns&&ha(new Ns)!=ge||Bs&&ha(new Bs)!=me)&&(ha=function(t){var e=Tn(t),n=e==fe?t.constructor:B,r=n?Uo(n):"";if(r)switch(r){case Gs:return xe;case Vs:return ue;case qs:return he;case Ks:return ge;case Ys:return me}return e}),pa=ts?ci:Bi,da=zo(oa),ga=Cs||function(t,e){return X.setTimeout(t,e)},ya=zo(ia),va=function(t){var e=ri(t,(function(t){return n.size===bt&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(He,(function(t,n,r,o){e.push(r?o.replace(tn,"$1"):n||t)})),e})),wa=lr((function(t,e){return ai(t)?xn(t,An(e,1,ai,!0)):[]})),ma=lr((function(t,e){var n=Ho(e);return ai(n)&&(n=B),ai(t)?xn(t,An(e,1,ai,!0),vo(n,2)):[]})),_a=lr((function(t,e){var n=Ho(e);return ai(n)&&(n=B),ai(t)?xn(t,An(e,1,ai,!0),B,n):[]})),ba=lr((function(t){var e=l(t,Sr);return e.length&&e[0]===t[0]?Rn(e):[]})),xa=lr((function(t){var e=Ho(t),n=l(t,Sr);return e===Ho(n)?e=B:n.pop(),n.length&&n[0]===t[0]?Rn(n,vo(e,2)):[]})),Ca=lr((function(t){var e=Ho(t),n=l(t,Sr);return(e="function"==typeof e?e:B)&&n.pop(),n.length&&n[0]===t[0]?Rn(n,B,e):[]})),ja=lr(Go),ka=fo((function(t,e){var n=null==t?0:t.length,r=vn(t,e);return rr(t,l(e,(function(t){return jo(t,n)?+t:t})).sort(Rr)),r})),Aa=lr((function(t){return xr(An(t,1,ai,!0))})),Pa=lr((function(t){var e=Ho(t);return ai(e)&&(e=B),xr(An(t,1,ai,!0),vo(e,2))})),Oa=lr((function(t){var e=Ho(t);return e="function"==typeof e?e:B,xr(An(t,1,ai,!0),B,e)})),Sa=lr((function(t,e){return ai(t)?xn(t,e):[]})),Ea=lr((function(t){return Pr(a(t,ai))})),Ma=lr((function(t){var e=Ho(t);return ai(e)&&(e=B),Pr(a(t,ai),vo(e,2))})),Ta=lr((function(t){var e=Ho(t);return e="function"==typeof e?e:B,Pr(a(t,ai),B,e)})),Ia=lr(qo),La=lr((function(t){var e=t.length,n=e>1?t[e-1]:B;return n="function"==typeof n?(t.pop(),n):B,Ko(t,n)})),za=fo((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return vn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof G&&jo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Zo,args:[o],thisArg:B}),new H(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(B),t}))):this.thru(o)})),Ra=Br((function(t,e,n){ns.call(t,n)?++t[n]:yn(t,n,1)})),Da=Kr(No),Ua=Kr(Bo),Wa=Br((function(t,e,n){ns.call(t,n)?t[n].push(e):yn(t,n,[e])})),Na=lr((function(t,e,r){var o=-1,i="function"==typeof e,s=si(t)?$i(t.length):[];return ta(t,(function(t){s[++o]=i?n(e,t,r):Dn(t,e,r)})),s})),Ba=Br((function(t,e,n){yn(t,n,e)})),$a=Br((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Fa=lr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ko(t,e[0],e[1])?e=[]:n>2&&ko(e[0],e[1],e[2])&&(e=[e[0]]),Xn(t,An(e,1),[])})),Ha=xs||function(){return X.Date.now()},Ga=lr((function(t,e,n){var r,o=Ot;return n.length&&(r=R(n,yo(Ga)),o|=It),so(t,o,e,n,r)})),Va=lr((function(t,e,n){var r,o=Ot|St;return n.length&&(r=R(n,yo(Va)),o|=It),so(e,o,t,n,r)})),qa=lr((function(t,e){return bn(t,1,e)})),Ka=lr((function(t,e,n){return bn(t,xi(e)||0,n)})),ri.Cache=Z,Ya=sa((function(t,e){var r=(e=1==e.length&&nu(e[0])?l(e[0],P(vo())):l(An(e,1),P(vo()))).length;return lr((function(o){for(var i=-1,s=Ts(o.length,r);++i<s;)o[i]=e[i].call(this,o[i]);return n(t,this,o)}))})),Za=lr((function(t,e){var n=R(e,yo(Za));return so(t,It,B,e,n)})),Xa=lr((function(t,e){var n=R(e,yo(Xa));return so(t,Lt,B,e,n)})),Qa=fo((function(t,e){return so(t,Rt,B,B,B,e)})),Ja=no(In),tu=no((function(t,e){return t>=e})),eu=Un(function(){return arguments}())?Un:function(t){return pi(t)&&ns.call(t,"callee")&&!gs.call(t,"callee")},nu=$i.isArray,ru=rt?P(rt):function(t){return pi(t)&&Tn(t)==be},ou=Ps||Bi,iu=ot?P(ot):function(t){return pi(t)&&Tn(t)==re},su=it?P(it):function(t){return pi(t)&&ha(t)==ue},au=st?P(st):function(t){return pi(t)&&Tn(t)==de},uu=at?P(at):function(t){return pi(t)&&ha(t)==ge},cu=ut?P(ut):function(t){return pi(t)&&fi(t.length)&&!!ar[Tn(t)]},lu=no(Gn),fu=no((function(t,e){return t<=e})),hu=$r((function(t,e){if(Oo(e)||si(e))Nr(e,Pi(e),t);else for(var n in e)ns.call(e,n)&&hn(t,n,e[n])})),pu=$r((function(t,e){Nr(e,Oi(e),t)})),du=$r((function(t,e,n,r){Nr(e,Oi(e),t,r)})),gu=$r((function(t,e,n,r){Nr(e,Pi(e),t,r)})),yu=fo(vn),vu=lr((function(t,e){var n,r,o,i,s,a,u,c,l;for(t=qi(t),n=-1,(o=(r=e.length)>2?e[2]:B)&&ko(e[0],e[1],o)&&(r=1);++n<r;)for(a=-1,u=(s=Oi(i=e[n])).length;++a<u;)((l=t[c=s[a]])===B||ii(l,Ji[c])&&!ns.call(t,c))&&(t[c]=i[c]);return t})),wu=lr((function(t){return t.push(B,uo),n(Cu,B,t)})),mu=Xr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=is.call(e)),t[e]=n}),Li(zi)),_u=Xr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=is.call(e)),ns.call(t,e)?t[e].push(n):t[e]=[n]}),vo),bu=lr(Dn),xu=$r((function(t,e,n){Yn(t,e,n)})),Cu=$r((function(t,e,n,r){Yn(t,e,n,r)})),ju=fo((function(t,e){var n,r,o={};if(null==t)return o;for(n=!1,e=l(e,(function(e){return e=Mr(e,t),n||(n=e.length>1),e})),Nr(t,po(t),o),n&&(o=mn(o,Ct|jt|kt,co)),r=e.length;r--;)Cr(o,e[r]);return o})),ku=fo((function(t,e){return null==t?{}:function(t,e){return Qn(t,e,(function(e,n){return Ai(t,n)}))}(t,e)})),Au=io(Pi),Pu=io(Oi),Ou=Vr((function(t,e,n){return e=e.toLowerCase(),t+(n?Mi(e):e)})),Su=Vr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Eu=Vr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Mu=Gr("toLowerCase"),Tu=Vr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Iu=Vr((function(t,e,n){return t+(n?" ":"")+zu(e)})),Lu=Vr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),zu=Gr("toUpperCase"),Ru=lr((function(t,e){try{return n(t,B,e)}catch(t){return ui(t)?t:new Hi(t)}})),Du=fo((function(t,e){return o(e,(function(e){e=Do(e),yn(t,e,Ga(t[e],t))})),t})),Uu=Yr(),Wu=Yr(!0),Nu=lr((function(t,e){return function(n){return Dn(n,t,e)}})),Bu=lr((function(t,e){return function(n){return Dn(t,n,e)}})),$u=Jr(l),Fu=Jr(s),Hu=Jr(d),Gu=eo(),Vu=eo(!0),qu=Qr((function(t,e){return t+e}),0),Ku=oo("ceil"),Yu=Qr((function(t,e){return t/e}),1),Zu=oo("floor"),Xu=Qr((function(t,e){return t*e}),1),Qu=oo("round"),Ju=Qr((function(t,e){return t-e}),0),x.after=function(t,e){if("function"!=typeof e)throw new Zi(wt);return t=_i(t),function(){if(--t<1)return e.apply(this,arguments)}},x.ary=ti,x.assign=hu,x.assignIn=pu,x.assignInWith=du,x.assignWith=gu,x.at=yu,x.before=ei,x.bind=Ga,x.bindAll=Du,x.bindKey=Va,x.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return nu(t)?t:[t]},x.chain=Yo,x.chunk=function(t,e,n){var r,o,i,s;if(e=(n?ko(t,e,n):e===B)?1:Ms(_i(e),0),!(r=null==t?0:t.length)||e<1)return[];for(o=0,i=0,s=$i(js(r/e));o<r;)s[i++]=gr(t,o,o+=e);return s},x.compact=function(t){var e,n,r,o,i;for(e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;)(i=t[e])&&(o[r++]=i);return o},x.concat=function(){var t,e,n,r=arguments.length;if(!r)return[];for(t=$i(r-1),e=arguments[0],n=r;n--;)t[n-1]=arguments[n];return f(nu(e)?Wr(e):[e],An(t,1))},x.cond=function(t){var e=null==t?0:t.length,r=vo();return t=e?l(t,(function(t){if("function"!=typeof t[1])throw new Zi(wt);return[r(t[0]),t[1]]})):[],lr((function(r){var o,i;for(o=-1;++o<e;)if(n((i=t[o])[0],this,r))return n(i[1],this,r)}))},x.conforms=function(t){return function(t){var e=Pi(t);return function(n){return _n(n,t,e)}}(mn(t,Ct))},x.constant=Li,x.countBy=Ra,x.create=function(t,e){var n=Js(t);return null==e?n:gn(n,e)},x.curry=function t(e,n,r){var o=so(e,Mt,B,B,B,B,B,n=r?B:n);return o.placeholder=t.placeholder,o},x.curryRight=function t(e,n,r){var o=so(e,Tt,B,B,B,B,B,n=r?B:n);return o.placeholder=t.placeholder,o},x.debounce=ni,x.defaults=vu,x.defaultsDeep=wu,x.defer=qa,x.delay=Ka,x.difference=wa,x.differenceBy=ma,x.differenceWith=_a,x.drop=function(t,e,n){var r=null==t?0:t.length;return r?gr(t,(e=n||e===B?1:_i(e))<0?0:e,r):[]},x.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?gr(t,0,(e=r-(e=n||e===B?1:_i(e)))<0?0:e):[]},x.dropRightWhile=function(t,e){return t&&t.length?kr(t,vo(e,3),!0,!0):[]},x.dropWhile=function(t,e){return t&&t.length?kr(t,vo(e,3),!0):[]},x.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&ko(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=_i(n))<0&&(n=-n>o?0:o+n),(r=r===B||r>o?o:_i(r))<0&&(r+=o),r=n>r?0:bi(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},x.filter=function(t,e){return(nu(t)?a:kn)(t,vo(e,3))},x.flatMap=function(t,e){return An(Jo(t,e),1)},x.flatMapDeep=function(t,e){return An(Jo(t,e),Gt)},x.flatMapDepth=function(t,e,n){return n=n===B?1:_i(n),An(Jo(t,e),n)},x.flatten=$o,x.flattenDeep=function(t){return(null==t?0:t.length)?An(t,Gt):[]},x.flattenDepth=function(t,e){return(null==t?0:t.length)?An(t,e=e===B?1:_i(e)):[]},x.flip=function(t){return so(t,Dt)},x.flow=Uu,x.flowRight=Wu,x.fromPairs=function(t){var e,n,r,o;for(e=-1,n=null==t?0:t.length,r={};++e<n;)r[(o=t[e])[0]]=o[1];return r},x.functions=function(t){return null==t?[]:Sn(t,Pi(t))},x.functionsIn=function(t){return null==t?[]:Sn(t,Oi(t))},x.groupBy=Wa,x.initial=function(t){return(null==t?0:t.length)?gr(t,0,-1):[]},x.intersection=ba,x.intersectionBy=xa,x.intersectionWith=Ca,x.invert=mu,x.invertBy=_u,x.invokeMap=Na,x.iteratee=Ri,x.keyBy=Ba,x.keys=Pi,x.keysIn=Oi,x.map=Jo,x.mapKeys=function(t,e){var n={};return e=vo(e,3),Pn(t,(function(t,r,o){yn(n,e(t,r,o),t)})),n},x.mapValues=function(t,e){var n={};return e=vo(e,3),Pn(t,(function(t,r,o){yn(n,r,e(t,r,o))})),n},x.matches=function(t){return qn(mn(t,Ct))},x.matchesProperty=function(t,e){return Kn(t,mn(e,Ct))},x.memoize=ri,x.merge=xu,x.mergeWith=Cu,x.method=Nu,x.methodOf=Bu,x.mixin=Di,x.negate=oi,x.nthArg=function(t){return t=_i(t),lr((function(e){return Zn(e,t)}))},x.omit=ju,x.omitBy=function(t,e){return Si(t,oi(vo(e)))},x.once=function(t){return ei(2,t)},x.orderBy=function(t,e,n,r){return null==t?[]:(nu(e)||(e=null==e?[]:[e]),nu(n=r?B:n)||(n=null==n?[]:[n]),Xn(t,e,n))},x.over=$u,x.overArgs=Ya,x.overEvery=Fu,x.overSome=Hu,x.partial=Za,x.partialRight=Xa,x.partition=$a,x.pick=ku,x.pickBy=Si,x.property=Wi,x.propertyOf=function(t){return function(e){return null==t?B:En(t,e)}},x.pull=ja,x.pullAll=Go,x.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?er(t,e,vo(n,2)):t},x.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?er(t,e,B,n):t},x.pullAt=ka,x.range=Gu,x.rangeRight=Vu,x.rearg=Qa,x.reject=function(t,e){return(nu(t)?a:kn)(t,oi(vo(e,3)))},x.remove=function(t,e){var n,r,o,i,s=[];if(!t||!t.length)return s;for(n=-1,r=[],o=t.length,e=vo(e,3);++n<o;)e(i=t[n],n,t)&&(s.push(i),r.push(n));return rr(t,r),s},x.rest=function(t,e){if("function"!=typeof t)throw new Zi(wt);return lr(t,e=e===B?e:_i(e))},x.reverse=Vo,x.sampleSize=function(t,e,n){return e=(n?ko(t,e,n):e===B)?1:_i(e),(nu(t)?ct:hr)(t,e)},x.set=function(t,e,n){return null==t?t:pr(t,e,n)},x.setWith=function(t,e,n,r){return r="function"==typeof r?r:B,null==t?t:pr(t,e,n,r)},x.shuffle=function(t){return(nu(t)?pt:dr)(t)},x.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ko(t,e,n)?(e=0,n=r):(e=null==e?0:_i(e),n=n===B?r:_i(n)),gr(t,e,n)):[]},x.sortBy=Fa,x.sortedUniq=function(t){return t&&t.length?mr(t):[]},x.sortedUniqBy=function(t,e){return t&&t.length?mr(t,vo(e,2)):[]},x.split=function(t,e,n){return n&&"number"!=typeof n&&ko(t,e,n)&&(e=n=B),(n=n===B?Yt:n>>>0)?(t=ji(t))&&("string"==typeof e||null!=e&&!au(e))&&(!(e=br(e))&&I(t))?Tr(W(t),0,n):t.split(e,n):[]},x.spread=function(t,e){if("function"!=typeof t)throw new Zi(wt);return e=null==e?0:Ms(_i(e),0),lr((function(r){var o=r[e],i=Tr(r,0,e);return o&&f(i,o),n(t,this,i)}))},x.tail=function(t){var e=null==t?0:t.length;return e?gr(t,1,e):[]},x.take=function(t,e,n){return t&&t.length?gr(t,0,(e=n||e===B?1:_i(e))<0?0:e):[]},x.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?gr(t,(e=r-(e=n||e===B?1:_i(e)))<0?0:e,r):[]},x.takeRightWhile=function(t,e){return t&&t.length?kr(t,vo(e,3),!1,!0):[]},x.takeWhile=function(t,e){return t&&t.length?kr(t,vo(e,3)):[]},x.tap=function(t,e){return e(t),t},x.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Zi(wt);return hi(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ni(t,e,{leading:r,maxWait:e,trailing:o})},x.thru=Zo,x.toArray=wi,x.toPairs=Au,x.toPairsIn=Pu,x.toPath=function(t){return nu(t)?l(t,Do):vi(t)?[t]:Wr(va(ji(t)))},x.toPlainObject=Ci,x.transform=function(t,e,n){var r,i=nu(t),s=i||ou(t)||cu(t);return e=vo(e,4),null==n&&(r=t&&t.constructor,n=s?i?new r:[]:hi(t)&&ci(r)?Js(ps(t)):{}),(s?o:Pn)(t,(function(t,r,o){return e(n,t,r,o)})),n},x.unary=function(t){return ti(t,1)},x.union=Aa,x.unionBy=Pa,x.unionWith=Oa,x.uniq=function(t){return t&&t.length?xr(t):[]},x.uniqBy=function(t,e){return t&&t.length?xr(t,vo(e,2)):[]},x.uniqWith=function(t,e){return e="function"==typeof e?e:B,t&&t.length?xr(t,B,e):[]},x.unset=function(t,e){return null==t||Cr(t,e)},x.unzip=qo,x.unzipWith=Ko,x.update=function(t,e,n){return null==t?t:jr(t,e,Er(n))},x.updateWith=function(t,e,n,r){return r="function"==typeof r?r:B,null==t?t:jr(t,e,Er(n),r)},x.values=Ei,x.valuesIn=function(t){return null==t?[]:O(t,Oi(t))},x.without=Sa,x.words=Ii,x.wrap=function(t,e){return Za(Er(e),t)},x.xor=Ea,x.xorBy=Ma,x.xorWith=Ta,x.zip=Ia,x.zipObject=function(t,e){return Or(t||[],e||[],hn)},x.zipObjectDeep=function(t,e){return Or(t||[],e||[],pr)},x.zipWith=La,x.entries=Au,x.entriesIn=Pu,x.extend=pu,x.extendWith=du,Di(x,x),x.add=qu,x.attempt=Ru,x.camelCase=Ou,x.capitalize=Mi,x.ceil=Ku,x.clamp=function(t,e,n){return n===B&&(n=e,e=B),n!==B&&(n=(n=xi(n))==n?n:0),e!==B&&(e=(e=xi(e))==e?e:0),wn(xi(t),e,n)},x.clone=function(t){return mn(t,kt)},x.cloneDeep=function(t){return mn(t,Ct|kt)},x.cloneDeepWith=function(t,e){return mn(t,Ct|kt,e="function"==typeof e?e:B)},x.cloneWith=function(t,e){return mn(t,kt,e="function"==typeof e?e:B)},x.conformsTo=function(t,e){return null==e||_n(t,e,Pi(e))},x.deburr=Ti,x.defaultTo=function(t,e){return null==t||t!=t?e:t},x.divide=Yu,x.endsWith=function(t,e,n){var r,o;return t=ji(t),e=br(e),r=t.length,o=n=n===B?r:wn(_i(n),0,r),(n-=e.length)>=0&&t.slice(n,o)==e},x.eq=ii,x.escape=function(t){return(t=ji(t))&&Ue.test(t)?t.replace(Re,ft):t},x.escapeRegExp=function(t){return(t=ji(t))&&Ve.test(t)?t.replace(Ge,"\\$&"):t},x.every=function(t,e,n){var r=nu(t)?s:Cn;return n&&ko(t,e,n)&&(e=B),r(t,vo(e,3))},x.find=Da,x.findIndex=No,x.findKey=function(t,e){return g(t,vo(e,3),Pn)},x.findLast=Ua,x.findLastIndex=Bo,x.findLastKey=function(t,e){return g(t,vo(e,3),On)},x.floor=Zu,x.forEach=Xo,x.forEachRight=Qo,x.forIn=function(t,e){return null==t?t:na(t,vo(e,3),Oi)},x.forInRight=function(t,e){return null==t?t:ra(t,vo(e,3),Oi)},x.forOwn=function(t,e){return t&&Pn(t,vo(e,3))},x.forOwnRight=function(t,e){return t&&On(t,vo(e,3))},x.get=ki,x.gt=Ja,x.gte=tu,x.has=function(t,e){return null!=t&&bo(t,e,Ln)},x.hasIn=Ai,x.head=Fo,x.identity=zi,x.includes=function(t,e,n,r){t=si(t)?t:Ei(t),n=n&&!r?_i(n):0;var o=t.length;return n<0&&(n=Ms(o+n,0)),yi(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&v(t,e,n)>-1},x.indexOf=function(t,e,n){var r,o=null==t?0:t.length;return o?((r=null==n?0:_i(n))<0&&(r=Ms(o+r,0)),v(t,e,r)):-1},x.inRange=function(t,e,n){return e=mi(e),n===B?(n=e,e=0):n=mi(n),function(t,e,n){return t>=Ts(e,n)&&t<Ms(e,n)}(t=xi(t),e,n)},x.invoke=bu,x.isArguments=eu,x.isArray=nu,x.isArrayBuffer=ru,x.isArrayLike=si,x.isArrayLikeObject=ai,x.isBoolean=function(t){return!0===t||!1===t||pi(t)&&Tn(t)==ne},x.isBuffer=ou,x.isDate=iu,x.isElement=function(t){return pi(t)&&1===t.nodeType&&!gi(t)},x.isEmpty=function(t){var e,n;if(null==t)return!0;if(si(t)&&(nu(t)||"string"==typeof t||"function"==typeof t.splice||ou(t)||cu(t)||eu(t)))return!t.length;if((e=ha(t))==ue||e==ge)return!t.size;if(Oo(t))return!Fn(t).length;for(n in t)if(ns.call(t,n))return!1;return!0},x.isEqual=function(t,e){return Wn(t,e)},x.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:B)?n(t,e):B;return r===B?Wn(t,e,B,n):!!r},x.isError=ui,x.isFinite=function(t){return"number"==typeof t&&Os(t)},x.isFunction=ci,x.isInteger=li,x.isLength=fi,x.isMap=su,x.isMatch=function(t,e){return t===e||Nn(t,e,mo(e))},x.isMatchWith=function(t,e,n){return n="function"==typeof n?n:B,Nn(t,e,mo(e),n)},x.isNaN=function(t){return di(t)&&t!=+t},x.isNative=function(t){if(pa(t))throw new Hi(vt);return Bn(t)},x.isNil=function(t){return null==t},x.isNull=function(t){return null===t},x.isNumber=di,x.isObject=hi,x.isObjectLike=pi,x.isPlainObject=gi,x.isRegExp=au,x.isSafeInteger=function(t){return li(t)&&t>=-Vt&&t<=Vt},x.isSet=uu,x.isString=yi,x.isSymbol=vi,x.isTypedArray=cu,x.isUndefined=function(t){return t===B},x.isWeakMap=function(t){return pi(t)&&ha(t)==me},x.isWeakSet=function(t){return pi(t)&&Tn(t)==_e},x.join=function(t,e){return null==t?"":Ss.call(t,e)},x.kebabCase=Su,x.last=Ho,x.lastIndexOf=function(t,e,n){var r,o=null==t?0:t.length;return o?(r=o,n!==B&&(r=(r=_i(n))<0?Ms(o+r,0):Ts(r,o-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,r):y(t,m,r,!0)):-1},x.lowerCase=Eu,x.lowerFirst=Mu,x.lt=lu,x.lte=fu,x.max=function(t){return t&&t.length?jn(t,zi,In):B},x.maxBy=function(t,e){return t&&t.length?jn(t,vo(e,2),In):B},x.mean=function(t){return _(t,zi)},x.meanBy=function(t,e){return _(t,vo(e,2))},x.min=function(t){return t&&t.length?jn(t,zi,Gn):B},x.minBy=function(t,e){return t&&t.length?jn(t,vo(e,2),Gn):B},x.stubArray=Ni,x.stubFalse=Bi,x.stubObject=function(){return{}},x.stubString=function(){return""},x.stubTrue=function(){return!0},x.multiply=Xu,x.nth=function(t,e){return t&&t.length?Zn(t,_i(e)):B},x.noConflict=function(){return X._===this&&(X._=as),this},x.noop=Ui,x.now=Ha,x.pad=function(t,e,n){var r,o;return t=ji(t),r=(e=_i(e))?U(t):0,!e||r>=e?t:to(ks(o=(e-r)/2),n)+t+to(js(o),n)},x.padEnd=function(t,e,n){t=ji(t);var r=(e=_i(e))?U(t):0;return e&&r<e?t+to(e-r,n):t},x.padStart=function(t,e,n){t=ji(t);var r=(e=_i(e))?U(t):0;return e&&r<e?to(e-r,n)+t:t},x.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Ls(ji(t).replace(qe,""),e||0)},x.random=function(t,e,n){var r,o;return n&&"boolean"!=typeof n&&ko(t,e,n)&&(e=n=B),n===B&&("boolean"==typeof e?(n=e,e=B):"boolean"==typeof t&&(n=t,t=B)),t===B&&e===B?(t=0,e=1):(t=mi(t),e===B?(e=t,t=0):e=mi(e)),t>e&&(r=t,t=e,e=r),n||t%1||e%1?(o=zs(),Ts(t+o*(e-t+q("1e-"+((o+"").length-1))),e)):ur(t,e)},x.reduce=function(t,e,n){var r=nu(t)?h:C,o=arguments.length<3;return r(t,vo(e,4),n,o,ta)},x.reduceRight=function(t,e,n){var r=nu(t)?p:C,o=arguments.length<3;return r(t,vo(e,4),n,o,ea)},x.repeat=function(t,e,n){return e=(n?ko(t,e,n):e===B)?1:_i(e),cr(ji(t),e)},x.replace=function(){var t=arguments,e=ji(t[0]);return t.length<3?e:e.replace(t[1],t[2])},x.result=function(t,e,n){var r,o,i;for(r=-1,(o=(e=Mr(e,t)).length)||(o=1,t=B);++r<o;)(i=null==t?B:t[Do(e[r])])===B&&(r=o,i=n),t=ci(i)?i.call(t):i;return t},x.round=Qu,x.runInContext=t,x.sample=function(t){return(nu(t)?nt:fr)(t)},x.size=function(t){if(null==t)return 0;if(si(t))return yi(t)?U(t):t.length;var e=ha(t);return e==ue||e==ge?t.size:Fn(t).length},x.snakeCase=Tu,x.some=function(t,e,n){var r=nu(t)?d:yr;return n&&ko(t,e,n)&&(e=B),r(t,vo(e,3))},x.sortedIndex=function(t,e){return vr(t,e)},x.sortedIndexBy=function(t,e,n){return wr(t,e,vo(n,2))},x.sortedIndexOf=function(t,e){var n,r=null==t?0:t.length;return r&&(n=vr(t,e))<r&&ii(t[n],e)?n:-1},x.sortedLastIndex=function(t,e){return vr(t,e,!0)},x.sortedLastIndexBy=function(t,e,n){return wr(t,e,vo(n,2),!0)},x.sortedLastIndexOf=function(t,e){var n,r=null==t?0:t.length;return r&&ii(t[n=vr(t,e,!0)-1],e)?n:-1},x.startCase=Iu,x.startsWith=function(t,e,n){return t=ji(t),n=null==n?0:wn(_i(n),0,t.length),e=br(e),t.slice(n,n+e.length)==e},x.subtract=Ju,x.sum=function(t){return t&&t.length?j(t,zi):0},x.sumBy=function(t,e){return t&&t.length?j(t,vo(e,2)):0},x.template=function(t,e,n){var r,o,i,s,a,u,c,l,f,h,p,d,g=x.templateSettings;if(n&&ko(t,e,n)&&(e=B),t=ji(t),e=du({},e,g,ao),r=du({},e.imports,g.imports,ao),o=Pi(r),i=O(r,o),u=0,c=e.interpolate||ln,l="__p += '",f=Ki((e.escape||ln).source+"|"+c.source+"|"+(c===Be?en:ln).source+"|"+(e.evaluate||ln).source+"|$","g"),h="//# sourceURL="+(ns.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sr+"]")+"\n",t.replace(f,(function(e,n,r,o,i,c){return r||(r=o),l+=t.slice(u,c).replace(fn,T),n&&(s=!0,l+="' +\n__e("+n+") +\n'"),i&&(a=!0,l+="';\n"+i+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),l+="';\n",p=ns.call(e,"variable")&&e.variable){if(Je.test(p))throw new Hi(mt)}else l="with (obj) {\n"+l+"\n}\n";if(l=(a?l.replace(Te,""):l).replace(Ie,"$1").replace(Le,"$1;"),l="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}",(d=Ru((function(){return Gi(o,h+"return "+l).apply(B,i)}))).source=l,ui(d))throw d;return d},x.times=function(t,e){var n,r,o;if((t=_i(t))<1||t>Vt)return[];for(n=Yt,r=Ts(t,Yt),e=vo(e),t-=Yt,o=k(r,e);++n<t;)e(n);return o},x.toFinite=mi,x.toInteger=_i,x.toLength=bi,x.toLower=function(t){return ji(t).toLowerCase()},x.toNumber=xi,x.toSafeInteger=function(t){return t?wn(_i(t),-Vt,Vt):0===t?t:0},x.toString=ji,x.toUpper=function(t){return ji(t).toUpperCase()},x.trim=function(t,e,n){if((t=ji(t))&&(n||e===B))return A(t);if(!t||!(e=br(e)))return t;var r=W(t),o=W(e);return Tr(r,E(r,o),M(r,o)+1).join("")},x.trimEnd=function(t,e,n){if((t=ji(t))&&(n||e===B))return t.slice(0,N(t)+1);if(!t||!(e=br(e)))return t;var r=W(t);return Tr(r,0,M(r,W(e))+1).join("")},x.trimStart=function(t,e,n){if((t=ji(t))&&(n||e===B))return t.replace(qe,"");if(!t||!(e=br(e)))return t;var r=W(t);return Tr(r,E(r,W(e))).join("")},x.truncate=function(t,e){var n,r,o,i,s,a,u,c,l,f=Ut,h=Wt;if(hi(e)&&(n="separator"in e?e.separator:n,f="length"in e?_i(e.length):f,h="omission"in e?br(e.omission):h),r=(t=ji(t)).length,I(t)&&(r=(o=W(t)).length),f>=r)return t;if((i=f-U(h))<1)return h;if(s=o?Tr(o,0,i).join(""):t.slice(0,i),n===B)return s+h;if(o&&(i+=s.length-i),au(n)){if(t.slice(i).search(n)){for(u=s,n.global||(n=Ki(n.source,ji(nn.exec(n))+"g")),n.lastIndex=0;a=n.exec(u);)c=a.index;s=s.slice(0,c===B?i:c)}}else t.indexOf(br(n),i)!=i&&(l=s.lastIndexOf(n))>-1&&(s=s.slice(0,l));return s+h},x.unescape=function(t){return(t=ji(t))&&De.test(t)?t.replace(ze,ht):t},x.uniqueId=function(t){var e=++rs;return ji(t)+e},x.upperCase=Lu,x.upperFirst=zu,x.each=Xo,x.eachRight=Qo,x.first=Fo,Di(x,function(){var t={};return Pn(x,(function(e,n){ns.call(x.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),x.VERSION=gt,o(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){x[t].placeholder=x})),o(["drop","take"],(function(t,e){G.prototype[t]=function(n){n=n===B?1:Ms(_i(n),0);var r=this.__filtered__&&!e?new G(this):this.clone();return r.__filtered__?r.__takeCount__=Ts(n,r.__takeCount__):r.__views__.push({size:Ts(n,Yt),type:t+(r.__dir__<0?"Right":"")}),r},G.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),o(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==$t||n==Ht;G.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:vo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),o(["head","last"],(function(t,e){var n="take"+(e?"Right":"");G.prototype[t]=function(){return this[n](1).value()[0]}})),o(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");G.prototype[t]=function(){return this.__filtered__?new G(this):this[n](1)}})),G.prototype.compact=function(){return this.filter(zi)},G.prototype.find=function(t){return this.filter(t).head()},G.prototype.findLast=function(t){return this.reverse().find(t)},G.prototype.invokeMap=lr((function(t,e){return"function"==typeof t?new G(this):this.map((function(n){return Dn(n,t,e)}))})),G.prototype.reject=function(t){return this.filter(oi(vo(t)))},G.prototype.slice=function(t,e){t=_i(t);var n=this;return n.__filtered__&&(t>0||e<0)?new G(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==B&&(n=(e=_i(e))<0?n.dropRight(-e):n.take(e-t)),n)},G.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},G.prototype.toArray=function(){return this.take(Yt)},Pn(G.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=x[r?"take"+("last"==e?"Right":""):e],i=r||/^find/.test(e);o&&(x.prototype[e]=function(){var e,s,a,u,c,l=this.__wrapped__,h=r?[1]:arguments,p=l instanceof G,d=h[0],g=p||nu(l),y=function(t){var n=o.apply(x,f([t],h));return r&&e?n[0]:n};return g&&n&&"function"==typeof d&&1!=d.length&&(p=g=!1),e=this.__chain__,s=!!this.__actions__.length,a=i&&!e,u=p&&!s,!i&&g?(l=u?l:new G(this),(c=t.apply(l,h)).__actions__.push({func:Zo,args:[y],thisArg:B}),new H(c,e)):a&&u?t.apply(this,h):(c=this.thru(y),a?r?c.value()[0]:c.value():c)})})),o(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Xi[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);x.prototype[t]=function(){var t,o=arguments;return r&&!this.__chain__?(t=this.value(),e.apply(nu(t)?t:[],o)):this[n]((function(t){return e.apply(nu(t)?t:[],o)}))}})),Pn(G.prototype,(function(t,e){var n,r=x[e];r&&(n=r.name+"",ns.call(Hs,n)||(Hs[n]=[]),Hs[n].push({name:e,func:r}))})),Hs[Zr(B,St).name]=[{name:"wrapper",func:B}],G.prototype.clone=function(){var t=new G(this.__wrapped__);return t.__actions__=Wr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Wr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Wr(this.__views__),t},G.prototype.reverse=function(){if(this.__filtered__){var t=new G(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},G.prototype.value=function(){var t,e,n,r,o,i,s,a=this.__wrapped__.value(),u=this.__dir__,c=nu(a),l=u<0,f=c?a.length:0,h=function(t,e,n){var r,o,i,s;for(r=-1,o=n.length;++r<o;)switch(s=(i=n[r]).size,i.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Ts(e,t+s);break;case"takeRight":t=Ms(t,e-s)}return{start:t,end:e}}(0,f,this.__views__),p=h.start,d=h.end,g=d-p,y=l?d:p-1,v=this.__iteratees__,w=v.length,m=0,_=Ts(g,this.__takeCount__);if(!c||!l&&f==g&&_==g)return Ar(a,this.__actions__);t=[];t:for(;g--&&m<_;){for(e=-1,n=a[y+=u];++e<w;)if(o=(r=v[e]).iteratee,i=r.type,s=o(n),i==Ft)n=s;else if(!s){if(i==$t)continue t;break t}t[m++]=n}return t},x.prototype.at=za,x.prototype.chain=function(){return Yo(this)},x.prototype.commit=function(){return new H(this.value(),this.__chain__)},x.prototype.next=function(){this.__values__===B&&(this.__values__=wi(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?B:this.__values__[this.__index__++]}},x.prototype.plant=function(t){var e,n,r,o;for(n=this;n instanceof F;)(r=Wo(n)).__index__=0,r.__values__=B,e?o.__wrapped__=r:e=r,o=r,n=n.__wrapped__;return o.__wrapped__=t,e},x.prototype.reverse=function(){var t,e=this.__wrapped__;return e instanceof G?(t=e,this.__actions__.length&&(t=new G(this)),(t=t.reverse()).__actions__.push({func:Zo,args:[Vo],thisArg:B}),new H(t,this.__chain__)):this.thru(Vo)},x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=function(){return Ar(this.__wrapped__,this.__actions__)},x.prototype.first=x.prototype.head,ws&&(x.prototype[ws]=function(){return this}),x},dt=pt(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=dt,define((function(){return dt}))):J?((J.exports=dt)._=dt,Q._=dt):X._=dt}).call(t)})),jn=nn(((t,e)=>{"use strict";var n,r;n=t,r=function(){var t="function"==typeof Promise,e=function(t){if("object"==typeof globalThis)return globalThis;Object.defineProperty(t,"typeDetectGlobalObject",{get:function(){return this},configurable:!0});var e=typeDetectGlobalObject;return delete t.typeDetectGlobalObject,e}(Object.prototype),n=typeof Symbol<"u",r=typeof Map<"u",o=typeof Set<"u",i=typeof WeakMap<"u",s=typeof WeakSet<"u",a=typeof DataView<"u",u=n&&typeof Symbol.iterator<"u",c=n&&typeof Symbol.toStringTag<"u",l=o&&"function"==typeof Set.prototype.entries,f=r&&"function"==typeof Map.prototype.entries,h=l&&Object.getPrototypeOf((new Set).entries()),p=f&&Object.getPrototypeOf((new Map).entries()),d=u&&"function"==typeof Array.prototype[Symbol.iterator],g=d&&Object.getPrototypeOf([][Symbol.iterator]()),y=u&&"function"==typeof String.prototype[Symbol.iterator],v=y&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var u,l,f=typeof n;if("object"!==f)return f;if(null===n)return"null";if(n===e)return"global";if(Array.isArray(n)&&(!1===c||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}return"string"==typeof(u=c&&n[Symbol.toStringTag])?u:(l=Object.getPrototypeOf(n))===RegExp.prototype?"RegExp":l===Date.prototype?"Date":t&&l===Promise.prototype?"Promise":o&&l===Set.prototype?"Set":r&&l===Map.prototype?"Map":s&&l===WeakSet.prototype?"WeakSet":i&&l===WeakMap.prototype?"WeakMap":a&&l===DataView.prototype?"DataView":r&&l===p?"Map Iterator":o&&l===h?"Set Iterator":d&&l===g?"Array Iterator":y&&l===v?"String Iterator":null===l?"Object":Object.prototype.toString.call(n).slice(8,-1)}},"object"==typeof t&&typeof e<"u"?e.exports=r():"function"==typeof define&&define.amd?define(r):(n=typeof globalThis<"u"?globalThis:n||self).typeDetect=r()})),kn=nn(((t,e)=>{"use strict";function n(){this._key="chai/deep-eql__"+Math.random()+Date.now()}function r(t,e,n){var r,o;return!n||g(t)||g(e)?null:(r=n.get(t))&&"boolean"==typeof(o=r.get(e))?o:null}function o(t,e,n,r){if(n&&!g(t)&&!g(e)){var o=n.get(t);o?o.set(e,r):((o=new v).set(e,r),n.set(t,o))}}function i(t,e,n){if(n&&n.comparator)return a(t,e,n);var r=s(t,e);return null!==r?r:a(t,e,n)}function s(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e||!g(t)&&!g(e)&&null}function a(t,e,n){var a,g,m,_,b,x,C;if((n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new v),a=n&&n.comparator,null!==(g=r(t,e,n.memoize)))return g;if(null!==(m=r(e,t,n.memoize)))return m;if(a){if(!1===(_=a(t,e))||!0===_)return o(t,e,n.memoize,_),_;if(null!==(b=s(t,e)))return b}return(x=w(t))!==w(e)?(o(t,e,n.memoize,!1),!1):(o(t,e,n.memoize,!0),C=function(t,e,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return i(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return d(t,e,["name","message","code"],r);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return c(t,e,r);case"RegExp":return function(t,e){return t.toString()===e.toString()}(t,e);case"Generator":return function(t,e,n){return c(f(t),f(e),n)}(t,e,r);case"DataView":return c(new Uint8Array(t.buffer),new Uint8Array(e.buffer),r);case"ArrayBuffer":return c(new Uint8Array(t),new Uint8Array(e),r);case"Set":case"Map":return u(t,e,r);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return function(t,e,n){var r,o,i=h(t),s=h(e),a=p(t),u=p(e);if(i=i.concat(a),s=s.concat(u),i.length&&i.length===s.length)return!1!==c(y(i).sort(),y(s).sort())&&d(t,e,i,n);r=l(t),o=l(e);return r.length&&r.length===o.length?(r.sort(),o.sort(),c(r,o,n)):0===i.length&&0===r.length&&0===s.length&&0===o.length}(t,e,r)}}(t,e,x,n),o(t,e,n.memoize,C),C)}function u(t,e,n){try{if(t.size!==e.size)return!1;if(0===t.size)return!0}catch{return!1}var r=[],o=[];return t.forEach((function(t,e){r.push([t,e])})),e.forEach((function(t,e){o.push([t,e])})),c(r.sort(),o.sort(),n)}function c(t,e,n){var r,o=t.length;if(o!==e.length)return!1;if(0===o)return!0;for(r=-1;++r<o;)if(!1===i(t[r],e[r],n))return!1;return!0}function l(t){if(function(t){return typeof Symbol<"u"&&"object"==typeof t&&typeof Symbol.iterator<"u"&&"function"==typeof t[Symbol.iterator]}(t))try{return f(t[Symbol.iterator]())}catch{return[]}return[]}function f(t){for(var e=t.next(),n=[e.value];!1===e.done;)e=t.next(),n.push(e.value);return n}function h(t){var e,n=[];for(e in t)n.push(e);return n}function p(t){var e,n,r,o;for(e=[],n=Object.getOwnPropertySymbols(t),r=0;r<n.length;r+=1)o=n[r],Object.getOwnPropertyDescriptor(t,o).enumerable&&e.push(o);return e}function d(t,e,n,r){var o,s=n.length;if(0===s)return!0;for(o=0;o<s;o+=1)if(!1===i(t[n[o]],e[n[o]],r))return!1;return!0}function g(t){return null===t||"object"!=typeof t}function y(t){return t.map((function(t){return"symbol"==typeof t?t.toString():t}))}var v,w=jn();n.prototype={get:function(t){return t[this._key]},set:function(t,e){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:e,configurable:!0})}},v="function"==typeof WeakMap?WeakMap:n,e.exports=i,e.exports.MemoizeMap=v})),An=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asArraysFactory=void 0,t.asArraysFactory=function(t){return()=>t.map((t=>t.items))}})),Pn=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asEntriesFactory=void 0,t.asEntriesFactory=function(t){return e=>{var n,r;let o=null!==(n=e?.keyName)&&void 0!==n?n:"key",i=null!==(r=e?.itemsName)&&void 0!==r?r:"items";return t.map((t=>({[o]:t.key,[i]:t.items})))}}})),On=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asMapFactory=void 0,t.asMapFactory=function(t){return()=>{let e=new Map;for(let n of t)e.set(n.key,n.items);return e}}})),Sn=nn((t=>{"use strict";function e(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t}Object.defineProperty(t,"__esModule",{value:!0}),t.asObjectFactory=void 0,t.asObjectFactory=function(t){return()=>{let n={};for(let r of t)e(r.key)&&(n[r.key]=r.items);return n}}})),En=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asTuplesFactory=void 0,t.asTuplesFactory=function(t){return()=>t.map((t=>[t.key,t.items]))}})),Mn=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keysFactory=void 0,t.keysFactory=function(t){return()=>t.map((t=>t.key))}})),Tn=nn((t=>{"use strict";var e,n,r,o,i,s,a,u=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.group=void 0,e=u(kn()),n=An(),r=Pn(),o=On(),i=Sn(),s=En(),a=Mn(),t.group=function(t){return Object.freeze({by:u=>{let c=function(t,n){let r=[],o=new Map,i=0;for(let s of t){let t=n(s,i);i++;let a="object"==typeof t?JSON.stringify(t):t,u=o.get(a);null==u&&(u=[],o.set(a,u));let c=!1;for(let n of u)if((0,e.default)(n.key,t)){n.items.push(s),c=!0;break}if(!c){let e={key:t,items:[s]};r.push(e),u.push(e)}}return r}(t,"function"==typeof u?u:t=>t[u]);return Object.freeze({asArrays:(0,n.asArraysFactory)(c),asEntries:(0,r.asEntriesFactory)(c),asMap:(0,o.asMapFactory)(c),asObject:(0,i.asObjectFactory)(c),asTuples:(0,s.asTuplesFactory)(c),keys:(0,a.keysFactory)(c)})}})}})),In=nn((t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.group=void 0;var e=Tn();Object.defineProperty(t,"group",{enumerable:!0,get:function(){return e.group}})})),Ln=nn(((t,e)=>{"use strict";var n=function(){function t(t,e){if(!o[t]){o[t]={};for(var n=0;n<t.length;n++)o[t][t.charAt(n)]=n}return o[t][e]}var e=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={},i={compressToBase64:function(t){if(null==t)return"";var e=i._compress(t,6,(function(t){return n.charAt(t)}));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(r){return t(n,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){var e,n,r,o,s;for(e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++)s=e.charCodeAt(r),n[2*r]=s>>>8,n[2*r+1]=s%256;return n},decompressFromUint8Array:function(t){var n,r,o,s;if(null==t)return i.decompress(t);for(r=0,o=(n=new Array(t.length/2)).length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];return s=[],n.forEach((function(t){s.push(e(t))})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return r.charAt(t)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(n){return t(r,e.charAt(n))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,s={},a={},u="",c="",l="",f=2,h=3,p=2,d=[],g=0,y=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=h++,a[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(s,c))l=c;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)g<<=1,y==e-1?(y=0,d.push(n(g)),g=0):y++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}else{for(o=1,r=0;r<p;r++)g=g<<1|o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete a[l]}else for(o=s[l],r=0;r<p;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;0==--f&&(f=Math.pow(2,p),p++),s[c]=h++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)g<<=1,y==e-1?(y=0,d.push(n(g)),g=0):y++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}else{for(o=1,r=0;r<p;r++)g=g<<1|o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete a[l]}else for(o=s[l],r=0;r<p;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;0==--f&&(f=Math.pow(2,p),p++)}for(o=2,r=0;r<p;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;for(;;){if(g<<=1,y==e-1){d.push(n(g));break}y++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(t,n,r){var o,i,s,a,u,c,l,f=[],h=4,p=4,d=3,g="",y=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(s=0,u=Math.pow(2,2),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;l=e(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;l=e(s);break;case 2:return""}for(f[3]=l,i=l,y.push(l);;){if(v.index>t)return"";for(s=0,u=Math.pow(2,d),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;switch(l=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;f[p++]=e(s),l=p-1,h--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(a>0?1:0)*c,c<<=1;f[p++]=e(s),l=p-1,h--;break;case 2:return y.join("")}if(0==h&&(h=Math.pow(2,d),d++),f[l])g=f[l];else{if(l!==p)return null;g=i+i.charAt(0)}y.push(g),f[p++]=i+g.charAt(0),i=g,0==--h&&(h=Math.pow(2,d),d++)}}};return i}();"function"==typeof define&&define.amd?define((function(){return n})):typeof e<"u"&&null!=e?e.exports=n:typeof angular<"u"&&null!=angular&&angular.module("LZString",[]).factory("LZString",(function(){return n}))})),zn=nn(((t,e)=>{"use strict";e.exports=function(t,e){return function(n){return t(e(n))}}})),Rn=nn(((t,e)=>{"use strict";var n=zn()(Object.getPrototypeOf,Object);e.exports=n})),Dn=nn(((t,e)=>{"use strict";var n=dn(),r=Rn(),o=gn(),i=Function.prototype,s=Object.prototype,a=i.toString,u=s.hasOwnProperty,c=a.call(Object);e.exports=function(t){var e,i;return!(!o(t)||"[object Object]"!=n(t))&&(null===(e=r(t))||"function"==typeof(i=u.call(e,"constructor")&&e.constructor)&&i instanceof i&&a.call(i)==c)}})),Un=nn(((t,e)=>{"use strict";var n=dn(),r=gn(),o=Dn();e.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}})),Wn=nn(((t,e)=>{"use strict";e.exports=function(){this.__data__=[],this.size=0}})),Nn=nn(((t,e)=>{"use strict";e.exports=function(t,e){return t===e||t!=t&&e!=e}})),Bn=nn(((t,e)=>{"use strict";var n=Nn();e.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}})),$n=nn(((t,e)=>{"use strict";var n=Bn(),r=Array.prototype.splice;e.exports=function(t){var e=this.__data__,o=n(e,t);return!(o<0)&&(o==e.length-1?e.pop():r.call(e,o,1),--this.size,!0)}})),Fn=nn(((t,e)=>{"use strict";var n=Bn();e.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}})),Hn=nn(((t,e)=>{"use strict";var n=Bn();e.exports=function(t){return n(this.__data__,t)>-1}})),Gn=nn(((t,e)=>{"use strict";var n=Bn();e.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}})),Vn=nn(((t,e)=>{"use strict";function n(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}var r=Wn(),o=$n(),i=Fn(),s=Hn(),a=Gn();n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=i,n.prototype.has=s,n.prototype.set=a,e.exports=n})),qn=nn(((t,e)=>{"use strict";var n=Vn();e.exports=function(){this.__data__=new n,this.size=0}})),Kn=nn(((t,e)=>{"use strict";e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}})),Yn=nn(((t,e)=>{"use strict";e.exports=function(t){return this.__data__.get(t)}})),Zn=nn(((t,e)=>{"use strict";e.exports=function(t){return this.__data__.has(t)}})),Xn=nn(((t,e)=>{"use strict";var n=dn(),r=un();e.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}})),Qn=nn(((t,e)=>{"use strict";var n=ln()["__core-js_shared__"];e.exports=n})),Jn=nn(((t,e)=>{"use strict";var n,r=Qn(),o=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(t){return!!o&&o in t}})),tr=nn(((t,e)=>{"use strict";var n=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return n.call(t)}catch{}try{return t+""}catch{}}return""}})),er=nn(((t,e)=>{"use strict";var n=Xn(),r=Jn(),o=un(),i=tr(),s=/^\[object .+?Constructor\]$/,a=Function.prototype,u=Object.prototype,c=a.toString,l=u.hasOwnProperty,f=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!o(t)||r(t))&&(n(t)?f:s).test(i(t))}})),nr=nn(((t,e)=>{"use strict";e.exports=function(t,e){return t?.[e]}})),rr=nn(((t,e)=>{"use strict";var n=er(),r=nr();e.exports=function(t,e){var o=r(t,e);return n(o)?o:void 0}})),or=nn(((t,e)=>{"use strict";var n=rr()(ln(),"Map");e.exports=n})),ir=nn(((t,e)=>{"use strict";var n=rr()(Object,"create");e.exports=n})),sr=nn(((t,e)=>{"use strict";var n=ir();e.exports=function(){this.__data__=n?n(null):{},this.size=0}})),ar=nn(((t,e)=>{"use strict";e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}})),ur=nn(((t,e)=>{"use strict";var n=ir(),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e,o=this.__data__;return n?"__lodash_hash_undefined__"===(e=o[t])?void 0:e:r.call(o,t)?o[t]:void 0}})),cr=nn(((t,e)=>{"use strict";var n=ir(),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}})),lr=nn(((t,e)=>{"use strict";var n=ir();e.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}})),fr=nn(((t,e)=>{"use strict";function n(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}var r=sr(),o=ar(),i=ur(),s=cr(),a=lr();n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=i,n.prototype.has=s,n.prototype.set=a,e.exports=n})),hr=nn(((t,e)=>{"use strict";var n=fr(),r=Vn(),o=or();e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||r),string:new n}}})),pr=nn(((t,e)=>{"use strict";e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}})),dr=nn(((t,e)=>{"use strict";var n=pr();e.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}})),gr=nn(((t,e)=>{"use strict";var n=dr();e.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}})),yr=nn(((t,e)=>{"use strict";var n=dr();e.exports=function(t){return n(this,t).get(t)}})),vr=nn(((t,e)=>{"use strict";var n=dr();e.exports=function(t){return n(this,t).has(t)}})),wr=nn(((t,e)=>{"use strict";var n=dr();e.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}})),mr=nn(((t,e)=>{"use strict";function n(t){var e,n=-1,r=null==t?0:t.length;for(this.clear();++n<r;)e=t[n],this.set(e[0],e[1])}var r=hr(),o=gr(),i=yr(),s=vr(),a=wr();n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=i,n.prototype.has=s,n.prototype.set=a,e.exports=n})),_r=nn(((t,e)=>{"use strict";var n=Vn(),r=or(),o=mr();e.exports=function(t,e){var i,s=this.__data__;if(s instanceof n){if(i=s.__data__,!r||i.length<199)return i.push([t,e]),this.size=++s.size,this;s=this.__data__=new o(i)}return s.set(t,e),this.size=s.size,this}})),br=nn(((t,e)=>{"use strict";function n(t){var e=this.__data__=new r(t);this.size=e.size}var r=Vn(),o=qn(),i=Kn(),s=Yn(),a=Zn(),u=_r();n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,e.exports=n})),xr=nn(((t,e)=>{"use strict";e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}})),Cr=nn(((t,e)=>{"use strict";var n=rr(),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();e.exports=r})),jr=nn(((t,e)=>{"use strict";var n=Cr();e.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}})),kr=nn(((t,e)=>{"use strict";var n=jr(),r=Nn(),o=Object.prototype.hasOwnProperty;e.exports=function(t,e,i){var s=t[e];(!o.call(t,e)||!r(s,i)||void 0===i&&!(e in t))&&n(t,e,i)}})),Ar=nn(((t,e)=>{"use strict";var n=kr(),r=jr();e.exports=function(t,e,o,i){var s,a,u,c,l=!o;for(o||(o={}),s=-1,a=e.length;++s<a;)u=e[s],void 0===(c=i?i(o[u],t[u],u,o,t):void 0)&&(c=t[u]),l?r(o,u,c):n(o,u,c);return o}})),Pr=nn(((t,e)=>{"use strict";e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}})),Or=nn(((t,e)=>{"use strict";var n=dn(),r=gn();e.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}})),Sr=nn(((t,e)=>{"use strict";var n=Or(),r=gn(),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(t){return r(t)&&i.call(t,"callee")&&!s.call(t,"callee")};e.exports=a})),Er=nn(((t,e)=>{"use strict";var n=Array.isArray;e.exports=n})),Mr=nn(((t,e)=>{"use strict";e.exports=function(){return!1}})),Tr=nn(((t,e)=>{"use strict";var n=ln(),r=Mr(),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?n.Buffer:void 0,a=(s?s.isBuffer:void 0)||r;e.exports=a})),Ir=nn(((t,e)=>{"use strict";var n=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}})),Lr=nn(((t,e)=>{"use strict";e.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}})),zr=nn(((t,e)=>{"use strict";var n=dn(),r=Lr(),o=gn(),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(t){return o(t)&&r(t.length)&&!!i[n(t)]}})),Rr=nn(((t,e)=>{"use strict";e.exports=function(t){return function(e){return t(e)}}})),Dr=nn(((t,e)=>{"use strict";var n=cn(),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,s=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s})),Ur=nn(((t,e)=>{"use strict";var n=zr(),r=Rr(),o=Dr(),i=o&&o.isTypedArray,s=i?r(i):n;e.exports=s})),Wr=nn(((t,e)=>{"use strict";var n=Pr(),r=Sr(),o=Er(),i=Tr(),s=Ir(),a=Ur(),u=Object.prototype.hasOwnProperty;e.exports=function(t,e){var c,l=o(t),f=!l&&r(t),h=!l&&!f&&i(t),p=!l&&!f&&!h&&a(t),d=l||f||h||p,g=d?n(t.length,String):[],y=g.length;for(c in t)(e||u.call(t,c))&&(!d||!("length"==c||h&&("offset"==c||"parent"==c)||p&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||s(c,y)))&&g.push(c);return g}})),Nr=nn(((t,e)=>{"use strict";var n=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}})),Br=nn(((t,e)=>{"use strict";var n=zn()(Object.keys,Object);e.exports=n})),$r=nn(((t,e)=>{"use strict";var n=Nr(),r=Br(),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e,i;if(!n(t))return r(t);for(i in e=[],Object(t))o.call(t,i)&&"constructor"!=i&&e.push(i);return e}})),Fr=nn(((t,e)=>{"use strict";var n=Xn(),r=Lr();e.exports=function(t){return null!=t&&r(t.length)&&!n(t)}})),Hr=nn(((t,e)=>{"use strict";var n=Wr(),r=$r(),o=Fr();e.exports=function(t){return o(t)?n(t):r(t)}})),Gr=nn(((t,e)=>{"use strict";var n=Ar(),r=Hr();e.exports=function(t,e){return t&&n(e,r(e),t)}})),Vr=nn(((t,e)=>{"use strict";e.exports=function(t){var e,n=[];if(null!=t)for(e in Object(t))n.push(e);return n}})),qr=nn(((t,e)=>{"use strict";var n=un(),r=Nr(),o=Vr(),i=Object.prototype.hasOwnProperty;e.exports=function(t){var e,s,a;if(!n(t))return o(t);for(a in e=r(t),s=[],t)"constructor"==a&&(e||!i.call(t,a))||s.push(a);return s}})),Kr=nn(((t,e)=>{"use strict";var n=Wr(),r=qr(),o=Fr();e.exports=function(t){return o(t)?n(t,!0):r(t)}})),Yr=nn(((t,e)=>{"use strict";var n=Ar(),r=Kr();e.exports=function(t,e){return t&&n(e,r(e),t)}})),Zr=nn(((t,e)=>{"use strict";var n=ln(),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===r?n.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}})),Xr=nn(((t,e)=>{"use strict";e.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}})),Qr=nn(((t,e)=>{"use strict";e.exports=function(t,e){var n,r,o,i,s;for(n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;)e(s=t[n],n,t)&&(i[o++]=s);return i}})),Jr=nn(((t,e)=>{"use strict";e.exports=function(){return[]}})),to=nn(((t,e)=>{"use strict";var n=Qr(),r=Jr(),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(t){return null==t?[]:(t=Object(t),n(i(t),(function(e){return o.call(t,e)})))}:r;e.exports=s})),eo=nn(((t,e)=>{"use strict";var n=Ar(),r=to();e.exports=function(t,e){return n(t,r(t),e)}})),no=nn(((t,e)=>{"use strict";e.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}})),ro=nn(((t,e)=>{"use strict";var n=no(),r=Rn(),o=to(),i=Jr(),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,o(t)),t=r(t);return e}:i;e.exports=s})),oo=nn(((t,e)=>{"use strict";var n=Ar(),r=ro();e.exports=function(t,e){return n(t,r(t),e)}})),io=nn(((t,e)=>{"use strict";var n=no(),r=Er();e.exports=function(t,e,o){var i=e(t);return r(t)?i:n(i,o(t))}})),so=nn(((t,e)=>{"use strict";var n=io(),r=to(),o=Hr();e.exports=function(t){return n(t,o,r)}})),ao=nn(((t,e)=>{"use strict";var n=io(),r=ro(),o=Kr();e.exports=function(t){return n(t,o,r)}})),uo=nn(((t,e)=>{"use strict";var n=rr()(ln(),"DataView");e.exports=n})),co=nn(((t,e)=>{"use strict";var n=rr()(ln(),"Promise");e.exports=n})),lo=nn(((t,e)=>{"use strict";var n=rr()(ln(),"Set");e.exports=n})),fo=nn(((t,e)=>{"use strict";var n=rr()(ln(),"WeakMap");e.exports=n})),ho=nn(((t,e)=>{"use strict";var n=uo(),r=or(),o=co(),i=lo(),s=fo(),a=dn(),u=tr(),c="[object Map]",l="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",d=u(n),g=u(r),y=u(o),v=u(i),w=u(s),m=a;(n&&m(new n(new ArrayBuffer(1)))!=p||r&&m(new r)!=c||o&&m(o.resolve())!=l||i&&m(new i)!=f||s&&m(new s)!=h)&&(m=function(t){var e=a(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case d:return p;case g:return c;case y:return l;case v:return f;case w:return h}return e}),e.exports=m})),po=nn(((t,e)=>{"use strict";var n=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}})),go=nn(((t,e)=>{"use strict";var n=ln().Uint8Array;e.exports=n})),yo=nn(((t,e)=>{"use strict";var n=go();e.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}})),vo=nn(((t,e)=>{"use strict";var n=yo();e.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}})),wo=nn(((t,e)=>{"use strict";var n=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}})),mo=nn(((t,e)=>{"use strict";var n=fn(),r=n?n.prototype:void 0,o=r?r.valueOf:void 0;e.exports=function(t){return o?Object(o.call(t)):{}}})),_o=nn(((t,e)=>{"use strict";var n=yo();e.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}})),bo=nn(((t,e)=>{"use strict";var n=yo(),r=vo(),o=wo(),i=mo(),s=_o();e.exports=function(t,e,a){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return r(t,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,a);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return i(t)}}})),xo=nn(((t,e)=>{"use strict";var n=un(),r=Object.create,o=function(){function t(){}return function(e){if(!n(e))return{};if(r)return r(e);t.prototype=e;var o=new t;return t.prototype=void 0,o}}();e.exports=o})),Co=nn(((t,e)=>{"use strict";var n=xo(),r=Rn(),o=Nr();e.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(r(t))}})),jo=nn(((t,e)=>{"use strict";var n=ho(),r=gn();e.exports=function(t){return r(t)&&"[object Map]"==n(t)}})),ko=nn(((t,e)=>{"use strict";var n=jo(),r=Rr(),o=Dr(),i=o&&o.isMap,s=i?r(i):n;e.exports=s})),Ao=nn(((t,e)=>{"use strict";var n=ho(),r=gn();e.exports=function(t){return r(t)&&"[object Set]"==n(t)}})),Po=nn(((t,e)=>{"use strict";var n=Ao(),r=Rr(),o=Dr(),i=o&&o.isSet,s=i?r(i):n;e.exports=s})),Oo=nn(((t,e)=>{"use strict";var n=br(),r=xr(),o=kr(),i=Gr(),s=Yr(),a=Zr(),u=Xr(),c=eo(),l=oo(),f=so(),h=ao(),p=ho(),d=po(),g=bo(),y=Co(),v=Er(),w=Tr(),m=ko(),_=un(),b=Po(),x=Hr(),C=Kr(),j="[object Arguments]",k="[object Function]",A="[object Object]",P={};P[j]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[A]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[k]=P["[object WeakMap]"]=!1,e.exports=function t(e,O,S,E,M,T){var I,L,z,R,D,U,W=1&O,N=2&O,B=4&O;if(S&&(I=M?S(e,E,M,T):S(e)),void 0!==I)return I;if(!_(e))return e;if(L=v(e)){if(I=d(e),!W)return u(e,I)}else{if(R=(z=p(e))==k||"[object GeneratorFunction]"==z,w(e))return a(e,W);if(z==A||z==j||R&&!M){if(I=N||R?{}:y(e),!W)return N?l(e,s(I,e)):c(e,i(I,e))}else{if(!P[z])return M?e:{};I=g(e,z,W)}}return T||(T=new n),(D=T.get(e))?D:(T.set(e,I),b(e)?e.forEach((function(n){I.add(t(n,O,S,n,e,T))})):m(e)&&e.forEach((function(n,r){I.set(r,t(n,O,S,r,e,T))})),U=L?void 0:(B?N?h:f:N?C:x)(e),r(U||e,(function(n,r){U&&(n=e[r=n]),o(I,r,t(n,O,S,r,e,T))})),I)}})),So=nn(((t,e)=>{"use strict";var n=Oo();e.exports=function(t){return n(t,4)}})),Eo=on(bn()),Mo=on(xn()),To=new Error("no connection"),Io=new Error("need template source"),Lo=(new Error("no access to canvas api"),new Error("need template position")),zo=new Error("canvas undefined"),Ro=new Error("strategy undefined"),Do=new Error("promise deadline"),Uo=new Error("errAborterTriggered"),Wo=new Error("default strategy doesnt exists"),No=new Error("errSeveralNoPlacePixelResult"),Bo=new Error("Max attempts reached"),$o=class extends Mo.default{wait(t,e=5e3){return new Promise(((n,r)=>{let o=setTimeout((()=>r(Do)),e);this.once(t,(t=>{clearTimeout(o),n(t)}))}))}},Fo=class extends $o{on(t,e){return super.on(t,e)}once(t,e){return super.once(t,e)}wait(t,e){return super.wait(t,e)}off(t,e){return super.off(t,e)}emit(t,e){return void 0!==e?super.emit(t,e):super.emit(t)}},Ho=class extends Fo{constructor(t,e){super(),this.ws=null,this.url=t,e&&e.reconnectDelay&&this.on(1,(t=>{t.wasClean||setTimeout(!0===e.hideReconnectErrors?()=>this.connect().catch((()=>{})):()=>this.connect(),e.reconnectDelay)}))}get connected(){return null!==this.ws&&this.ws.readyState===WebSocket.OPEN}get disconnected(){return!this.connected}get connecting(){return this.ws&&this.ws.readyState===WebSocket.CONNECTING}connect(){return new Promise(((t,e)=>{(this.ws?.readyState===WebSocket.CONNECTING||this.ws?.readyState===WebSocket.OPEN)&&e(new Error("try connect when websocket is OPEN or CONNECTING"));let n=!1;this.ws=new WebSocket(this.url),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.emit(0),n=!0,t()},this.ws.onclose=t=>{this.emit(1,t),n||e(t)},this.ws.onerror=t=>{this.emit(2,t)},this.ws.onmessage=({data:t})=>{"string"==typeof t?this.emit(3,t):this.emit(4,t)}}))}async disconnect(){this.ws&&(this.ws.close(),await this.wait(1),this.ws=null)}send(t){if(null===this.ws||this.disconnected)throw To;this.ws.send(t)}},Go=class t{constructor(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}get width(){return this.x2-this.x1}set width(t){this.x2=this.x1+t}get height(){return this.y2-this.y1}set height(t){this.y2=this.y1+t}get localCenter(){return[this.width/2,this.height/2]}get center(){return[(this.x1+this.x2)/2,(this.y1+this.y2)/2]}in(t,e){return this.x1<=t&&t<this.x2&&this.y1<=e&&e<this.y2}localIn(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height}toArray(){return[this.x1,this.y1,this.x2,this.y2]}moveY(t){this.move(this.x1,t)}moveX(t){this.move(t,this.y1)}move(t,e){let n=this.width,r=this.height;this.x1=t,this.y1=e,this.width=n,this.height=r}copy(){return new t(this.x1,this.y1,this.x2,this.y2)}},Vo=class{constructor(t=6e4){this.triggered=!1,this.resolve=()=>{},this.timeout=setTimeout((()=>this.destroy()),t),this.promise=new Promise((t=>this.resolve=t))}abort(){this.resolve(Uo),clearTimeout(this.timeout),this.triggered=!0}destroy(){this.resolve(),clearTimeout(this.timeout)}},qo=class{constructor(t,e){this.build=t,this.onerror=e}#t=null;#e=null;get ready(){return null!==this.#t&&!(this.#t instanceof Promise)}async clear(){let t;return this.#t instanceof Promise&&(t=this.#t.then((t=>{if(t&&"destroy"in t)return t.destroy()})).then((()=>{})),this.#t=null,this.#e?.abort(),this.#e=null),null!==this.#t&&(this.#t=null),t||Promise.resolve()}get(){return null===this.#t?(this.#e=new Vo,this.#t=Promise.any([this.build().then((t=>this.#t=t)).catch((t=>(this.onerror?.(t),null))),this.#e.promise.then((()=>null))]),this.#t):this.#t instanceof Promise?this.#t:Promise.resolve(this.#t)}getExists(){return Promise.resolve(this.#t)}now(){return null===this.#t||this.#t instanceof Promise?null:this.#t}},Ko="black-and-red.space",Yo="wss://"+Ko+"/ws",Zo="https://boosty.to/touchedbydarkness",Xo="https://discord.gg/VyfVmD2nhZ",Qo="https://github.com/TouchedByDarkness",Jo=["From Void with love","Made in Void","From Void to all","Let's all love void"],ti="darkness_bot",ei=class{constructor(){this.updatedAt=0,this.cooldown=0}update(t){this.cooldown=t,this.updatedAt=Date.now()}get(){return Math.max(0,this.cooldown-(Date.now()-this.updatedAt))}},ni=class{constructor(){this.timer=new ei}get chunkSize(){return this.info.chunkWidth*this.info.chunkHeight}getChunksCoords(t,e,n,r){t=Math.floor((t+this.info.worldWidth/2)/this.info.chunkWidth),e=Math.floor((e+this.info.worldHeight/2)/this.info.chunkHeight),n=Math.floor((n-1+this.info.worldWidth/2)/this.info.chunkWidth),r=Math.floor((r-1+this.info.worldHeight/2)/this.info.chunkHeight);let o=[];for(let i=t;i<=n;i++)for(let t=e;t<=r;t++)o.push([i,t]);return o}toTiled(t,e){return t+=this.info.worldWidth>>1,e+=this.info.worldHeight>>1,[Math.floor(t/this.info.chunkWidth),Math.floor(e/this.info.chunkHeight),e%this.info.chunkHeight*this.info.chunkWidth+t%this.info.chunkWidth]}toWorld(t,e,n){return[t*this.info.chunkWidth-(this.info.worldWidth>>1)+n%this.info.chunkWidth,e*this.info.chunkHeight-(this.info.worldHeight>>1)+Math.floor(n/this.info.chunkWidth)]}},ri=class{constructor(){this.dict=new Map}get(t,e){return this.dict.get(this.coordsToIndex(t,e))}delete(t,e){return this.dict.delete(this.coordsToIndex(t,e))}has(t,e){return this.dict.has(this.coordsToIndex(t,e))}set(t,e,n){this.dict.set(this.coordsToIndex(e,n),t)}clear(){this.dict.clear()}coordsToIndex(t,e){return e.toString()+"_"+t.toString()}},oi=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}set(t,e){this.data[t]=e}},ii={palette:{offset:0,colors:[]},chunkWidth:0,chunkHeight:0,worldWidth:0,worldHeight:0,haveStack:!1,stack:0,minCd:0,maxCd:0,borders:new Go(0,0,0,0)},si=class{constructor(t,e){this.offset=t,this.colors=e,this.monochromes=this.colors.map((t=>t.reduce(((t,e)=>t+e))/3)),this.rgbToIdDict=Object.fromEntries(this.colors.map(((t,e)=>[t.toString(),e]))),this.sameColorIds=Object.fromEntries(this.colors.map(((t,e)=>[e,this.colors.findIndex(((n,r)=>e!==r&&t.every(((t,e)=>t===n[e]))))])).filter((([,t])=>-1!==t)))}monochrome(t){return this.monochromes[t]}sameColors(t,e){return t===e||this.sameColorIds[t]===e}same(t,e,n=15){return Math.abs(t[0]-e[0])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[2]-e[2])<n}strictSame(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}hasRGB(t){return null!==this.rgbToId(t)}hasId(t){return!!this.idToRGB(t)}idToRGB(t){return this.colors[t]}convert(t,e,n){let r=this.rgbToId([t,e,n]);if(null!==r)return r;let o=0,i=1/0;for(let r=this.offset;r!==this.colors.length;r++){let s=this.colors[r],a=w(s[0]-t)+w(s[1]-e)+w(s[2]-n);a<i&&(i=a,o=r)}return o}rgbToId(t){return this.rgbToIdDict[t.toString()]??null}},ai=(t,e)=>t[0]===e[0]&&t[1]===e[1],ui=(t,e)=>t.some((t=>ai(t,e))),ci=on(Cn()),li=class{constructor(t){this.low=t,this.workspaces=[],this.chunks=[];let{offset:e,colors:n}=this.info.palette;this.palette=new si(e,n)}get info(){return this.low.info}on(t,e){return this.low.emitter.on(t,e)}emit(t,e){return this.low.emitter.emit(t,e)}wait(t){return this.low.emitter.wait(t)}getCaptcha(){return this.low.getCaptcha()}sendAnswer(t){return this.low.sendAnswer(t)}getCooldown(){return this.low.timer.get()}pixelsCanPlace(){let t=Math.max(this.info.minCd,this.info.maxCd);return Math.floor((this.info.stack-this.getCooldown())/t)}get(t,e){return this.low.get(t,e)}compare(t){let e=this.get(t.x,t.y);return this.palette.sameColors(e,t.id)}predictCooldown(t,e){return this.low.predictCooldown(t,e)}createWorkspace(t,e,n,r){return{x1:t,y1:e,x2:n,y2:r,chunks:this.low.getChunksCoords(t,e,n,r)}}hasWorkspace(t){return this.workspaces.some((e=>e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2))}async changeWorkspace(t){this.clearWorkspaces(),await this.addWorkspace(t)}async addWorkspace(t){let e=t.chunks.filter((t=>!ui(this.chunks,t)));await this.low.prepareChunks(e),this.chunks.push(...e),this.workspaces.push(t)}clearWorkspaces(){this.chunks.length&&this.low.dropChunks(this.chunks),this.chunks=[]}placePixels(t){return this.low.placePixels(t)}async smartPlace(t,e){for(t=t.slice(0);;){if(e?.triggered)throw Uo;let n=t.shift();if(!n)break;await this.low.placePixels([n]);let r=(0,ci.head)(t);r&&await this.waitBecausePixelsDistance(n,r)}e&&e.destroy()}async download(t,e,n,r){await this.low.prepareChunks(this.low.getChunksCoords(t,e,n,r));let o=n-t,i=r-e,s=H(o,i),a=s.getImageData(0,0,o,i),u=a.data;for(let o=e,i=0;o!==r;o++)for(let e=t;e!==n;e++,i+=4){let t=this.palette.idToRGB(this.get(e,o));void 0!==t?(u.set(t,i),u[3|i]=255):console.log("wrong id",this.get(e,o),"at",e,o)}s.putImageData(a,0,0);let c=new Date,l=c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear()+"_"+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();I(s.canvas,`${l}_${t}_${e}_${n}_${r}`)}destroy(){return this.low.destroy()}waitBecausePixelsDistance(t,e){let n,r=Math.sqrt(w(t.x-e.x)+w(t.y-e.y));return n=1===r?50:r<1.5?100:125*r,m(Math.min(.75*this.info.minCd,n))}},fi=on(In()),hi=0,pi=1,di=2,gi=3,yi=4,vi=5,wi=6,mi=7,_i=8,bi=9,xi=10,Ci=11,ji=12,ki=13,Ai=14,Pi={errNoPlacePixelResult:new Error("errNoPlacePixelResult"),errMustAuth:new Error("errMustAuth"),errTooLowScore:new Error("errTooLowScore"),errPixelProtected:new Error("errPixelProtected"),errFullStack:new Error("errFullStack"),errCaptcha:new Error("errCaptcha"),errYouAreProxy:new Error("errYouAreProxy"),errCanvasAPIInteraction:new Error("errCanvasAPIInteraction"),errUnknownError:new Error("errUnknownError"),errAPIIsntReady:new Error("errAPIIsntReady"),errResponseIsntOk:new Error('response isnt "ok"'),errResponseStatusIsnt200:new Error("response status isnt 200"),errParallelPlace:new Error("errParallelPlace"),errYouAreBanned:new Error("errYouAreBanned")},Oi={errCaptchaTimeout:new Error("You took too long, try again."),errInvalidSolution:new Error("No or invalid captcha text")},Si=t=>{let{size:e}=t;return{palette:{offset:t.cli,colors:t.colors},chunkWidth:256,chunkHeight:256,worldWidth:e,worldHeight:e,haveStack:!0,stack:t.cds,minCd:t.bcd,maxCd:t.pcd,borders:new Go(-e/2,-e/2,e/2,e/2)}},Ei=(()=>{if(!unsafeWindow?.ssv?.shard||"fuckyouarkeros.fun"===unsafeWindow.location.host)return"";let t=window.location.host.split(".");return t.length>2&&t.shift(),`${unsafeWindow.ssv.shard}.${t.join(".")}`})(),Mi=Ei&&`${unsafeWindow.location.protocol}//${Ei}`,Ti=t=>t[0]<<8|t[1],Ii=t=>[t>>8,255&t],Li={REG_CANVAS_OP:160,REG_CHUNK_OP:161,DEREG_CHUNK_OP:162,REG_MCHUNKS_OP:163,DEREG_MCHUNKS_OP:164,CHANGE_ME_OP:166,ONLINE_COUNTER_OP:167,PING_OP:176,PIXEL_UPDATE_OP:193,COOLDOWN_OP:194,PIXEL_RETURN_OP:195,CHUNK_UPDATE_MB_OP:196,PIXEL_UPDATE_MB_OP:197,CAPTCHA_RETURN_OP:198},zi={...Li,PIXEL_UPDATE_OP:145},Ri=new class extends Fo{constructor(){super(...arguments),this.call=this.emit}},Di=class{goto(t,e,n){let r=location.hash.split(",").filter(Boolean)[0];location.hash&&(location.hash=[r,~~t,~~e].join(",")+(n?","+~~n:""))}},Ui=async()=>new Di,Wi=t(zi),Ni=()=>{setInterval((()=>{let t=g("img[alt=CAPTCHA]");!t||t.hasAttribute("handled")||(t.style.filter="invert(1) "+"sepia(1) ".repeat(10)+"grayscale(1)",t.setAttribute("handled",""))}),250),e()},Bi=t(Li),$i=t(Li),Fi={...Li,TIMESTAMP_OP:168},Hi=t=>{let e=new ArrayBuffer(5),n=new DataView(e);return n.setUint8(0,Fi.TIMESTAMP_OP),n.setInt32(1,+t.getTime().toString().slice(0,5)),e},Gi=class extends(t(Fi)){constructor(t){console.log("pixelya api constructor"),super(t),this.ws.on(0,(()=>{console.log("send time"),this.ws.send(Hi(new Date))}))}},Vi=t(Li),qi=(0,Eo.default)(e),Ki=(0,Eo.default)(Ni),Yi=(0,Eo.default)(e),Zi=(0,Eo.default)(e),Xi=(0,Eo.default)(e),Qi=t=>{let e=[];return t.iterateOverVisible(((t,n)=>e.push([t,n]))),e},Ji={random:t=>x(Qi(t)),line_upToDown:Qi,line_downToUp:t=>Qi(t).reverse(),line_leftToRight:t=>j(Qi(t),(t=>t[0])),line_RightToLeft:t=>k(Qi(t),(t=>t[0])),circle_inToOut:t=>{let e=t.localCenter,n=Math.floor($(e,[t.width,t.height]))+1,r=new Array(n).fill(0).map((()=>[]));return t.iterateOverVisible(((t,n)=>{let o=[t,n],i=Math.trunc($(e,o));r[i].push(o)})),r.map(x).flat()},circle_outToIn:t=>Ji.circle_inToOut(t).reverse(),throughLine:t=>{let e=t.size;return k(Qi(t),(t=>1&t[1]?t[0]+t[1]:t[0]+t[1]-e))},chess_1x1:t=>{let e=t.size;return k(Qi(t),(t=>(1&t[0])!=(1&t[1])?t[1]+e:t[1]))},chess_2x2:t=>{let e=t.size;return k(Qi(t),(t=>(3&t[0]^3&t[1])<=1?t[1]-e:t[1]))},chess_3x3:t=>{let e=t.size;return k(Qi(t),(t=>(7&t[0]^7&t[1])<=3?t[1]-e:t[1]))},chessCorner_1x1:t=>{let e=t.size;return k(Qi(t),(t=>(1&t[0])!=(1&t[1])?t[0]+t[1]+e:t[0]+t[1]))},woyken:t=>{let e=t.size,[n,r]=t.localCenter;return j(Qi(t),(o=>{let i=o[0],s=o[1];if(0!==i&&0!==s&&i!==t.width-1&&s!==t.height-1&&t.isOutline(i,s))return-e+s;if((i+s)%8==0||Math.abs(i-s)%8==0)return s;let a=C(i-n)+C(s-r);return e-Math.trunc(Math.sqrt(a))}))},colorByColor:t=>{let e=Qi(t),n={};e.forEach((e=>{let r=t.get(e[0],e[1]),o=n[r];o?o.push(e):n[r]=[e]})),e=new Array(e.length);let r=t.size,o=[t.width/2,t.height/2],i=0;return Object.values(n).forEach((t=>{k(t,(t=>r-Math.trunc(Math.sqrt(C(t[0]-o[0])+C(t[1]-o[1]))))),t.forEach((t=>e[i++]=t))})),e},squareBySquare:t=>{let e=[];for(let n=0;n<t.height;n+=8)for(let r=0;r<t.width;r+=8)for(let o=n;o!==n+8&&!(o>=t.height);o++)for(let n=r;n!==r+8;n++)n>=t.width||t.isTransparent(n,o)||e.push([n,o]);return e},zipper:t=>k(Qi(t),(t=>Math.trunc(Math.sqrt(t[0]+t[1])))),zipper2:t=>k(Qi(t),(e=>Math.trunc(Math.sqrt(e[0]+e[1]-3*t.get(e[0],e[1]))))),rhombLine:t=>{let[e,n]=t.localCenter;return Qi(t).sort(((t,r)=>Math.sin(Math.abs(t[0]-e)+Math.abs(t[1]-n))-Math.sin(Math.abs(r[0]-e)+Math.abs(r[1]-n))))},rhombLine2:t=>{let[e,n]=t.localCenter;return Qi(t).sort(((t,r)=>Math.tan(Math.abs(t[0]-e)+Math.abs(t[1]-n))-Math.tan(Math.abs(r[0]-e)+Math.abs(r[1]-n))))},alienRandom:t=>Qi(t).sort(((t,e)=>Math.tan(w(t[0]-e[1])-w(t[1]-e[0])))),alien1:t=>k(Qi(t),(t=>Math.tan(w(t[0])+w(t[1])))),alien2:t=>k(Qi(t),(t=>Math.exp(Math.cos(t[0]*t[1])))),alien3:t=>{let e=new Map;return k(Qi(t),(t=>{let n=e.get(t[0]);return void 0===n&&(n=Math.pow(7,t[0]*Math.sin(t[0])),e.set(t[0],n)),n-Math.pow(t[0],7*Math.sin(t[1]))}))},alien4:t=>{let e=new Map,n=new Map;return k(Qi(t),(t=>{let r=e.get(t[0]);void 0===r&&(r=Math.pow(Math.sin(t[0]),t[0]),e.set(t[0],r));let o=n.get(t[1]);return void 0===o&&(o=Math.pow(Math.cos(t[1]),t[1]),n.set(t[1],o)),r+o}))},complex:t=>{let[e,i]=function(t,e){let n=t.width-1,r=t.height-1,o=[],i=[];return e.forEach((e=>{0===e[0]||0===e[1]||e[0]===n||e[1]===r||t.isOutline(e[0],e[1])?o.push(e):i.push(e)})),[o,i]}(t,Qi(t)),s=Object.values(n(t,i)),a=j(Object.values(n(t,e)),(t=>t.length));e=i=[];let u=s.map(r),c=[],l=[];for(let e=0;e!==a.length;e++){let n=a[e],i=r(n),f=t.get(n[0][0],n[0][1]);l.push(o(x(n)));let h=-1,p=1/0;if(s.forEach(((e,n)=>{let r=t.get(e[0][0],e[0][1]);if(f!==r||c.includes(n))return;let o=$(i,u[n]);o<p&&(p=o,h=n)})),-1===h){if(c.length===s.length){l.push(...a.slice(e+1).map(o));break}for(;-1===h;)h=Math.trunc(Math.random()*s.length),c.includes(h)&&(h=-1)}else c.push(h),l.push(o(s[h]))}return[].concat(...l)},binary:t=>k(Qi(t),(t=>t[0]&t[1])),near:t=>o(x(Qi(t)))},ts=Ji,es=new Error("template unloaded"),ns=new Error("template unquantized"),rs=class t extends Go{constructor(e){super(e.x,e.y,e.x+(e.width??0),e.y+(e.height??0)),this.readyState=t.UNLOADED,this.ctx=null,this.ids=new Uint8Array(0),this.name=e.name}static{this.UNLOADED=0}static{this.LOADING=1}static{this.LOADED=2}static{this.QUANTIZED=3}get canvas(){return this.ctx?.canvas}get size(){return this.width*this.height}get(t,e){return this.ids[t+e*this.width]}isTransparent(t,e){return 255===this.get(t,e)}iterateOverVisible(t){for(let e=0,n=0;e!==this.height;e++)for(let r=0;r!==this.width;r++,n++){let o=this.ids[n];255!==o&&t(r,e,o)}}countTransparent(){if(this.readyState===t.QUANTIZED){let t=0;for(let e of this.ids)255===e&&t++;return t}throw ns}isOutline(t,e){let n=this.get(t,e);return this.get(t-1,e-1)!==n||this.get(t-1,e)!==n||this.get(t-1,e+1)!==n||this.get(t,e-1)!==n||this.get(t,e+1)!==n||this.get(t+1,e-1)!==n||this.get(t+1,e)!==n||this.get(t+1,e+1)!==n}intersects(t,e,n,r){return this.x1<n&&this.x2>t&&this.y1<r&&this.y2>e}async load(e){this.readyState=t.LOADING;let n=await y(e);return this.width=n.width,this.height=n.height,this.ctx=H(this.width,this.height),this.ctx.drawImage(n,0,0),this.readyState=t.LOADED,this}quantize(e){if(!this.ctx)throw es;let n=this.ctx.getImageData(0,0,this.width,this.height),r=n.data;this.ids=new Uint8Array(r.length>>2);let o=new Map;for(let t=0;t!==r.length;t+=4)if(0===r[3|t])this.ids[t>>2]=255,r[0|t]=r[1|t]=r[2|t]=r[3|t]=0;else{let n=r[0|t]<<16|r[1|t]<<8|r[2|t],i=o.get(n);i||(i=e.convert(n>>16,n>>8&255,255&n),o.set(n,i)),this.ids[t>>2]=i;let s=e.idToRGB(i);r[0|t]=s[0],r[1|t]=s[1],r[2|t]=s[2],r[3|t]=255}return this.ctx.putImageData(n,0,0),this.readyState=t.QUANTIZED,this}},os=class{constructor(t,e){this.api=t,this.template=e,this.template.readyState===rs.LOADED&&this.template.quantize(this.api.palette)}get width(){return this.template.width}get height(){return this.template.height}_countErrors(){let t=this.api.palette,e=0,n=0;return this.template.iterateOverVisible(((r,o,i)=>{let s=r+this.template.x1,a=o+this.template.y1,u=this.api.get(s,a);t.sameColors(i,u)||(e++,n+=this.api.predictCooldown(s,a))})),{errors:e,timeToEnd:n}}checkTarget(t){return!this.api.palette.sameColors(this.template.get(t[0],t[1]),this.api.get(t[0]+this.template.x1,t[1]+this.template.y1))}handleTarget(t){let e=this.template.get(t[0],t[1]),n=this.api.get(t[0]+this.template.x1,t[1]+this.template.y1);if(!this.api.palette.sameColors(e,n))return{x:t[0]+this.template.x1,y:t[1]+this.template.y1,id:e}}targetToPixel(t){return{x:t[0]+this.template.x1,y:t[1]+this.template.y1,id:this.template.get(t[0],t[1])}}pixelToTarget(t){return[t.x-this.template.x1,t.y-this.template.y1]}},is=class{constructor(t){this.max=t,this.value=0}get(){return this.value}inc(t=1){for(let e=0;e!==t;e++)this.value++,this.value===this.max&&(this.value=0);return this.value}deinc(){return this.value--,-1===this.value&&(this.value=this.max-1),this.value}},ss=class extends os{constructor(t,e,n){super(t,e),this.targets=n(this.template),this.counter=new is(this.targets.length)}nexts(t){let e=this.targets.length,n=[],r=this.handleTarget(this.targets[this.counter.get()]);if(r&&n.push(r)===t)return n;for(let r=0;r!==e&&0!==this.counter.get();r++){let e=this.handleTarget(this.targets[this.counter.deinc()]);if(!e)break;if(n.push(e)===t)return n}for(let r=0;r!==e;r++){let e=this.handleTarget(this.targets[this.counter.inc()]);if(e&&n.push(e)===t)return n}return n}countErrors(){return this._countErrors()}countTargets(){return this.targets.length}},as={};for(let t in ts)as[t]=(e,n)=>new ss(e,n,ts[t]);if(p=(t,e,n)=>"string"==typeof n?n in as?as[n](t,e):void 0:new ss(t,e,n),d=(t,e)=>{"Notification"in window&&("granted"===Notification.permission?new Notification(t,e):"denied"!==Notification.permission&&Notification.requestPermission((n=>"granted"===n&&new Notification(t,e))))},g=t=>document.querySelector(t),y=t=>new Promise(((e,n)=>{let r=new Image;r.crossOrigin="",r.onload=()=>e(r),r.onerror=n,r.src=t})),v=t=>t.split("").join("‎"),w=t=>t*t,m=t=>new Promise((e=>setTimeout(e,t))),_=new RegExp(/-?\d+/g),b=t=>t.match(_)?.map(parseFloat),x=t=>{for(let e=t.length-1;-1!==e;e--){let n=Math.trunc(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t},C=t=>w(Math.floor(t)),j=(t,e)=>t.sort(((t,n)=>e(t)>e(n)?1:-1)),k=(t,e)=>t.sort(((t,n)=>e(t)<e(n)?1:-1)),A=t=>{let e=0;for(let n=0;n!==t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e},P=async()=>{if(/.*:\/\/.*(pixelplanet)|(fuckyouarkeros)\.fun.*/.test(location.origin)||/localhost/.test(location.origin)){let t=location.hash.match(/#[a-z]/g),e=t?t[0][1]:"d",n=await Wi.getCanvasIdByCanvasIdent(e);return qi(),Promise.all([Wi.build(n),Ui()])}if(/.*:\/\/.*pixmap\.fun.*/.test(location.origin)){let t=location.hash.match(/#[a-z]/g),e=t?t[0][1]:"d",n=await Bi.getCanvasIdByCanvasIdent(e);return Ki(),Promise.all([Bi.build(n),Ui()])}if(/.*:\/\/.*chillpixel\.xyz.*/.test(location.origin)){let t=location.hash.match(/#[a-z]/g),e=t?t[0][1]:"d",n=await $i.getCanvasIdByCanvasIdent(e);return Yi(),Promise.all([$i.build(n),Ui()])}if(/.*:\/\/.*pixelya\.fun.*/.test(location.origin)){let t=location.hash.match(/#[a-z]/g),e=t?t[0][1]:"d",n=await Gi.getCanvasIdByCanvasIdent(e);return Zi(),Promise.all([Gi.build(n),Ui()])}if(/.*:\/\/.*pixuniverse\.fun.*/.test(location.origin)){let t=location.hash.match(/#[a-z]/g),e=t?t[0][1]:"d",n=await Vi.getCanvasIdByCanvasIdent(e);return Xi(),Promise.all([Vi.build(n),Ui()])}throw zo},O=(t,e)=>t+Math.floor(Math.random()*(e-t)),S=t=>t[t.length-1],E=(t,e,n)=>{let r=0,o=0,i=0,s=0,a=t=>T(0,t,unsafeWindow.innerWidth-e.offsetWidth),u=t=>T(0,t,unsafeWindow.innerHeight-e.offsetHeight);e.style.top=u(e.offsetTop)+"px",e.style.left=a(e.offsetLeft)+"px";let c=t=>{t.preventDefault(),r=i-t.clientX,o=s-t.clientY,i=t.clientX,s=t.clientY,e.style.top=u(e.offsetTop-o)+"px",e.style.left=a(e.offsetLeft-r)+"px";let c=b(e.style.left),l=b(e.style.top);c&&l&&n?.(c[0],l[0])},l=()=>{window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",c)};t.addEventListener("mousedown",(t=>{t.preventDefault(),i=t.clientX,s=t.clientY,window.addEventListener("mouseup",l),window.addEventListener("mousemove",c)}))},M=null,document.addEventListener("keydown",(t=>{M&&(t.stopPropagation(),M(t))}),!0),M=null,T=(t,e,n)=>Math.max(t,Math.min(e,n)),I=(t,e="unnamed")=>{let n=document.createElement("a");n.setAttribute("href",t.toDataURL("image/png")),n.setAttribute("download",e),n.click()},L=(t,e="unnamed")=>{let n=document.createElement("a");n.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.click()},z=t=>{if(!(t instanceof ss))return;let{width:e,height:n,targets:r}=t,o=H(e,n),i=o.getImageData(0,0,e,n),{data:s}=i;return r.forEach(((t,n)=>{let o=Math.floor((r.length-n)/r.length*255),i=t[1]*e+t[0]<<2;s[0|i]=o,s[3|i]=255})),o.putImageData(i,0,0),o},R=t=>{if(!(t instanceof ss))return;let{width:e,height:n,targets:r}=t,o=new Array(r.length<<1),i=new Array(r.length);r.forEach(((e,n)=>{o[n<<1]=e[0].toString(),o[n<<1|1]=e[1].toString(),i[n]=t.template.get(e[0],e[1]).toString()}));let s=t.api.palette.colors.flat();return`\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t\t<body style="background: black;">\n\t\t\t\t<div style="position: absolute; top: 0; left: 0; height: 100%">\n\t\t\t\t\t<canvas style="height: 100%; border: 1px red solid; background: rgba(64, 64, 64, 0.3);"></canvas>\n\t\t\t\t</div>\n\t\t\t\t<script>\n\t\t\t\t\tconst width = ${e};\n\t\t\t\t\tconst height = ${n};\n\t\t\t\t\tconst ctx = document.querySelector('canvas').getContext('2d');\n\t\t\t\t\tctx.canvas.width = width;\n\t\t\t\t\tctx.canvas.height = height;\n\t\t\t\t\tctx.clearRect(0, 0, width, height);\n\n\t\t\t\t\tctx.mozImageSmoothingEnabled = false;\n\t\t\t\t\tctx.webkitImageSmoothingEnabled = false;\n\t\t\t\t\tctx.msImageSmoothingEnabled = false;\n\t\t\t\t\tctx.imageSmoothingEnabled = false;\n\n\t\t\t\t\tconst delay = 100;\n\t\t\t\t\tconst pixelsAtOnce = 10;\n\n\t\t\t\t\tconst targets = new Uint16Array([${o.join(",")}]);\n\t\t\t\t\tconst colors = new Uint8Array([${i.join(",")}]);\n\t\t\t\t\tconst palette = new Uint8Array([${s.join(",")}]);\n\n\t\t\t\t\t(async () => {\n\t\t\t\t\t\tlet prevClrId = -1;\n\t\t\t\t\t\tfor (let i = 0; i !== targets.length; i+=2) {\n\t\t\t\t\t\t\tconst id = colors[i >> 1];\n\t\t\t\t\t\t\tif (prevClrId !== id) {\n\t\t\t\t\t\t\t\tconst j = id * 3;\n\t\t\t\t\t\t\t\tctx.fillStyle = 'rgb(' + [palette[j], palette[j + 1], palette[j + 2]] + ')';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.fillRect(targets[i], targets[i | 1], 1, 1)\n\t\t\t\t\t\t\tconst a = (i >> 1) / pixelsAtOnce;\n\t\t\t\t\t\t\tif (~~a === a) {\n\t\t\t\t\t\t\t\tawait new Promise(r => setTimeout(r, delay));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})();\n\t\t\t\t<\/script>\n\t\t\t</body>\n\t\t</html>`},D=async({delay:t,func:e,maxAttempts:n,onerror:r})=>{let o=0;for(;o<n;)try{return await e()}catch(e){o++,r?.(e),await m(t)}throw Bo},U=t=>new Promise((e=>{let n=document.createElement("input");n.type="file",t&&(n.accept=t),n.addEventListener("change",(()=>e(n.files?.length?n.files[0]:null))),n.click()})),W=()=>"image/*",N=()=>U(W()),B=t=>t[~~(Math.random()*t.length)],$=(t,e)=>w(t[0]-e[0])+w(t[1]-e[1]),F=t=>{let e=new Uint8Array(t.length);for(let n=0;n!==t.length;n++)e[n]=t.charCodeAt(n);return e},H=(t,e)=>{let n=document.createElement("canvas").getContext("2d");return n.canvas.width=t,n.canvas.height=e,n},G=(...t)=>fetch(...t).then((t=>t.json())),V=on(Ln()),q=class extends Fo{constructor(t,e){super(),this.ws=new Ho(t,{reconnectDelay:3e3,hideReconnectErrors:!1,...e}),this.ws.on(0,(()=>console.log("connected to void server"))),this.ws.on(1,(()=>console.log("disconnected from void server"))),this.ws.on(3,(t=>{let e=F((0,V.decompressFromBase64)(t)),n=e[0],r=e.slice(1).buffer;0===n?this.emit(0,this.deserializeOnlinePacket(r)):console.warn(`undefined void server opcode "${n}"`)})),this.ws.connect()}deserializeOnlinePacket(t){let e=new Uint8Array(t);return{connections:e[0]|e[1]<<8,users:e[2]|e[3]<<8}}},K="zipper2",Y={smartPlace:!0,showErrors:!0},Z=!0,X=!0,Q=[16,16],J=1,tt=3,et={},rt="http://www.w3.org/2000/svg",ot=t=>t,it=(nt=[]).map,st=Array.isArray,at=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout,ut=t=>{var e,n,r="";if("string"==typeof t)return t;if(st(t))for(e=0;e<t.length;e++)(n=ut(t[e]))&&(r+=(r&&" ")+n);else for(e in t)t[e]&&(r+=(r&&" ")+e);return r},ct=(t,e)=>{for(var n in{...t,...e})if("function"==typeof(st(t[n])?t[n][0]:t[n]))e[n]=t[n];else if(t[n]!==e[n])return!0},lt=(t,e=nt,n)=>{for(var r,o,i=[],s=0;s<t.length||s<e.length;s++)r=t[s],o=e[s],i.push(o&&!0!==o?!r||o[0]!==r[0]||ct(o[1],r[1])?[o[0],o[1],(r&&r[2](),o[0](n,o[1]))]:r:r&&r[2]());return i},ft=t=>null==t?t:t.key,ht=(t,e,n,r,o,i)=>{if("style"===e)for(var s in{...n,...r})n=null==r||null==r[s]?"":r[s],"-"===s[0]?t[e].setProperty(s,n):t[e][s]=n;else"o"===e[0]&&"n"===e[1]?((t.events||(t.events={}))[e=e.slice(2)]=r)?n||t.addEventListener(e,o):t.removeEventListener(e,o):!i&&"list"!==e&&"form"!==e&&e in t?t[e]=r??"":null==r||!1===r?t.removeAttribute(e):t.setAttribute(e,r)},pt=(t,e,n)=>{var r,o,i=t.props,s=t.type===tt?document.createTextNode(t.tag):(n=n||"svg"===t.tag)?document.createElementNS(rt,t.tag,i.is&&i):document.createElement(t.tag,i.is&&i);for(r in i)ht(s,r,null,i[r],e,n);for(o=0;o<t.children.length;o++)s.appendChild(pt(t.children[o]=yt(t.children[o]),e,n));return t.node=s},dt=(t,e,n,r,o,i)=>{var s,a,u,c,l,f,h,p,d,g,y,v,w,m,_;if(n!==r)if(null!=n&&n.type===tt&&r.type===tt)n.tag!==r.tag&&(e.nodeValue=r.tag);else if(null==n||n.tag!==r.tag)e=t.insertBefore(pt(r=yt(r),o,i),e),null!=n&&t.removeChild(n.node);else{for(w in l=n.props,f=r.props,h=n.children,p=r.children,d=0,g=0,y=h.length-1,v=p.length-1,i=i||"svg"===r.tag,{...l,...f})("value"===w||"selected"===w||"checked"===w?e[w]:l[w])!==f[w]&&ht(e,w,l[w],f[w],o,i);for(;g<=v&&d<=y&&null!=(u=ft(h[d]))&&u===ft(p[g]);)dt(e,h[d].node,h[d],p[g]=yt(p[g++],h[d++]),o,i);for(;g<=v&&d<=y&&null!=(u=ft(h[y]))&&u===ft(p[v]);)dt(e,h[y].node,h[y],p[v]=yt(p[v--],h[y--]),o,i);if(d>y)for(;g<=v;)e.insertBefore(pt(p[g]=yt(p[g++]),o,i),(a=h[d])&&a.node);else if(g>v)for(;d<=y;)e.removeChild(h[d++].node);else{for(m={},_={},w=d;w<=y;w++)null!=(u=h[w].key)&&(m[u]=h[w]);for(;g<=v;)u=ft(a=h[d]),c=ft(p[g]=yt(p[g],a)),_[u]||null!=c&&c===ft(h[d+1])?(null==u&&e.removeChild(a.node),d++):null==c||n.type===J?(null==u&&(dt(e,a&&a.node,a,p[g],o,i),g++),d++):(u===c?(dt(e,a.node,a,p[g],o,i),_[c]=!0,d++):null!=(s=m[c])?(dt(e,e.insertBefore(s.node,a&&a.node),s,p[g],o,i),_[c]=!0):dt(e,a&&a.node,null,p[g],o,i),g++);for(;d<=y;)null==ft(a=h[d++])&&e.removeChild(a.node);for(w in m)null==_[w]&&e.removeChild(m[w].node)}}return r.node=e},gt=(t,e)=>{var n;for(n in t)if(t[n]!==e[n])return!0;for(n in e)if(t[n]!==e[n])return!0},yt=(t,e)=>!0!==t&&!1!==t&&t?"function"==typeof t.tag?((!e||null==e.memo||gt(e.memo,t.memo))&&((e=t.tag(t.memo)).memo=t.memo),e):t:mt(""),vt=t=>t.nodeType===tt?mt(t.nodeValue,t):wt(t.nodeName.toLowerCase(),et,it.call(t.childNodes,vt),J,t),wt=(t,{key:e,...n},r,o,i)=>({tag:t,props:n,key:e,children:r,type:o,node:i}),mt=(t,e)=>wt(t,et,nt,tt,e),_t=(t,{class:e,...n},r=nt)=>wt(t,{...n,...e?{class:ut(e)}:et},st(r)?r:[r]),bt=({node:t,view:e,subscriptions:n,dispatch:r=ot,init:o=et})=>{var i,s,a=t&&vt(t),u=[],c=t=>{i!==t&&(null==(i=t)&&(r=n=l=ot),n&&(u=lt(u,n(i),r)),e&&!s&&at(l,s=!0))},l=()=>t=dt(t.parentNode,t,a,a=e(i),f,s=!1),f=function(t){r(this.events[t.type],t)};return(r=r(((t,e)=>"function"==typeof t?r(t(i,e)):st(t)?"function"==typeof t[0]?r(t[0],t[1]):t.slice(1).map((t=>t&&!0!==t&&(t[0]||t)(r,t[1])),c(t[0])):c(t))))(o),r},Ct="green",kt={width:"100%"},At={fontFamily:"monospace"},Pt={cursor:"pointer"},Ot={display:"flex",alignItems:"center",justifyContent:"content"},St=t=>({width:`${t}px`,height:`${t}px`}),Et={color:"red",position:"absolute",fontWeight:"bolder",fontFamily:"system-ui",fontSize:"14px",width:"400px",background:jt="rgba(0, 0, 0, 0.9)",padding:"4px",border:"1px solid",borderColor:xt="darkred",display:"flex",flexDirection:"column",gap:"2px"},Mt={fontWeight:"bold",fontSize:"18px"},Tt={cursor:"move",display:"flex",justifyContent:"space-between"},It={display:"inline-flex",color:"red",columnGap:"5px"},Lt={background:"red",height:"1px",marginTop:"2px",marginBottom:"2px"},zt={display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"auto 1fr",rowGap:"6px",columnGap:"10px"},Rt={...{fontWeight:"bold",fontSize:"14px"},textTransform:"uppercase"},Dt={overflow:"hidden",paddingLeft:"5px",display:"flex",flexDirection:"column",gap:"5px"},Ut={color:"inherit",...kt,...At,fontWeight:"inherit",background:"transparent",outline:"none",padding:"1px 2px 1px 2px",margin:"0",borderRadius:"initial",border:"rgb(118,118,118) 2px inset"},Wt={display:"flex",gap:"5px",flexDirection:"row"},Nt={display:"flex",gap:"4px"},Bt={display:"flex",gap:"4px",alignItems:"center"},$t={background:"black"},Ft={background:"inherit",...kt,color:"inherit",cursor:"pointer",borderColor:xt,font:"inherit",outline:"none",padding:"0",margin:"0",borderRadius:"0"},Ht={...At,display:"inline-flex",gap:"5px",alignItems:"center"},Gt={width:"",...St(14)},Vt={lineHeight:"90%"},qt={...Pt,cursor:"pointer",display:"flex",gap:"5px",alignItems:"center"},Kt={opacity:"0.6",fontSize:"12px",lineHeight:"20px"},Yt={borderColor:xt,backgroundColor:"transparent",color:"inherit",font:"inherit",borderWidth:"1px",borderStyle:"solid",padding:"2px",cursor:"pointer",width:"fit-content"},Zt=t=>mt(v(t)),Xt=({size:t})=>({stroke:"currentColor",fill:"currentColor","stroke-width":"0",height:`${t}px`,width:`${t}px`,xmlns:"http://www.w3.org/2000/svg",role:"img"}),Qt=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 24 24",...Xt({size:e})},_t("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM13 12V16H11V12H8L12 8L16 12H13Z"})),Jt=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 15 15",...Xt({size:e})},_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M5.07451 1.82584C5.03267 1.81926 4.99014 1.81825 4.94803 1.82284C4.10683 1.91446 2.82673 2.36828 2.07115 2.77808C2.02106 2.80525 1.97621 2.84112 1.93869 2.88402C1.62502 3.24266 1.34046 3.82836 1.11706 4.38186C0.887447 4.95076 0.697293 5.55032 0.588937 5.98354C0.236232 7.39369 0.042502 9.08728 0.0174948 10.6925C0.0162429 10.7729 0.0351883 10.8523 0.0725931 10.9234C0.373679 11.496 1.02015 12.027 1.66809 12.4152C2.32332 12.8078 3.08732 13.1182 3.70385 13.1778C3.85335 13.1922 4.00098 13.1358 4.10282 13.0255C4.2572 12.8581 4.5193 12.4676 4.71745 12.1643C4.80739 12.0267 4.89157 11.8953 4.95845 11.7901C5.62023 11.9106 6.45043 11.9801 7.50002 11.9801C8.54844 11.9801 9.37796 11.9107 10.0394 11.7905C10.1062 11.8957 10.1903 12.0269 10.2801 12.1643C10.4783 12.4676 10.7404 12.8581 10.8947 13.0255C10.9966 13.1358 11.1442 13.1922 11.2937 13.1778C11.9102 13.1182 12.6742 12.8078 13.3295 12.4152C13.9774 12.027 14.6239 11.496 14.925 10.9234C14.9624 10.8523 14.9813 10.7729 14.9801 10.6925C14.9551 9.08728 14.7613 7.39369 14.4086 5.98354C14.3003 5.55032 14.1101 4.95076 13.8805 4.38186C13.6571 3.82836 13.3725 3.24266 13.0589 2.88402C13.0214 2.84112 12.9765 2.80525 12.9264 2.77808C12.1708 2.36828 10.8907 1.91446 10.0495 1.82284C10.0074 1.81825 9.96489 1.81926 9.92305 1.82584C9.71676 1.85825 9.5391 1.96458 9.40809 2.06355C9.26977 2.16804 9.1413 2.29668 9.0304 2.42682C8.86968 2.61544 8.71437 2.84488 8.61428 3.06225C8.27237 3.03501 7.90138 3.02 7.5 3.02C7.0977 3.02 6.72593 3.03508 6.38337 3.06244C6.28328 2.84501 6.12792 2.61549 5.96716 2.42682C5.85626 2.29668 5.72778 2.16804 5.58947 2.06355C5.45846 1.96458 5.2808 1.85825 5.07451 1.82584ZM11.0181 11.5382C11.0395 11.5713 11.0615 11.6051 11.0838 11.6392C11.2169 11.843 11.3487 12.0385 11.4508 12.1809C11.8475 12.0916 12.352 11.8818 12.8361 11.5917C13.3795 11.2661 13.8098 10.8918 14.0177 10.5739C13.9852 9.06758 13.7993 7.50369 13.4773 6.21648C13.38 5.82759 13.2038 5.27021 12.9903 4.74117C12.7893 4.24326 12.5753 3.82162 12.388 3.5792C11.7376 3.24219 10.7129 2.88582 10.0454 2.78987C10.0308 2.79839 10.0113 2.81102 9.98675 2.82955C9.91863 2.881 9.84018 2.95666 9.76111 3.04945C9.71959 3.09817 9.68166 3.1471 9.64768 3.19449C9.953 3.25031 10.2253 3.3171 10.4662 3.39123C11.1499 3.6016 11.6428 3.89039 11.884 4.212C12.0431 4.42408 12.0001 4.72494 11.788 4.884C11.5759 5.04306 11.2751 5.00008 11.116 4.788C11.0572 4.70961 10.8001 4.4984 10.1838 4.30877C9.58933 4.12585 8.71356 3.98 7.5 3.98C6.28644 3.98 5.41067 4.12585 4.81616 4.30877C4.19988 4.4984 3.94279 4.70961 3.884 4.788C3.72494 5.00008 3.42408 5.04306 3.212 4.884C2.99992 4.72494 2.95694 4.42408 3.116 4.212C3.35721 3.89039 3.85011 3.6016 4.53383 3.39123C4.77418 3.31727 5.04571 3.25062 5.35016 3.19488C5.31611 3.14738 5.27808 3.09831 5.23645 3.04945C5.15738 2.95666 5.07893 2.881 5.01081 2.82955C4.98628 2.81102 4.96674 2.79839 4.95217 2.78987C4.28464 2.88582 3.25999 3.24219 2.60954 3.5792C2.42226 3.82162 2.20825 4.24326 2.00729 4.74117C1.79376 5.27021 1.61752 5.82759 1.52025 6.21648C1.19829 7.50369 1.01236 9.06758 0.97986 10.5739C1.18772 10.8918 1.61807 11.2661 2.16148 11.5917C2.64557 11.8818 3.15003 12.0916 3.5468 12.1809C3.64885 12.0385 3.78065 11.843 3.9138 11.6392C3.93626 11.6048 3.95838 11.5708 3.97996 11.5375C3.19521 11.2591 2.77361 10.8758 2.50064 10.4664C2.35359 10.2458 2.4132 9.94778 2.63377 9.80074C2.85435 9.65369 3.15236 9.71329 3.29941 9.93387C3.56077 10.3259 4.24355 11.0201 7.50002 11.0201C10.7565 11.0201 11.4392 10.326 11.7006 9.93386C11.8477 9.71329 12.1457 9.65369 12.3663 9.80074C12.5869 9.94779 12.6465 10.2458 12.4994 10.4664C12.2262 10.8762 11.8041 11.2598 11.0181 11.5382ZM4.08049 7.01221C4.32412 6.74984 4.65476 6.60162 5.00007 6.59998C5.34538 6.60162 5.67603 6.74984 5.91966 7.01221C6.16329 7.27459 6.30007 7.62974 6.30007 7.99998C6.30007 8.37021 6.16329 8.72536 5.91966 8.98774C5.67603 9.25011 5.34538 9.39833 5.00007 9.39998C4.65476 9.39833 4.32412 9.25011 4.08049 8.98774C3.83685 8.72536 3.70007 8.37021 3.70007 7.99998C3.70007 7.62974 3.83685 7.27459 4.08049 7.01221ZM9.99885 6.59998C9.65354 6.60162 9.3229 6.74984 9.07926 7.01221C8.83563 7.27459 8.69885 7.62974 8.69885 7.99998C8.69885 8.37021 8.83563 8.72536 9.07926 8.98774C9.3229 9.25011 9.65354 9.39833 9.99885 9.39998C10.3442 9.39833 10.6748 9.25011 10.9184 8.98774C11.1621 8.72536 11.2989 8.37021 11.2989 7.99998C11.2989 7.62974 11.1621 7.27459 10.9184 7.01221C10.6748 6.74984 10.3442 6.60162 9.99885 6.59998Z"})),te=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 24 24",...Xt({size:e})},_t("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm3.163 21.783h-.093a.513.513 0 0 1-.382-.14.513.513 0 0 1-.14-.372v-1.406c.006-.467.01-.94.01-1.416a3.693 3.693 0 0 0-.151-1.028 1.832 1.832 0 0 0-.542-.875 8.014 8.014 0 0 0 2.038-.471 4.051 4.051 0 0 0 1.466-.964c.407-.427.71-.943.885-1.506a6.77 6.77 0 0 0 .3-2.13 4.138 4.138 0 0 0-.26-1.476 3.892 3.892 0 0 0-.795-1.284 2.81 2.81 0 0 0 .162-.582c.033-.2.05-.402.05-.604 0-.26-.03-.52-.09-.773a5.309 5.309 0 0 0-.221-.763.293.293 0 0 0-.111-.02h-.11c-.23.002-.456.04-.674.111a5.34 5.34 0 0 0-.703.26 6.503 6.503 0 0 0-.661.343c-.215.127-.405.249-.573.362a9.578 9.578 0 0 0-5.143 0 13.507 13.507 0 0 0-.572-.362 6.022 6.022 0 0 0-.672-.342 4.516 4.516 0 0 0-.705-.261 2.203 2.203 0 0 0-.662-.111h-.11a.29.29 0 0 0-.11.02 5.844 5.844 0 0 0-.23.763c-.054.254-.08.513-.081.773 0 .202.017.404.051.604.033.199.086.394.16.582A3.888 3.888 0 0 0 5.702 10a4.142 4.142 0 0 0-.263 1.476 6.871 6.871 0 0 0 .292 2.12c.181.563.483 1.08.884 1.516.415.422.915.75 1.466.964.653.25 1.337.41 2.033.476a1.828 1.828 0 0 0-.452.633 2.99 2.99 0 0 0-.2.744 2.754 2.754 0 0 1-1.175.27 1.788 1.788 0 0 1-1.065-.3 2.904 2.904 0 0 1-.752-.824 3.1 3.1 0 0 0-.292-.382 2.693 2.693 0 0 0-.372-.343 1.841 1.841 0 0 0-.432-.24 1.2 1.2 0 0 0-.481-.101c-.04.001-.08.005-.12.01a.649.649 0 0 0-.162.02.408.408 0 0 0-.13.06.116.116 0 0 0-.06.1.33.33 0 0 0 .14.242c.093.074.17.131.232.171l.03.021c.133.103.261.214.382.333.112.098.213.209.3.33.09.119.168.246.231.381.073.134.15.288.231.463.188.474.522.875.954 1.145.453.243.961.364 1.476.351.174 0 .349-.01.522-.03.172-.028.343-.057.515-.091v1.743a.5.5 0 0 1-.533.521h-.062a10.286 10.286 0 1 1 6.324 0v.005z"})),ee=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 576 512",...Xt({size:e})},_t("path",{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"})),ne=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 24 24",...Xt({size:e})},[_t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"}),_t("circle",{cx:"12",cy:"9",r:"2.5"})]),re=({style:t,size:e})=>_t("svg",{style:t,viewBox:"0 0 24 24",...Xt({size:e}),fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[_t("path",{d:"M20.5 10a2.5 2.5 0 0 1-2.4-3H18a2.95 2.95 0 0 1-2.6-4.4 10 10 0 1 0 6.3 7.1c-.3.2-.8.3-1.2.3"}),_t("circle",{cx:"12",cy:"12",r:"3"})]),oe=100,ie={position:"fixed",display:"flex",pointerEvents:"none",backgroundColor:jt,imageRendering:"pixelated"},se={width:"100%",height:"100%",objectFit:"contain"},ae=({state:t})=>_t("div",{style:{...ie,borderStyle:"solid",borderWidth:"1px",borderColor:xt,width:`${oe}px`,height:`${oe}px`,...t.showTemplate&&t.templateSrc?{top:`${t.mouseClientY}px`,left:`${t.mouseClientX}px`}:{display:"none"}}},_t("img",{src:t.templateSrc,style:se})),ue={width:"100%",overflow:"hidden"},ce={display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"5px",alignItems:"center",overflow:"hidden",...Pt,borderColor:xt,padding:"2px",borderWidth:"1px",borderStyle:"solid"},le=({state:t,onChange:e})=>_t("div",{style:ce,onclick:t=>(N().then((async t=>{t&&async function(t){return new Promise((e=>{let n=new FileReader;n.onload=async()=>e(n.result),n.readAsDataURL(t)}))}(t).then((t=>{Ri.emit(0,t),e(t)}))})),t)},[Qt({size:20}),null===t.templateSrc?_t("span",{},mt("click to upload")):_t("span",{style:ue},mt(t.templateSrc.slice(0,100))),_t("div",{style:{...Ot,cursor:"none"},onmouseenter:t=>({...t,showTemplate:!0}),onmouseleave:t=>({...t,showTemplate:!1})},ee({size:20})),ae({state:t})]),fe=({state:t})=>_t("button",{style:{...Yt,borderColor:t.botWorksNow?Ct:xt},onclick:t=>(Ri.emit(2),t)},Zt("stop/start")),he=({style:t,href:e,childs:n})=>_t("a",{style:{color:"inherit",display:"flex",alignItems:"center",justifyContent:"space-between",...t},href:e,target:"_blank"},n),pe=({style:t,size:e})=>he({style:t,href:Xo,childs:Jt({size:e})}),de=({style:t,size:e})=>he({style:t,href:Qo,childs:te({size:e})}),ge=({style:t,size:e})=>he({style:t,href:Zo,childs:re({size:e})}),ye=({state:t})=>_t("div",{style:qt,onclick:t=>(Ri.emit(5,!t.stopOnCaptcha),{...t,stopOnCaptcha:!t.stopOnCaptcha})},[_t("span",{},Zt("stop on captcha")),_t("input",{type:"checkbox",checked:t.stopOnCaptcha,style:{cursor:"pointer"}})]),ve={lineHeight:"90%"},we=({state:t})=>_t("div",{style:ve,title:"connections (users)"},[Zt("online: "),_t("span",{style:At},t.online?Zt(`${t.online.connections}(${t.online.users})`):mt("-"))]),me=()=>_t("button",{style:Yt,onclick:t=>(Ri.emit(8),t)},Zt("heatmap")),_e=()=>_t("button",{style:Yt,onclick:t=>(Ri.emit(9),t)},Zt("heatweb")),be=({state:t})=>_t("div",{style:qt,onclick:t=>(Ri.emit(7,!t.advancedMode),{...t,advancedMode:!t.advancedMode})},[_t("span",{},Zt("advanced")),_t("input",{type:"checkbox",checked:t.advancedMode,style:{cursor:"pointer"}})]),xe=on(Un()),Ce=({state:t,style:e})=>{let n=(0,xe.default)(t.botStatus)?`${t.botStatus.message} ${t.botStatus.stack??""}`:t.botStatus;return _t("div",{...(0,xe.default)(t.botStatus)&&{title:"click to copy error",onclick:t=>(navigator.clipboard.writeText(n),t)},style:{...(0,xe.default)(t.botStatus)&&{cursor:"pointer"},...e,display:"flex",gap:"0.5em",flexDirection:"row",alignItems:"baseline",overflow:"hidden"}},[_t("span",{},Zt("status: ")),_t("span",{style:{textOverflow:"ellipsis",textWrap:"nowrap",...At,overflow:"hidden"}},mt(n))])},je=on(Un()),(ke={storage:new class extends $o{constructor(t){super(),this.localStorageData={},this.data={},this.localStorageKey="storage",t&&t.localStorageKey&&(this.localStorageKey=t.localStorageKey),this.load()}set(t,e,n=!0){if(n&&t in this.data||!n&&t in this.localStorageData)throw new Error(`try to duplicate field "${t}" with value "${e}"`);n?(this.emit("beforeChangeLC."+t,e),this.localStorageData[t]=e,this.save(),this.emit("afterChangeLC."+t,e)):(this.emit("beforeChange."+t,e),this.data[t]=e,this.emit("afterChange."+t,e))}get(t){return t in this.data?this.data[t]:t in this.localStorageData?this.localStorageData[t]:null}has(t){return t in this.data||t in this.localStorageData}save(){Object.keys(this.localStorageData).length&&localStorage.setItem(this.localStorageKey,JSON.stringify(this.localStorageData))}load(){let t=localStorage.getItem(this.localStorageKey);null!==t&&(this.localStorageData=JSON.parse(t))}}({localStorageKey:ti}),csa:null}).storage.has("strategy")||ke.storage.set("strategy",K),ke.storage.has("stopOnCaptcha")||ke.storage.set("stopOnCaptcha",Z),ke.storage.has("smartPlace")||ke.storage.set("smartPlace",Z),Ae=({state:t,style:e})=>_t("div",{style:{...t.placedPixel&&{cursor:"pointer"},...e},onclick:t=>(t.placedPixel&&ke.csa?.goto(...t.placedPixel),t)},[Zt("placed: "),_t("span",{style:{...Ht,...t.placedPixel&&{textDecoration:"underline"}}},[...t.placedPixel?[_t("span",{},mt(t.placedPixel[0].toString())),_t("span",{},mt(t.placedPixel[1].toString()))]:[],null===t.placedPixelColor?mt("-"):"number"==typeof t.placedPixelColor?_t("span",{},mt(t.placedPixelColor.toString())):_t("span",{style:{...Gt,background:`rgb(${t.placedPixelColor})`}})])]),Pe=on(So()),Oe=({state:t})=>_t("div",{style:Nt},[mt("x: "),_t("input",{style:Ut,type:"number",oninput:(t,e)=>{let n=e.currentTarget.value,r=(0,Pe.default)(t.templateCoords);return r[0]=n?+n:null,null!==r[0]&&null!==r[1]&&Ri.emit(1,[r[0],r[1]]),{...t,templateCoords:r}},value:t.templateCoords?.[0]??""})]),Se=on(So()),Ee=({state:t})=>_t("div",{style:Nt},[mt("y: "),_t("input",{style:Ut,type:"number",oninput:(t,e)=>{let n=e.currentTarget.value,r=(0,Se.default)(t.templateCoords);return r[1]=n?+n:null,null!==r[0]&&null!==r[1]&&Ri.emit(1,[r[0],r[1]]),{...t,templateCoords:r}},value:t.templateCoords?.[1]??""})]),Me=({state:t})=>_t("div",{style:Wt},[Oe({state:t}),Ee({state:t}),_t("div",{title:"go to template",onclick:t=>(t.templateCoords&&null!==t.templateCoords[0]&&null!==t.templateCoords[1]&&ke.csa?.goto(t.templateCoords[0],t.templateCoords[1]),t),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"}},ne({size:20}))]),Te=({state:t})=>_t("div",{style:qt,onclick:t=>(Ri.emit(6,!t.smartPlace),{...t,smartPlace:!t.smartPlace})},[_t("span",{},Zt("smart place")),_t("input",{type:"checkbox",checked:t.smartPlace,style:{cursor:"pointer"}})]),Ie=new Map,Le=A(K).toString(),Ie.set(Le,K),ze=(...t)=>{let e=t.some((t=>t>1e3))?1e3:0;return t.map((t=>(t=Math.floor(t),0===e?t.toString():(t/e).toFixed(1)+"k")))},Re=t=>{let e=B(Jo),n=document.createElement("div");document.body.appendChild(n);let r=(t,e)=>{let n=Ie.get(e.toString());return n?Ri.call(3,n):(console.warn(`cant define strategy for hash "${e}"\nuse default ("${K}")`),Ri.call(3,K)),{...t,selectedStrategy:e.toString()}},o=(t,e)=>({...t,templateCoords:e}),i=(t,e)=>({...t,templateSrc:e}),s=t=>c(i,t),a=(t,e)=>({...t,mouseClientX:e[0],mouseClientY:e[1]});window.addEventListener("mousemove",(t=>{(t=>{c(a,t)})([t.clientX,t.clientY])}));let u={appTop:"",botStatus:"-",strategies:{},cd:"-",online:null,buildPredict:"-",templateErrors:"-",progress:"-",windowX:t.storage.get("window.x")??unsafeWindow.innerWidth-400-Q[0],windowY:t.storage.get("window.y")??Q[1],placedPixel:null,placedPixelColor:null,templateSrc:t.storage.get("template.src"),botWorksNow:!1,stopOnCaptcha:t.storage.get("stopOnCaptcha")??Z,smartPlace:t.storage.get("smartPlace")??X,templateCoords:[t.storage.get("template.x"),t.storage.get("template.y")],selectedStrategy:K,mouseClientX:0,mouseClientY:0,showTemplate:!1,advancedMode:t.storage.get("advanced")??!1},c=bt({init:u,view:t=>_t("div",{style:{...Et,left:`${t.windowX}px`,top:`${t.windowY}px`}},[_t("div",{style:Tt},[_t("div",{style:{display:"flex",alignItems:"baseline",columnGap:"5px"}},[_t("span",{style:Mt},Zt(e)),_t("div",{style:{...Kt,...typeof GM_info>"u"&&{display:"none"}}},mt(`v. ${GM_info?.script.version}`))]),_t("div",{style:It},[pe({size:20}),de({size:20}),ge({size:20})])]),_t("div",{style:Lt}),_t("div",{style:zt},[_t("div",{style:Rt},Zt("settings")),_t("div",{style:Rt},Zt("info")),_t("div",{style:Dt},[Me({state:t}),_t("div",{style:Bt},[Zt("strategy:"),_t("select",{style:Ft,value:t.selectedStrategy,onchange:(t,e)=>r(t,e.currentTarget.value)},Object.entries(t.strategies).map((([t,e])=>_t("option",{value:t,style:$t},Zt(e)))))]),t.advancedMode&&ye({state:t}),t.advancedMode&&Te({state:t}),le({state:t,onChange:t=>s(t)}),_t("div",{style:{display:"flex",justifyContent:"space-between"}},[fe({state:t}),be({state:t})])]),_t("div",{style:Dt},[we({state:t}),Ce({state:t,style:Vt}),_t("div",{style:Vt},[Zt("cooldown: "),_t("span",{style:At},Zt(t.cd))]),_t("div",{style:Vt},[Zt("errors: "),_t("span",{style:At},Zt(t.templateErrors))]),_t("div",{style:Vt},[Zt("progress: "),_t("span",{style:At},Zt(t.progress))]),_t("div",{style:Vt},[Zt("end in: "),_t("span",{style:At},Zt(t.buildPredict))]),Ae({state:t,style:Vt}),t.advancedMode&&_t("div",{style:{display:"flex",gap:"5px"}},[me(),_e()])])])]),node:n}),l=(t,e)=>{let n=A(e).toString();return Ie.set(n,e),{...t,strategies:{...t.strategies,[n]:e}}},f=(t,e)=>({...t,botStatus:(0,je.default)(e)?e:v(e)}),h=(t,e)=>({...t,cd:null===e?"-":e.toFixed(2)}),p=(t,e)=>({...t,online:e}),d=(t,[e,n])=>{let r;if(null===e)r="?";else{let t=[e];void 0!==n&&e!==n&&t.push(n),r=t[0]>7200?t.map((t=>t/3600)).map((t=>t.toFixed(1))).join("-")+"h":t[0]>120?t.map((t=>t/60)).map((t=>t.toFixed(1))).join("-")+"m":t.map((t=>t.toFixed(1))).join("-")+"s"}return{...t,buildPredict:r}},g=(t,[e,n])=>{let r={...t,templateErrors:"?",progress:"?"};if(null===e)void 0!==n&&(r.progress=`?/${ze(n)[0]}`);else if(void 0===n)r.templateErrors=ze(e)[0];else{let t=n-e,o=(t/n*100).toFixed(2);r.templateErrors=ze(e)[0],r.progress=ze(t,n).join("/")+` (${o}%)`}return r},y=(e,n)=>(t.storage.set("window.x",n[0]),t.storage.set("window.y",n[1]),{...e,windowX:n[0],windowY:n[1]}),w=(t,[e,n,r])=>({...t,placedPixel:[e,n],placedPixelColor:r});return function t(){n.firstChild?E(n.firstChild,n,((t,e)=>(t=>c(y,t))([t,e]))):setTimeout(t,250)}(),{root:n,getState:()=>new Promise((t=>c((e=>()=>(t(e),e))))),addStrategy:t=>c(l,t),setStrategy:t=>c(r,t),setBotStatus:t=>c(f,t),setCooldown:t=>c(h,t),setBotOnline:t=>c(p,t),setBuildPredict:(t,e)=>c(d,[t,e]),setProgress:(t,e)=>c(g,[t,e]),setLastPlaced:(...t)=>c(w,t),setTemplateCoords:(t,e)=>c(o,[t,e]),setTemplateSource:s}},De=new class{Println(...t){console.log("[INFO] ",...t)}},Ue=new class{Println(...t){console.debug("[TRACE] ",...t)}},We=new class{Println(...t){console.warn("[TRACE] ",...t)}},Ne=class extends Fo{constructor(t,e,n,r){super(),this.api=t,this.targeter=e,this.solver=n,this.status=0,this.captchaEmitted=!1,this.targeterToSet=null,this.placingAborter=null,this.loopAborter=null,this.options={...Y,...r}}get works(){return 2===this.status}get idle(){return 0===this.status}async start(){this.status=2,await this.loop()}stop(){if(0!==this.status)return 1===this.status||(this.status=1,this.abortPlacing(),this.abortLoop()),this.wait(2)}changeTargeter(t){this.abortPlacing(),this.targeterToSet=t}async loop(){for(this.emit(0,this.targeter.countErrors());2===this.status;){let t,e;null!==this.targeterToSet&&(this.targeter=this.targeterToSet,this.targeterToSet=null);try{[t,e]=await this.iteration()}catch(n){let r=n;if([t,e]=[0,`${r.message}\n${r.stack}`],r!==No)throw r;console.warn(r.name,r.message)}if(2!==this.status)break;De.Println(`next tick after ${t.toString()} :: ${e}`),this.loopAborter=new Vo,await Promise.any([m(t),this.loopAborter.promise]),this.loopAborter&&(this.loopAborter.destroy(),this.loopAborter=null)}this.status=0,this.emit(2)}async iteration(){let t=this.api.info.minCd,e=this.api.pixelsCanPlace();if(this.api.info.haveStack&&e<=1||0===e){let e=this.api.getCooldown(),n=0;return n=e<t?e:e-O(0,t),[n,"cooldown"]}let n=this.targeter.nexts(e);if(0===n.length)return[O(3e3,Math.min(5*t,this.api.info.stack)),"no pixels to place"];Ue.Println("place",n.map((t=>`[${t.x}_${t.y} ${t.id}]`)).join(", "));try{await this.placePixels(n);let t=this.targeter.countErrors();return this.emit(0,t),[50,this.options.showErrors?`left ${t.errors} errors`:"pass"]}catch(t){let e=t;switch(e){case null:this.captchaEmitted=!1;break;case Uo:break;case Pi.errNoPlacePixelResult:We.Println(Pi.errNoPlacePixelResult);break;case Pi.errFullStack:We.Println("unexpected cooldown",this.api.getCooldown());break;case Pi.errPixelProtected:We.Println("protected pixel"),d("cant place in protected area");break;case Pi.errCaptcha:return null===this.solver?this.captchaEmitted||(this.emit(1),this.captchaEmitted=!0):await this.solveCaptcha(),[6e3,`tried place ${n.length} pixels with CAPTCHA`];default:throw e}return[0,""]}}async placePixels(t){if(this.options.smartPlace){this.placingAborter=new Vo;try{await this.api.smartPlace(t,this.placingAborter)}catch(t){throw t}finally{this.placingAborter&&(this.placingAborter.destroy(),this.placingAborter=null)}}else await this.api.placePixels(t)}abortPlacing(){this.placingAborter&&(De.Println("stop bot placing with aborter"),this.placingAborter.abort())}abortLoop(){this.loopAborter&&(De.Println("stop bot loop with aborter"),this.loopAborter.abort())}async solveCaptcha(){if(!this.solver)throw new Error("no captcha solver in bot instance");for(;;){De.Println("have captcha");let t=await this.api.getCaptcha();De.Println("captcha loaded, send to solver...");let e=await this.solver.solve(t);De.Println(`answer from solver "${JSON.stringify(e)}", send to canvas...`);let n=await this.api.sendAnswer(e);if(n instanceof Error)return[0,"",n];if(n){De.Println("solution is right");break}De.Println("solution is wrong, try again...")}}changeSmartPlace(t){this.options.smartPlace=t}},Be=new Fo,fetch("https://raw.githubusercontent.com/TouchedByDarkness/PixelPlanet-Bot/master/secret.txt").then((t=>(t.ok||u(),t.text()))).then((t=>{"hf loves males"!==t.trim()&&u()})).catch(u),$e=["/api/baninfo","/api/getiid","/api/shards","/api/modtools","/api/startdm","/api/leavechan","/api/block","/api/blockdm","/api/privatize","/api/chathistory","/api/me","/api/auth"],Fe=unsafeWindow,He=Fe.fetch,Fe.fetch=function(t,e){let n;n=t instanceof Request?t.url:t.startsWith("http")?t:location.origin+(t.startsWith("/")?"":"/")+t;let r=new URL(n).pathname;if(r.startsWith("/api")&&!$e.some((t=>r.startsWith(t)))){let t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random());return He(`https://${location.host}/chunks/0/${t}/${e}.bmp`)}return He(t,e)},!as[K])throw Wo;(Ge=Re(ke)).setBotStatus("idle"),Ve=new qo((async()=>{let t=await Ye.get();if(!t)return null;await f();let e=await qe.get();if(!e)return null;let n=new Ne(t,e,null,{smartPlace:ke.storage.get("smartPlace")??X}).on(0,(t=>Be.emit(1,t))).on(1,(()=>Be.emit(3)));return c("bot instance is ready"),n}),(t=>{c("cant create bot"),c(t),Ge.setBotStatus("error")})),qe=new qo((async()=>{let[t,e]=await Promise.all([Ke.get(),Ye.get()]);if(!t||!e)return null;!function(t,e){if(t.readyState!==rs.QUANTIZED){let n=performance.now();t.quantize(e.palette),c("template quantized in",((performance.now()-n)/1e3).toFixed(3),"s.")}}(t,e);let n=ke.storage.has("strategy")&&ke.storage.get("strategy")in as?ke.storage.get("strategy"):K,r=performance.now(),o=p(e,t,n)||null;if(!o)throw Ro;return c("targeter is ready in",((performance.now()-r)/1e3).toFixed(3),"s."),o}),(t=>{c("cant create targeter"),c(t),Ge.setBotStatus(t)})),Ke=new qo((async()=>{let t=ke.storage.get("template.x"),e=ke.storage.get("template.y");if(null===t||null===e)throw Lo;let n=ke.storage.get("template.src");if(!n)throw Io;let r=new rs({name:n.startsWith("data:image")?"cached":n.split("/")[0]||"unknown",x:t,y:e});return await r.load(n),c("template is ready"),r}),(t=>{c("cant load template"),c(t),Ge.setBotStatus(t)})),Ye=new qo((async()=>D({maxAttempts:5,func:async()=>{let[t,e]=await P();ke.csa=e;let n=new li(t);return c("api is ready"),n.on(4,(t=>Be.emit(2,t))),n},delay:1e3,onerror:t=>{c("create api error:\n",t),Ge.setBotStatus("cant create api")}})),(t=>(c("cant create api",t),Promise.resolve(null)))),ke.bot=Ve,ke.targeter=qe,ke.api=Ye,ke.template=Ke,unsafeWindow.db=ke,(async()=>{await(()=>{let t=[Ye.get()];return ke.storage.has("template.x")&&ke.storage.has("template.y")&&ke.storage.has("template.src")&&t.push(Ke.get()),Promise.all(t)})(),setInterval((async()=>{let t=await Ye.get();Ge.setCooldown(t?t.getCooldown()/1e3:null)}),110),new q(Yo,{hideReconnectErrors:!0}).on(0,(t=>Ge.setBotOnline(t)));let t={worldX:0,worldY:0};Ri.on(1,(async([t,e])=>{let n=!1;t!==ke.storage.get("template.x")&&(n=!0,ke.storage.set("template.x",t)),e!==ke.storage.get("template.y")&&(n=!0,ke.storage.set("template.y",e)),n&&(await(Ve.now()?.stop()),Ke.now()?.move(t,e),f())})),Ri.on(0,(async t=>{ke.storage.set("template.src",t),await Ke.clear(),l()})),Ri.on(4,(([e,n])=>{t.worldX=e,t.worldY=n})),Ri.on(2,(async()=>{let t=await Ve.get();t&&(t.works?t.stop():t.idle&&h(t.start()))})),Ri.on(3,(t=>{ke.storage.set("strategy",t),c(`change strategy to "${t}"`),l()})),Object.keys(as).forEach((t=>Ge.addStrategy(t))),Ge.setStrategy(A(ke.storage.get("strategy")??K)),Be.on(0,(t=>{Ge.setBotStatus(t),Ve.now()?.stop(),c(t.name,t.message,t.stack??"")})),Be.on(1,(async t=>{let[e,n]=t?[t.errors,t.timeToEnd]:[null,null],r=qe.now()?.countTargets();n&&(n instanceof Array?Ge.setBuildPredict(n[0]/1e3,n[1]/1e3):Ge.setBuildPredict(n/1e3)),Ge.setProgress(e,r)})),Be.on(2,(t=>{let e=S(t);if(e){let t=Ye.now();Ge.setLastPlaced(e.x,e.y,t?.palette.idToRGB(e.id)??e.id)}})),Be.on(3,(()=>{ke.storage.get("stopOnCaptcha")&&Ve.now()?.stop(),d("you need solve CAPTCHA")})),Ri.on(8,(async()=>{let t=await qe.get();if(!t)return;let e=z(t);if(e){let t=await Ke.get(),n=t?.name?t.name+"_"+(ke.storage.get("strategy")??"nostrat"):void 0;I(e.canvas,n)}else c("heatmap canvas is undefined")})),Ri.on(9,(async()=>{let t=await qe.get();if(!t)return;let e=R(t);if(e){let t=await Ke.get(),n=t?.name?t.name+"_"+(ke.storage.get("strategy")??"nostrat"):void 0;L(e,n)}})),Ri.on(5,(t=>{ke.storage.set("stopOnCaptcha",t)})),Ri.on(6,(async t=>{ke.storage.set("smartPlace",t);let e=Ve.now();e&&(e.changeSmartPlace(t),e.works&&(await e.stop(),await e.start()))})),Ri.on(7,(t=>{ke.storage.set("advanced",t)})),window.addEventListener("keydown",(({code:e})=>{if(!g(".show form")&&!g("#wm .show"))switch(e){case"KeyB":Ri.call(2);break;case"KeyN":Ri.call(1,[t.worldX,t.worldY]),Ge.setTemplateCoords(t.worldX,t.worldY)}}))})()})()}const console={log:window.console.debug,warn:window.console.debug,debug:window.console.debug,error:window.console.debug,trace:window.console.trace};window.addEventListener("error",console.debug),function t(){console.log("wait until page loaded"),["interactive","complete"].includes(document.readyState)?(console.log("run bot"),payload()):setTimeout(t,100)}();
